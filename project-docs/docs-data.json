{
  "categories": {
    "setup": {
      "id": "setup",
      "name": "Kurulum & YapÄ±landÄ±rma",
      "icon": "fa-cog",
      "files": [
        "docker-container-config",
        "environment-setup",
        "setup-guide"
      ]
    },
    "deployment": {
      "id": "deployment",
      "name": "Deployment",
      "icon": "fa-rocket",
      "files": [
        "automated-deployment",
        "deployment-quick-start",
        "hetzner-deployment"
      ]
    },
    "development": {
      "id": "development",
      "name": "GeliÅŸtirme",
      "icon": "fa-code",
      "files": [
        "branch-strategy",
        "socket-testing",
        "swagger-troubleshooting",
        "test"
      ]
    },
    "features": {
      "id": "features",
      "name": "Ã–zellikler & Entegrasyonlar",
      "icon": "fa-puzzle-piece",
      "files": [
        "google-workspace-oauth2-config",
        "google-workspace-smtp-config",
        "manual-signup-email-verification",
        "messaging-socket-events",
        "messaging-socket-implementation-plan",
        "minio-file-upload",
        "redis-bullmq-integration",
        "socket-integration-summary",
        "socket-io-integration"
      ]
    },
    "database": {
      "id": "database",
      "name": "VeritabanÄ±",
      "icon": "fa-database",
      "files": [
        "prisma-type-helper-refactor"
      ]
    },
    "monitoring": {
      "id": "monitoring",
      "name": "Ä°zleme & Loglama",
      "icon": "fa-chart-line",
      "files": [
        "monitoring-setup"
      ]
    },
    "knowledge": {
      "id": "knowledge",
      "name": "Knowledge Base",
      "icon": "fa-book",
      "files": [
        "readme",
        "tipbox-knowledge-base"
      ]
    },
    "summaries": {
      "id": "summaries",
      "name": "Ã–zetler & Analizler",
      "icon": "fa-file-alt",
      "files": [
        "api-response-impact-analysis",
        "industry-standards-analysis",
        "marketplace-fix-summary",
        "marketplace-seed-summary",
        "session-summary"
      ]
    },
    "changelog": {
      "id": "changelog",
      "name": "Changelog",
      "icon": "fa-history",
      "files": [
        "changelog-2025-01-xx"
      ]
    },
    "other": {
      "id": "other",
      "name": "DiÄŸer",
      "icon": "fa-file",
      "files": []
    }
  },
  "files": [
    {
      "id": "api-response-impact-analysis",
      "fileName": "API_RESPONSE_IMPACT_ANALYSIS",
      "path": "API_RESPONSE_IMPACT_ANALYSIS.md",
      "title": "API Response Impact Analysis - Count Denormalization",
      "content": "# API Response Impact Analysis - Count Denormalization\n\n## Ã–zet\nCount denormalization deÄŸiÅŸiklikleri **API response formatlarÄ±nÄ± etkilemedi**. TÃ¼m endpoint'ler aynÄ± response formatÄ±nÄ± dÃ¶ndÃ¼rmeye devam ediyor.\n\n## DeÄŸiÅŸiklik Ã–zeti\n\n### YapÄ±lan DeÄŸiÅŸiklikler\n1. **VeritabanÄ± Seviyesi**: Count kolonlarÄ± eklendi (`postsCount`, `trustCount`, `likesCount`, vb.)\n2. **Repository Seviyesi**: Count'larÄ± denormalize kolonlardan okuma ve gÃ¼ncelleme\n3. **Service Seviyesi**: Count'larÄ± denormalize kolonlardan okuma\n\n### DeÄŸiÅŸmeyenler\n- âœ… API endpoint'leri\n- âœ… Request formatlarÄ±\n- âœ… Response formatlarÄ±\n- âœ… DTO'lar\n- âœ… Swagger/OpenAPI dokÃ¼mantasyonu\n\n## Etkilenen Endpoint'ler ve Response FormatlarÄ±\n\n### 1. User Profile Card Endpoint\n**Endpoint**: `GET /users/:id/profile-card`\n\n**Response Format** (DeÄŸiÅŸmedi):\n```json\n{\n  \"id\": \"string\",\n  \"name\": \"string\",\n  \"avatarUrl\": \"string | null\",\n  \"bannerUrl\": \"string | null\",\n  \"description\": \"string | null\",\n  \"titles\": [\"string\"],\n  \"stats\": {\n    \"posts\": 42,        // â† Denormalize kolondan geliyor (Ã¶nceden count() sorgusu)\n    \"trust\": 15,        // â† Denormalize kolondan geliyor (Ã¶nceden count() sorgusu)\n    \"truster\": 28       // â† Denormalize kolondan geliyor (Ã¶nceden count() sorgusu)\n  },\n  \"badges\": [...]\n}\n```\n\n**Kod**: `src/application/user/user.service.ts:120-159`\n- `profile?.postsCount` â†’ `stats.posts`\n- `profile?.trustCount` â†’ `stats.trust`\n- `profile?.trusterCount` â†’ `stats.truster`\n\n### 2. Feed Endpoints\n**Endpoints**: \n- `GET /feed`\n- `GET /feed/filtered`\n\n**Response Format** (DeÄŸiÅŸmedi):\n```json\n{\n  \"items\": [\n    {\n      \"type\": \"feed\",\n      \"data\": {\n        \"id\": \"string\",\n        \"type\": \"feed\",\n        \"user\": {...},\n        \"stats\": {\n          \"likes\": 10,        // â† Denormalize kolondan geliyor\n          \"comments\": 5,       // â† Denormalize kolondan geliyor\n          \"shares\": 0,\n          \"bookmarks\": 3       // â† Denormalize kolondan geliyor\n        },\n        \"createdAt\": \"2025-11-05T...\"\n      }\n    }\n  ],\n  \"pagination\": {...}\n}\n```\n\n**Kod**: `src/application/feed/feed.service.ts:116-125`\n- `post.likesCount` â†’ `stats.likes`\n- `post.commentsCount` â†’ `stats.comments`\n- `post.favoritesCount` â†’ `stats.bookmarks`\n\n### 3. User Posts/Reviews/Benchmarks/Tips Endpoints\n**Endpoints**:\n- `GET /users/:id/posts`\n- `GET /users/:id/reviews`\n- `GET /users/:id/benchmarks`\n- `GET /users/:id/tips`\n\n**Response Format** (DeÄŸiÅŸmedi):\n```json\n[\n  {\n    \"id\": \"string\",\n    \"user\": {...},\n    \"stats\": {\n      \"likes\": 10,        // â† Denormalize kolondan geliyor\n      \"comments\": 5,      // â† Denormalize kolondan geliyor\n      \"shares\": 0,\n      \"bookmarks\": 3      // â† Denormalize kolondan geliyor\n    },\n    ...\n  }\n]\n```\n\n**Kod**: `src/application/user/user.service.ts:463-481`\n- `getPostStats()` metodu denormalize count'larÄ± kullanÄ±yor\n\n### 4. Explore/Trending Endpoints\n**Endpoint**: `GET /explore/hottest`\n\n**Response Format** (DeÄŸiÅŸmedi):\n- AynÄ± `FeedResponse` formatÄ±\n- `BaseStats` interface kullanÄ±lÄ±yor\n\n**Kod**: `src/application/explore/explore.service.ts:127-132`\n\n## DTO'lar ve Interface'ler\n\n### BaseStats Interface\n**Dosya**: `src/interfaces/feed/feed.dto.ts:17-22`\n\n```typescript\nexport interface BaseStats {\n  likes: number;\n  comments: number;\n  shares: number;\n  bookmarks: number;\n}\n```\n\n**Durum**: âœ… DeÄŸiÅŸmedi\n\n### FeedResponse Interface\n**Dosya**: `src/interfaces/feed/feed.dto.ts:112-119`\n\n```typescript\nexport interface FeedResponse {\n  items: FeedItem[];\n  pagination?: {\n    cursor?: string;\n    hasMore: boolean;\n    limit: number;\n  };\n}\n```\n\n**Durum**: âœ… DeÄŸiÅŸmedi\n\n## Swagger/OpenAPI DokÃ¼mantasyonu\n\n**Dosya**: `src/interfaces/app.ts` ve router dosyalarÄ±\n\n**Durum**: âœ… DeÄŸiÅŸmedi\n- TÃ¼m endpoint dokÃ¼mantasyonlarÄ± aynÄ±\n- Response ÅŸemalarÄ± aynÄ±\n- Request parametreleri aynÄ±\n\n## Backward Compatibility\n\n### âœ… Tamamen Uyumlu\n- Mevcut API client'lar Ã§alÄ±ÅŸmaya devam edecek\n- Frontend deÄŸiÅŸikliÄŸi gerektirmez\n- Mobile app deÄŸiÅŸikliÄŸi gerektirmez\n- Third-party entegrasyonlar etkilenmez\n\n### âš ï¸ Tek Fark: Performans\n- **Ã–nceden**: Her request'te count() sorgularÄ± Ã§alÄ±ÅŸÄ±yordu\n- **Åimdi**: Denormalize kolonlardan okuma (Ã§ok daha hÄ±zlÄ±)\n\n## Test SenaryolarÄ±\n\n### Test Edilmesi Gerekenler\n1. âœ… `GET /users/:id/profile-card` â†’ `stats` deÄŸerleri doÄŸru mu?\n2. âœ… `GET /feed` â†’ `stats` deÄŸerleri doÄŸru mu?\n3. âœ… `GET /feed/filtered?minLikes=5` â†’ Filtreleme Ã§alÄ±ÅŸÄ±yor mu?\n4. âœ… `GET /users/:id/posts` â†’ `stats` deÄŸerleri doÄŸru mu?\n5. âœ… `GET /explore/hottest` â†’ `stats` deÄŸerleri doÄŸru mu?\n\n### Test Edilmesi Gerekmeyenler\n- âŒ Response formatÄ± deÄŸiÅŸikliÄŸi (deÄŸiÅŸmedi)\n- âŒ Request parametreleri (deÄŸiÅŸmedi)\n- âŒ DTO deÄŸiÅŸiklikleri (deÄŸiÅŸmedi)\n\n## SonuÃ§\n\n### Etki Seviyesi: **SIFIR** (API Response AÃ§Ä±sÄ±ndan)\n\n1. **API Response FormatlarÄ±**: âœ… DeÄŸiÅŸmedi\n2. **Request FormatlarÄ±**: âœ… DeÄŸiÅŸmedi\n3. **DTO'lar**: âœ… DeÄŸiÅŸmedi\n4. **Swagger DokÃ¼mantasyonu**: âœ… DeÄŸiÅŸmedi\n5. **Backward Compatibility**: âœ… %100 uyumlu\n\n### Sadece DeÄŸiÅŸen\n- **Veri KaynaÄŸÄ±**: `count()` sorgularÄ± â†’ Denormalize kolonlar\n- **Performans**: Ã‡ok daha hÄ±zlÄ± response sÃ¼releri\n- **VeritabanÄ±**: Yeni count kolonlarÄ± eklendi\n\n### Migration Gereksinimleri\n- âœ… Mevcut veriler iÃ§in migration ile count'lar backfill edildi\n- âœ… Yeni veriler iÃ§in count'lar otomatik gÃ¼ncelleniyor\n\n## Ä°lgili Dosyalar\n\n### Service KatmanÄ±\n- `src/application/user/user.service.ts` - `getUserProfileCard()`, `getPostStats()`\n- `src/application/feed/feed.service.ts` - `getUserFeed()`, `getFilteredFeed()`\n- `src/application/explore/explore.service.ts` - `getHottestPosts()`\n\n### Repository KatmanÄ±\n- `src/infrastructure/repositories/content-post-prisma.repository.ts`\n- `src/infrastructure/repositories/trust-relation-prisma.repository.ts`\n- `src/infrastructure/repositories/feed-prisma.repository.ts`\n\n### Interface/DTO KatmanÄ±\n- `src/interfaces/feed/feed.dto.ts` - `BaseStats`, `FeedResponse`\n- `src/interfaces/user/user.router.ts` - Profile card endpoint\n- `src/interfaces/feed/feed.router.ts` - Feed endpoints\n\n## Son GÃ¼ncelleme\n2025-11-05\n\n",
      "category": "summaries"
    },
    {
      "id": "automated-deployment",
      "fileName": "AUTOMATED_DEPLOYMENT",
      "path": "AUTOMATED_DEPLOYMENT.md",
      "title": "Otomatik Deployment Rehberi - Hetzner Test Sunucusu",
      "content": "# Otomatik Deployment Rehberi - Hetzner Test Sunucusu\n\nBu dokÃ¼man, Tipbox Backend projesinin Hetzner test sunucusuna (188.245.150.117) otomatik olarak deploy edilmesi iÃ§in gerekli tÃ¼m adÄ±mlarÄ± iÃ§erir.\n\n## ğŸ“‹ Ä°Ã§indekiler\n\n1. [Genel BakÄ±ÅŸ](#genel-bakÄ±ÅŸ)\n2. [Sunucu TarafÄ± Kurulum](#sunucu-tarafÄ±-kurulum)\n3. [Proje TarafÄ± YapÄ±landÄ±rma](#proje-tarafÄ±-yapÄ±landÄ±rma)\n4. [GitHub Actions Workflow](#github-actions-workflow)\n5. [Ä°lk Deployment](#ilk-deployment)\n6. [Otomatik Deployment](#otomatik-deployment)\n7. [Troubleshooting](#troubleshooting)\n\n---\n\n## ğŸ¯ Genel BakÄ±ÅŸ\n\n### Deployment Stratejisi\n\n- **Test Branch**: `test` veya `staging` branch'ine push yapÄ±ldÄ±ÄŸÄ±nda otomatik deploy\n- **Deployment YÃ¶ntemi**: GitHub Actions â†’ SSH ile sunucuya baÄŸlan â†’ Docker Compose ile deploy\n- **Zero-Downtime**: Rolling deployment stratejisi (opsiyonel, ileride eklenebilir)\n\n### Mimari\n\n```\nGitHub Repository\n    â†“ (push to test branch)\nGitHub Actions Workflow\n    â†“ (SSH connection)\nHetzner Server (188.245.150.117)\n    â†“ (docker-compose)\nDocker Containers:\n  - Backend (Node.js)\n  - PostgreSQL\n  - Redis\n  - MinIO\n  - Nginx (reverse proxy)\n```\n\n---\n\n## ğŸ–¥ï¸ Sunucu TarafÄ± Kurulum\n\n### 1. Ä°lk Sunucu HazÄ±rlÄ±ÄŸÄ±\n\nSSH ile sunucuya baÄŸlanÄ±n:\n```bash\nssh root@188.245.150.117\n```\n\n### 2. Sistem GÃ¼ncellemesi ve Temel Kurulumlar\n\n```bash\n# Sistem gÃ¼ncellemesi\napt update && apt upgrade -y\n\n# Temel araÃ§lar\napt install -y curl wget git ufw htop nano\n\n# Docker kurulumu\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n\n# Docker Compose kurulumu\napt install docker-compose-plugin -y\n\n# Docker servisini baÅŸlat\nsystemctl start docker\nsystemctl enable docker\n\n# Docker kullanÄ±cÄ± izinlerini ayarla (opsiyonel, root kullanÄ±yorsanÄ±z gerekmez)\n# usermod -aG docker $USER\n```\n\n### 3. Firewall YapÄ±landÄ±rmasÄ±\n\n```bash\n# Firewall kurallarÄ±nÄ± ayarla\nufw allow 22/tcp   # SSH\nufw allow 80/tcp   # HTTP\nufw allow 443/tcp  # HTTPS\nufw --force enable\n\n# Firewall durumunu kontrol et\nufw status\n```\n\n### 4. Deployment Dizini OluÅŸturma\n\n```bash\n# Proje dizini oluÅŸtur\nmkdir -p /opt/tipbox-backend\ncd /opt/tipbox-backend\n\n# Dizin izinlerini ayarla\nchmod 755 /opt/tipbox-backend\n```\n\n### 5. SSH Key YapÄ±landÄ±rmasÄ± (GitHub Actions iÃ§in)\n\nGitHub Actions'Ä±n sunucuya SSH ile baÄŸlanabilmesi iÃ§in:\n\n#### 5.1. SSH Key OluÅŸturma (Sunucuda)\n\n```bash\n# Deployment iÃ§in Ã¶zel bir kullanÄ±cÄ± oluÅŸtur (Ã¶nerilir)\nadduser --disabled-password --gecos \"\" deploy\nusermod -aG docker deploy\n\n# Deploy kullanÄ±cÄ±sÄ±na geÃ§\nsu - deploy\n\n# SSH key oluÅŸtur (eÄŸer yoksa)\nssh-keygen -t ed25519 -C \"github-actions-deploy\" -f ~/.ssh/github_actions_deploy -N \"\"\n\n# Public key'i authorized_keys'e ekle\ncat ~/.ssh/github_actions_deploy.pub >> ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys\nchmod 700 ~/.ssh\n\n# Private key'i gÃ¶ster (bunu GitHub Secrets'a ekleyeceÄŸiz)\ncat ~/.ssh/github_actions_deploy\n```\n\n**Ã–NEMLÄ°**: Private key Ã§Ä±ktÄ±sÄ±nÄ± kopyalayÄ±n, GitHub Secrets'a ekleyeceÄŸiz.\n\n#### 5.2. Alternatif: Root KullanÄ±cÄ± ile (Daha Az GÃ¼venli)\n\nEÄŸer root kullanÄ±cÄ± ile devam edecekseniz:\n\n```bash\n# Root kullanÄ±cÄ±sÄ±nda SSH key oluÅŸtur\nssh-keygen -t ed25519 -C \"github-actions-deploy\" -f ~/.ssh/github_actions_deploy -N \"\"\n\n# Public key'i authorized_keys'e ekle\ncat ~/.ssh/github_actions_deploy.pub >> ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys\n\n# Private key'i gÃ¶ster\ncat ~/.ssh/github_actions_deploy\n```\n\n### 6. Git Repository EriÅŸimi\n\nSunucunun GitHub repository'ye eriÅŸebilmesi iÃ§in:\n\n#### SeÃ§enek 1: SSH Key ile (Ã–nerilen)\n\n```bash\n# Deploy kullanÄ±cÄ±sÄ±na geÃ§ (veya root'ta)\nsu - deploy  # veya root'ta kalÄ±n\n\n# GitHub iÃ§in SSH key oluÅŸtur\nssh-keygen -t ed25519 -C \"deploy@hetzner-server\" -f ~/.ssh/github_deploy -N \"\"\n\n# Public key'i gÃ¶ster\ncat ~/.ssh/github_deploy.pub\n```\n\nBu public key'i GitHub repository Settings â†’ Deploy keys â†’ Add deploy key bÃ¶lÃ¼mÃ¼ne ekleyin.\n\n#### SeÃ§enek 2: Personal Access Token (PAT)\n\nGitHub Personal Access Token oluÅŸturun ve GitHub Secrets'a ekleyin (workflow'da kullanÄ±lacak).\n\n### 7. Environment Variables DosyasÄ±\n\n```bash\ncd /opt/tipbox-backend\n\n# .env dosyasÄ± oluÅŸtur\nnano .env\n```\n\nAÅŸaÄŸÄ±daki iÃ§eriÄŸi ekleyin (deÄŸerleri kendi production deÄŸerlerinizle deÄŸiÅŸtirin):\n\n```env\n# Server\nNODE_ENV=production\nPORT=3000\nNODE_OPTIONS=--max-old-space-size=4096\n\n# Database\nDATABASE_URL=postgresql://tipbox_user:STRONG_PASSWORD_HERE@postgres:5432/tipbox_prod\nPOSTGRES_PASSWORD=STRONG_PASSWORD_HERE\n\n# Redis\nREDIS_URL=redis://redis:6379\nREDIS_PASSWORD=STRONG_REDIS_PASSWORD_HERE\n\n# JWT\nJWT_SECRET=your-super-secret-jwt-key-change-this-in-production-MIN-32-CHARS\n\n# MinIO Storage\nS3_ENDPOINT=http://minio:9000\nS3_BUCKET_NAME=tipbox-media\nS3_REGION=eu-central-1\nMINIO_ROOT_USER=tipbox_minio_user\nMINIO_ROOT_PASSWORD=STRONG_MINIO_PASSWORD_HERE\n\n# Email (Google Workspace OAuth 2.0)\nGOOGLE_APPLICATION_CREDENTIALS=/app/tipboxbackend-3e2c3d3c0b31.json\nEMAIL_USER_TO_IMPERSONATE=info@tipbox.co\nEMAIL_FROM_NAME=Tipbox\n\n# CORS\nCORS_ORIGINS=https://tipbox.co,https://www.tipbox.co,http://188.245.150.117\nCORS_METHODS=GET,POST,PUT,DELETE,OPTIONS\n\n# Auth0 (opsiyonel)\nAUTH0_DOMAIN=your-auth0-domain.auth0.com\nAUTH0_AUDIENCE=https://tipbox-backend\n```\n\n**GÃ¼venlik Notu**: TÃ¼m ÅŸifreleri gÃ¼Ã§lÃ¼, rastgele deÄŸerlerle deÄŸiÅŸtirin!\n\n### 8. Google Service Account JSON DosyasÄ±\n\n```bash\n# Google Service Account JSON dosyasÄ±nÄ± yÃ¼kle\ncd /opt/tipbox-backend\n\n# SCP ile dosyayÄ± yÃ¼kle (local makineden)\n# scp tipboxbackend-3e2c3d3c0b31.json root@188.245.150.117:/opt/tipbox-backend/\n\n# Veya nano ile oluÅŸturup iÃ§eriÄŸi yapÄ±ÅŸtÄ±rÄ±n\nnano tipboxbackend-3e2c3d3c0b31.json\n```\n\n### 9. Nginx YapÄ±landÄ±rmasÄ± (Opsiyonel - SSL iÃ§in)\n\nEÄŸer domain kullanacaksanÄ±z:\n\n```bash\ncd /opt/tipbox-backend\n\n# Nginx config oluÅŸtur\nnano nginx.conf\n```\n\nNginx config iÃ§eriÄŸi iÃ§in `HETZNER_DEPLOYMENT.md` dosyasÄ±na bakÄ±n.\n\n### 10. Log Dizinleri\n\n```bash\nmkdir -p /opt/tipbox-backend/logs/nginx\nchmod -R 755 /opt/tipbox-backend/logs\n```\n\n---\n\n## ğŸ’» Proje TarafÄ± YapÄ±landÄ±rma\n\n### 1. Production Dockerfile OluÅŸturma\n\nProje root dizininde `Dockerfile.prod` dosyasÄ± oluÅŸturulmalÄ± (veya mevcut Dockerfile production iÃ§in gÃ¼ncellenmeli).\n\n### 2. Production Docker Compose DosyasÄ±\n\n`docker-compose.prod.yml` dosyasÄ± oluÅŸturulmuÅŸtur. Bu dosya production ortamÄ± iÃ§in optimize edilmiÅŸtir.\n\n**Ã–zellikler:**\n- Multi-stage build ile optimize edilmiÅŸ image boyutu\n- Health check'ler tÃ¼m servisler iÃ§in\n- Production-ready konfigÃ¼rasyonlar\n- Volume'lar ile data persistence\n\n### 3. Nginx YapÄ±landÄ±rmasÄ± (Opsiyonel)\n\n`nginx.conf.example` dosyasÄ±nÄ± `nginx.conf` olarak kopyalayÄ±n ve gerekirse dÃ¼zenleyin:\n\n```bash\ncp nginx.conf.example nginx.conf\nnano nginx.conf\n```\n\n**Not**: SSL sertifikasÄ± yoksa, mevcut nginx.conf HTTP Ã¼zerinden Ã§alÄ±ÅŸacak ÅŸekilde yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r.\n\n### 4. GitHub Secrets YapÄ±landÄ±rmasÄ±\n\nGitHub repository'de Settings â†’ Secrets and variables â†’ Actions bÃ¶lÃ¼mÃ¼ne aÅŸaÄŸÄ±daki secrets eklenmelidir:\n\n#### Gerekli Secrets:\n\n1. **HETZNER_HOST**: `188.245.150.117`\n2. **HETZNER_USER**: `root` veya `deploy` (oluÅŸturduÄŸunuz kullanÄ±cÄ±)\n3. **HETZNER_SSH_KEY**: Sunucuda oluÅŸturduÄŸunuz private SSH key (tam iÃ§erik)\n   - **Ã–NEMLÄ°**: Private key'in tamamÄ±nÄ± kopyalayÄ±n (baÅŸÄ±nda `-----BEGIN OPENSSH PRIVATE KEY-----` ve sonunda `-----END OPENSSH PRIVATE KEY-----` olmalÄ±)\n   - SatÄ±r sonlarÄ± korunmalÄ±\n4. **HETZNER_SSH_PORT**: `22` (varsayÄ±lan, opsiyonel)\n5. **GITHUB_TOKEN**: GitHub Personal Access Token (repository eriÅŸimi iÃ§in, opsiyonel - eÄŸer private repo ise gerekli)\n\n#### Secret Ekleme AdÄ±mlarÄ±:\n\n1. GitHub repository'ye gidin\n2. Settings â†’ Secrets and variables â†’ Actions\n3. \"New repository secret\" butonuna tÄ±klayÄ±n\n4. Her secret iÃ§in:\n   - Name: `HETZNER_HOST`\n   - Secret: `188.245.150.117`\n   - Add secret\n\n### 5. GitHub Actions Workflow DosyasÄ±\n\n`.github/workflows/deploy-hetzner-test.yml` dosyasÄ± oluÅŸturulmuÅŸtur.\n\n**Ã–zellikler:**\n- `test` veya `staging` branch'ine push yapÄ±ldÄ±ÄŸÄ±nda otomatik deploy\n- TypeScript build kontrolÃ¼\n- Linter kontrolÃ¼ (opsiyonel, hata durumunda devam eder)\n- SSH ile gÃ¼venli baÄŸlantÄ±\n- Health check ile deployment doÄŸrulama\n- Eski Docker image'larÄ±nÄ± temizleme\n\n### 6. Deployment Script\n\n`scripts/deploy.sh` dosyasÄ± oluÅŸturulmuÅŸtur. Bu script sunucuda manuel olarak da Ã§alÄ±ÅŸtÄ±rÄ±labilir:\n\n```bash\n# Test branch iÃ§in\nbash /opt/tipbox-backend/scripts/deploy.sh test\n\n# Staging branch iÃ§in\nbash /opt/tipbox-backend/scripts/deploy.sh staging\n```\n\n---\n\n## ğŸ”„ GitHub Actions Workflow\n\n### Workflow DosyasÄ±: `.github/workflows/deploy-hetzner-test.yml`\n\nBu dosya, belirli bir branch'e (Ã¶rn: `test` veya `staging`) push yapÄ±ldÄ±ÄŸÄ±nda otomatik olarak deploy iÅŸlemini baÅŸlatÄ±r.\n\n**Ã–zellikler:**\n- Sadece `test` branch'ine push yapÄ±ldÄ±ÄŸÄ±nda Ã§alÄ±ÅŸÄ±r\n- TypeScript build kontrolÃ¼\n- SSH ile sunucuya baÄŸlanÄ±r\n- Git pull yapar\n- Docker image'Ä± build eder\n- Docker Compose ile deploy eder\n- Migration'larÄ± Ã§alÄ±ÅŸtÄ±rÄ±r\n- Health check yapar\n\n### Workflow Tetikleme\n\nWorkflow ÅŸu durumlarda tetiklenir:\n- `test` branch'ine push yapÄ±ldÄ±ÄŸÄ±nda\n- `test` branch'ine pull request merge edildiÄŸinde\n- Manuel olarak (workflow_dispatch)\n\n---\n\n## ğŸš€ Ä°lk Deployment\n\n### 1. GitHub Secrets KontrolÃ¼\n\nGitHub repository'de tÃ¼m secrets'larÄ±n eklendiÄŸinden emin olun:\n- `HETZNER_HOST`\n- `HETZNER_USER`\n- `HETZNER_SSH_KEY`\n- `HETZNER_SSH_PORT`\n\n### 2. Sunucu HazÄ±rlÄ±ÄŸÄ± KontrolÃ¼\n\n```bash\nssh root@188.245.150.117\n\n# Docker kontrolÃ¼\ndocker --version\ndocker compose version\n\n# Dizin kontrolÃ¼\nls -la /opt/tipbox-backend\n\n# .env dosyasÄ± kontrolÃ¼\ncat /opt/tipbox-backend/.env\n```\n\n### 3. Ä°lk Manuel Deployment (Test)\n\n```bash\ncd /opt/tipbox-backend\n\n# Repository'yi klonla (eÄŸer yoksa)\ngit clone <repository-url> .\n\n# Test branch'ine geÃ§\ngit checkout test\n\n# Environment dosyasÄ±nÄ± kontrol et\nls -la .env\n\n# Docker Compose ile build ve deploy\ndocker compose -f docker-compose.prod.yml build\ndocker compose -f docker-compose.prod.yml up -d\n\n# Migration'larÄ± Ã§alÄ±ÅŸtÄ±r\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n\n# LoglarÄ± kontrol et\ndocker compose -f docker-compose.prod.yml logs -f backend\n```\n\n### 4. Health Check\n\n```bash\n# Backend health check\ncurl http://localhost:3000/health\n\n# Veya sunucu IP'si Ã¼zerinden\ncurl http://188.245.150.117:3000/health\n```\n\n### 5. GitHub Actions ile Ä°lk Otomatik Deploy\n\n```bash\n# Local'de test branch'ine geÃ§\ngit checkout test\n\n# KÃ¼Ã§Ã¼k bir deÄŸiÅŸiklik yap (Ã¶rn: README'ye not ekle)\necho \"# Test deployment\" >> README.md\n\n# Commit ve push\ngit add .\ngit commit -m \"test: trigger first automated deployment\"\ngit push origin test\n```\n\nGitHub Actions sekmesinde workflow'un Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± gÃ¶rebilirsiniz.\n\n---\n\n## ğŸ” Otomatik Deployment\n\n### Deployment AkÄ±ÅŸÄ±\n\n1. **Developer** `test` branch'ine push yapar\n2. **GitHub Actions** workflow tetiklenir\n3. **Build** aÅŸamasÄ±: TypeScript compile, test (opsiyonel)\n4. **Deploy** aÅŸamasÄ±:\n   - SSH ile sunucuya baÄŸlanÄ±r\n   - Git pull yapar\n   - Docker image build eder\n   - Docker Compose ile container'larÄ± gÃ¼nceller\n   - Migration'larÄ± Ã§alÄ±ÅŸtÄ±rÄ±r\n   - Health check yapar\n5. **Notification** (opsiyonel): Slack/Discord/Email bildirimi\n\n### Branch Stratejisi\n\n```\nmain/master     â†’ Production (manuel deploy)\n    â†“\ntest/staging   â†’ Test Server (otomatik deploy) â† ÅU AN BURADAYIZ\n    â†“\ndevelop        â†’ Development (local)\n```\n\n### Deployment KomutlarÄ± (Sunucuda)\n\nWorkflow ÅŸu komutlarÄ± Ã§alÄ±ÅŸtÄ±rÄ±r:\n\n```bash\ncd /opt/tipbox-backend\ngit pull origin test\ndocker compose -f docker-compose.prod.yml build backend\ndocker compose -f docker-compose.prod.yml up -d\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n```\n\n---\n\n## ğŸ”§ Maintenance ve GÃ¼ncelleme\n\n### Manuel Deployment (Acil Durumlar)\n\n```bash\nssh root@188.245.150.117\ncd /opt/tipbox-backend\ngit pull origin test\ndocker compose -f docker-compose.prod.yml build backend\ndocker compose -f docker-compose.prod.yml up -d backend\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n```\n\n### Log KontrolÃ¼\n\n```bash\n# Backend loglarÄ±\ndocker compose -f docker-compose.prod.yml logs -f backend\n\n# TÃ¼m servisler\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Son 100 satÄ±r\ndocker compose -f docker-compose.prod.yml logs --tail=100 backend\n```\n\n### Container Durumu\n\n```bash\n# Ã‡alÄ±ÅŸan container'lar\ndocker compose -f docker-compose.prod.yml ps\n\n# Container resource kullanÄ±mÄ±\ndocker stats\n```\n\n### Database Migration\n\n```bash\n# Migration durumu\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate status\n\n# Yeni migration uygula\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n```\n\n### Rollback (Geri Alma)\n\n```bash\n# Ã–nceki commit'e dÃ¶n\ncd /opt/tipbox-backend\ngit checkout <previous-commit-hash>\ndocker compose -f docker-compose.prod.yml build backend\ndocker compose -f docker-compose.prod.yml up -d backend\n```\n\n---\n\n## ğŸ› Troubleshooting\n\n### 1. SSH BaÄŸlantÄ± HatasÄ±\n\n**Hata**: `Permission denied (publickey)`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# GitHub Secrets'da SSH key'in doÄŸru olduÄŸundan emin olun\n# Sunucuda authorized_keys kontrolÃ¼\ncat ~/.ssh/authorized_keys\n\n# SSH key formatÄ±nÄ± kontrol edin (baÅŸÄ±nda/tÄ±rnaÄŸÄ±nda boÅŸluk olmamalÄ±)\n```\n\n### 2. Docker Build HatasÄ±\n\n**Hata**: `Cannot connect to Docker daemon`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# Docker servisini kontrol et\nsystemctl status docker\nsystemctl start docker\n\n# KullanÄ±cÄ±nÄ±n docker grubunda olduÄŸundan emin ol\nusermod -aG docker $USER\n```\n\n### 3. Git Pull HatasÄ±\n\n**Hata**: `Permission denied` veya `Repository not found`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# SSH key'in GitHub'a eklendiÄŸinden emin olun\n# Veya Personal Access Token kullanÄ±n\ngit config --global credential.helper store\n```\n\n### 4. Migration HatasÄ±\n\n**Hata**: `Migration failed`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# Migration durumunu kontrol et\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate status\n\n# Database baÄŸlantÄ±sÄ±nÄ± kontrol et\ndocker compose -f docker-compose.prod.yml exec backend npx prisma db pull\n```\n\n### 5. Container BaÅŸlamÄ±yor\n\n**Hata**: `Container exited with code 1`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# LoglarÄ± kontrol et\ndocker compose -f docker-compose.prod.yml logs backend\n\n# Environment variables kontrolÃ¼\ndocker compose -f docker-compose.prod.yml exec backend env | grep DATABASE_URL\n\n# Container'Ä± yeniden baÅŸlat\ndocker compose -f docker-compose.prod.yml restart backend\n```\n\n### 6. Port Ã‡akÄ±ÅŸmasÄ±\n\n**Hata**: `Port already in use`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# Port kullanÄ±mÄ±nÄ± kontrol et\nnetstat -tulpn | grep :3000\n\n# Eski container'Ä± durdur\ndocker compose -f docker-compose.prod.yml down\ndocker compose -f docker-compose.prod.yml up -d\n```\n\n### 7. Disk Doluluk\n\n**Hata**: `No space left on device`\n\n**Ã‡Ã¶zÃ¼m**:\n```bash\n# Disk kullanÄ±mÄ±nÄ± kontrol et\ndf -h\n\n# Eski Docker image'larÄ± temizle\ndocker system prune -a --volumes\n\n# Log dosyalarÄ±nÄ± temizle\nfind /opt/tipbox-backend/logs -type f -mtime +7 -delete\n```\n\n---\n\n## ğŸ“Š Monitoring ve Alerting\n\n### Health Check Endpoint\n\n```bash\n# Backend health check\ncurl http://188.245.150.117:3000/health\n\n# Beklenen response\n{\"status\":\"ok\",\"timestamp\":\"2025-01-XX...\"}\n```\n\n### Log Monitoring\n\n```bash\n# Real-time log takibi\ndocker compose -f docker-compose.prod.yml logs -f backend\n\n# Hata loglarÄ±nÄ± filtrele\ndocker compose -f docker-compose.prod.yml logs backend | grep -i error\n```\n\n### Resource Monitoring\n\n```bash\n# Container resource kullanÄ±mÄ±\ndocker stats\n\n# Sistem kaynaklarÄ±\nhtop\n```\n\n---\n\n## ğŸ”’ GÃ¼venlik Best Practices\n\n1. **SSH Key GÃ¼venliÄŸi**\n   - Private key'leri asla commit etmeyin\n   - GitHub Secrets kullanÄ±n\n   - DÃ¼zenli olarak key'leri rotate edin\n\n2. **Environment Variables**\n   - `.env` dosyasÄ±nÄ± asla commit etmeyin\n   - GÃ¼Ã§lÃ¼ ÅŸifreler kullanÄ±n\n   - Production ÅŸifrelerini dÃ¼zenli deÄŸiÅŸtirin\n\n3. **Firewall**\n   - Sadece gerekli portlarÄ± aÃ§Ä±n\n   - SSH iÃ§in fail2ban kurun (opsiyonel)\n\n4. **Docker Security**\n   - Non-root user kullanÄ±n (mÃ¼mkÃ¼nse)\n   - Image'larÄ± dÃ¼zenli gÃ¼ncelleyin\n   - Security scan yapÄ±n\n\n5. **Backup**\n   - DÃ¼zenli database backup alÄ±n\n   - MinIO data backup'Ä± yapÄ±n\n   - Backup'larÄ± test edin\n\n---\n\n## âœ… Deployment Checklist\n\n### Ä°lk Kurulum\n- [ ] Sunucu hazÄ±rlandÄ± (Docker, Docker Compose)\n- [ ] Firewall yapÄ±landÄ±rÄ±ldÄ±\n- [ ] SSH key oluÅŸturuldu ve GitHub Secrets'a eklendi\n- [ ] `.env` dosyasÄ± oluÅŸturuldu (production deÄŸerleriyle)\n- [ ] Google Service Account JSON yÃ¼klendi\n- [ ] Nginx yapÄ±landÄ±rÄ±ldÄ± (opsiyonel)\n- [ ] Log dizinleri oluÅŸturuldu\n\n### Proje YapÄ±landÄ±rmasÄ±\n- [x] Production Dockerfile oluÅŸturuldu (`Dockerfile.prod`)\n- [x] `docker-compose.prod.yml` oluÅŸturuldu\n- [x] GitHub Actions workflow dosyasÄ± oluÅŸturuldu (`.github/workflows/deploy-hetzner-test.yml`)\n- [x] Deployment script oluÅŸturuldu (`scripts/deploy.sh`)\n- [x] Nginx config Ã¶rneÄŸi oluÅŸturuldu (`nginx.conf.example`)\n- [ ] GitHub Secrets eklendi (aÅŸaÄŸÄ±daki adÄ±mlarÄ± takip edin)\n\n### Ä°lk Deployment\n- [ ] Repository sunucuya klonlandÄ±\n- [ ] Ä°lk manuel deployment baÅŸarÄ±lÄ±\n- [ ] Health check baÅŸarÄ±lÄ±\n- [ ] Migration'lar uygulandÄ±\n- [ ] GitHub Actions workflow test edildi\n\n### SÃ¼rekli Ä°yileÅŸtirme\n- [ ] Monitoring kuruldu\n- [ ] Backup stratejisi uygulandÄ±\n- [ ] Alerting yapÄ±landÄ±rÄ±ldÄ± (opsiyonel)\n- [ ] DokÃ¼mantasyon gÃ¼ncellendi\n\n---\n\n## ğŸ“ Notlar\n\n- **Test Branch**: Åu an iÃ§in `test` branch'i kullanÄ±lÄ±yor, isterseniz `staging` veya baÅŸka bir branch kullanabilirsiniz\n- **Zero-Downtime**: Ä°leride blue-green deployment veya rolling update eklenebilir\n- **CI/CD Pipeline**: Test aÅŸamasÄ± ÅŸu an yok, ileride eklenebilir\n- **Multi-Environment**: Production iÃ§in ayrÄ± bir workflow oluÅŸturulabilir\n\n---\n\n**Son GÃ¼ncelleme**: 2025-01-XX\n**Sunucu IP**: 188.245.150.117\n**Deployment Branch**: `test`\n\n",
      "category": "deployment"
    },
    {
      "id": "branch-strategy",
      "fileName": "BRANCH_STRATEGY",
      "path": "BRANCH_STRATEGY.md",
      "title": "Branch Stratejisi ve Workflow",
      "content": "# Branch Stratejisi ve Workflow\n\nBu dokÃ¼man, Tipbox Backend projesinin branch stratejisi ve deployment workflow'unu aÃ§Ä±klar.\n\n## ğŸ“‹ Ä°Ã§indekiler\n\n1. [Branch YapÄ±sÄ±](#branch-yapÄ±sÄ±)\n2. [Workflow AkÄ±ÅŸÄ±](#workflow-akÄ±ÅŸÄ±)\n3. [Deployment Stratejisi](#deployment-stratejisi)\n4. [CI/CD Pipeline](#cicd-pipeline)\n5. [Best Practices](#best-practices)\n\n---\n\n## Branch YapÄ±sÄ±\n\n### Developer Branch\n\n- **Ä°sim:** `developer`\n- **AmaÃ§:** Aktif geliÅŸtirme\n- **Deploy:** Otomatik yok, manuel lokal\n- **Docker Compose:** `docker-compose.yml`\n- **Database:** `tipbox_dev`\n- **Environment:** `.env` (NODE_ENV=development)\n- **Ã–zellikler:**\n  - Hot reload (nodemon)\n  - Debug modu aktif\n  - Verbose logging\n  - TÃ¼m portlar expose\n  - Prisma Studio ve PgAdmin eriÅŸimi\n  - Test data seed edilebilir\n\n### Test Branch\n\n- **Ä°sim:** `test`\n- **AmaÃ§:** Staging/QA ortamÄ± (Hetzner test server)\n- **Deploy:** Otomatik (GitHub Actions â†’ Hetzner test server)\n- **Docker Compose:** `docker-compose.test.yml`\n- **Database:** `tipbox_test`\n- **Environment:** `.env.test` (NODE_ENV=test)\n- **Ã–zellikler:**\n  - Production-like build ama daha esnek\n  - Info level logging, 30 gÃ¼n retention\n  - Health check'ler aktif\n  - SÄ±nÄ±rlÄ± port exposure\n  - Test data seed edilebilir\n  - Monitoring (opsiyonel)\n\n### Main Branch\n\n- **Ä°sim:** `main`\n- **AmaÃ§:** Production (Hetzner production server)\n- **Deploy:** Manuel onay ile (GitHub Actions â†’ Hetzner production server)\n- **Docker Compose:** `docker-compose.production.yml`\n- **Database:** `tipbox_prod`\n- **Environment:** `.env.production` (NODE_ENV=production)\n- **Ã–zellikler:**\n  - Maximum security\n  - Optimized build\n  - Warn level console, Info level file logging, 90 gÃ¼n retention\n  - Health check'ler zorunlu\n  - SSL/TLS zorunlu\n  - Minimum port exposure\n  - Seed YOK\n  - Backup otomatik\n\n---\n\n## Workflow AkÄ±ÅŸÄ±\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Developer  â”‚ â† Aktif geliÅŸtirme\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â”‚ Feature tamamlandÄ±\n       â”‚ Test edildi\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    Test     â”‚ â† Otomatik deploy\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â”‚\n       â”‚ QA testleri geÃ§ti\n       â”‚ Production'a hazÄ±r\n       â”‚\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    Main      â”‚ â† Manuel onay ile deploy\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### GeliÅŸtirme SÃ¼reci\n\n1. **Feature Development:**\n   ```bash\n   git checkout developer\n   git pull origin developer\n   # Feature geliÅŸtir\n   git add .\n   git commit -m \"feat: add new feature\"\n   git push origin developer\n   ```\n\n2. **Test'e Merge:**\n   ```bash\n   git checkout test\n   git pull origin test\n   git merge developer\n   git push origin test\n   # Otomatik deploy tetiklenir\n   ```\n\n3. **Production'a Merge:**\n   ```bash\n   git checkout main\n   git pull origin main\n   git merge test\n   git push origin main\n   # GitHub Actions'da manuel onay gerekir\n   ```\n\n---\n\n## Deployment Stratejisi\n\n### Developer OrtamÄ±\n\n**Deploy:** Manuel lokal\n\n```bash\nnpm run docker:up\nnpm run dev\n```\n\n### Test OrtamÄ±\n\n**Deploy:** Otomatik (GitHub Actions)\n\n**Trigger:**\n- `test` branch'ine push yapÄ±ldÄ±ÄŸÄ±nda\n- Workflow dispatch ile manuel tetikleme\n\n**Workflow:** `.github/workflows/deploy-hetzner-test.yml`\n\n**AdÄ±mlar:**\n1. Code checkout\n2. Lint check\n3. Build\n4. SSH ile sunucuya baÄŸlan\n5. Git pull\n6. Docker build\n7. Docker Compose up\n8. Migration deploy\n9. Health check\n\n### Production OrtamÄ±\n\n**Deploy:** Manuel onay ile (GitHub Actions)\n\n**Trigger:**\n- Workflow dispatch ile manuel tetikleme\n- \"DEPLOY\" yazarak onay gerekir\n\n**Workflow:** `.github/workflows/deploy-production.yml`\n\n**AdÄ±mlar:**\n1. Deployment onayÄ± (DEPLOY yazÄ±lmalÄ±)\n2. Code checkout (main branch)\n3. Lint check\n4. Test run\n5. Build\n6. Database backup (zorunlu)\n7. SSH ile sunucuya baÄŸlan\n8. Git pull\n9. Docker build\n10. Docker Compose up\n11. Migration deploy\n12. Health check\n13. Old image cleanup\n\n---\n\n## CI/CD Pipeline\n\n### CI Pipeline (Continuous Integration)\n\n**Workflow:** `.github/workflows/ci.yml`\n\n**Trigger:**\n- Pull request aÃ§Ä±ldÄ±ÄŸÄ±nda\n- `developer`, `test`, `main` branch'lerine push yapÄ±ldÄ±ÄŸÄ±nda\n\n**Jobs:**\n1. **Lint:** ESLint kontrolÃ¼\n2. **Test:** Jest testleri\n3. **Build:** TypeScript compile\n\n### CD Pipeline (Continuous Deployment)\n\n#### Test Environment\n\n**Workflow:** `.github/workflows/deploy-hetzner-test.yml`\n\n**Trigger:**\n- `test` branch'ine push\n- Workflow dispatch\n\n**Deploy:** Otomatik\n\n#### Production Environment\n\n**Workflow:** `.github/workflows/deploy-production.yml`\n\n**Trigger:**\n- Workflow dispatch (manuel)\n\n**Deploy:** Manuel onay gerekir\n\n---\n\n## Best Practices\n\n### Branch Management\n\n1. **Developer Branch:**\n   - Her zaman gÃ¼ncel tutun\n   - Feature branch'leri developer'dan aÃ§Ä±n\n   - Merge'den Ã¶nce test edin\n\n2. **Test Branch:**\n   - Sadece test edilmiÅŸ kodlarÄ± merge edin\n   - Production'a geÃ§meden Ã¶nce test ortamÄ±nda doÄŸrulayÄ±n\n   - Hotfix'ler iÃ§in test branch'ini kullanabilirsiniz\n\n3. **Main Branch:**\n   - Sadece test edilmiÅŸ ve onaylanmÄ±ÅŸ kodlarÄ± merge edin\n   - Production'a merge etmeden Ã¶nce code review yapÄ±n\n   - Hotfix'ler iÃ§in dikkatli olun\n\n### Commit Messages\n\n[Conventional Commits](https://www.conventionalcommits.org/) formatÄ±nÄ± kullanÄ±n:\n\n```\nfeat: add new feature\nfix: fix bug\ndocs: update documentation\nrefactor: refactor code\ntest: add tests\nchore: update dependencies\n```\n\n### Pull Request Process\n\n1. **Feature Development:**\n   - Developer branch'te feature geliÅŸtir\n   - Test et\n   - Commit ve push\n\n2. **Test Merge:**\n   - Developer'dan test'e merge\n   - Otomatik deploy\n   - QA testleri\n\n3. **Production Merge:**\n   - Test'ten main'e merge\n   - Manuel onay\n   - Production deploy\n\n### Deployment Checklist\n\n#### Test Deployment\n\n- [ ] Developer branch'te test edildi\n- [ ] Lint hatalarÄ± yok\n- [ ] Build baÅŸarÄ±lÄ±\n- [ ] Test branch'e merge edildi\n- [ ] Otomatik deploy baÅŸarÄ±lÄ±\n- [ ] Health check geÃ§ti\n- [ ] QA testleri yapÄ±ldÄ±\n\n#### Production Deployment\n\n- [ ] Test ortamÄ±nda doÄŸrulandÄ±\n- [ ] Database backup alÄ±ndÄ±\n- [ ] Migration'lar test edildi\n- [ ] Main branch'e merge edildi\n- [ ] Manuel onay verildi\n- [ ] Production deploy baÅŸarÄ±lÄ±\n- [ ] Health check geÃ§ti\n- [ ] Production testleri yapÄ±ldÄ±\n- [ ] Rollback planÄ± hazÄ±r\n\n### Rollback Stratejisi\n\n#### Test OrtamÄ±\n\n```bash\n# Ã–nceki commit'e geri dÃ¶n\ngit checkout test\ngit reset --hard <previous-commit>\ngit push origin test --force\n# Otomatik deploy tetiklenir\n```\n\n#### Production OrtamÄ±\n\n```bash\n# Database backup'tan restore\ndocker compose -f docker-compose.production.yml exec -T postgres psql -U tipbox_user tipbox_prod < backup-file.sql\n\n# Ã–nceki image'a geri dÃ¶n\ndocker compose -f docker-compose.production.yml down\ndocker compose -f docker-compose.production.yml up -d\n```\n\n---\n\n## GitHub Secrets\n\n### Test Environment\n\n- `HETZNER_SSH_KEY`: SSH private key\n- `HETZNER_HOST`: Test server IP/hostname\n- `HETZNER_USER`: SSH user (genelde root)\n- `HETZNER_SSH_PORT`: SSH port (default: 22)\n\n### Production Environment\n\n- `HETZNER_PRODUCTION_SSH_KEY`: SSH private key\n- `HETZNER_PRODUCTION_HOST`: Production server IP/hostname\n- `HETZNER_PRODUCTION_USER`: SSH user\n- `HETZNER_PRODUCTION_SSH_PORT`: SSH port\n\n---\n\n## Troubleshooting\n\n### Deployment Failed\n\n1. **LoglarÄ± kontrol edin:**\n   ```bash\n   docker compose -f docker-compose.test.yml logs backend\n   ```\n\n2. **Health check'i kontrol edin:**\n   ```bash\n   curl http://localhost:3000/health\n   ```\n\n3. **Container durumunu kontrol edin:**\n   ```bash\n   docker compose -f docker-compose.test.yml ps\n   ```\n\n### Migration Failed\n\n1. **Migration durumunu kontrol edin:**\n   ```bash\n   docker compose exec backend npx prisma migrate status\n   ```\n\n2. **Manuel migration:**\n   ```bash\n   docker compose exec backend npx prisma migrate deploy\n   ```\n\n### Health Check Failed\n\n1. **Backend loglarÄ±nÄ± kontrol edin:**\n   ```bash\n   docker compose logs backend\n   ```\n\n2. **Database baÄŸlantÄ±sÄ±nÄ± kontrol edin:**\n   ```bash\n   docker compose exec backend npx prisma db pull\n   ```\n\n---\n\n## Ä°lgili DokÃ¼mantasyon\n\n- [Environment Setup](./ENVIRONMENT_SETUP.md)\n- [Hetzner Deployment](./HETZNER_DEPLOYMENT.md)\n- [Automated Deployment](./AUTOMATED_DEPLOYMENT.md)\n\n",
      "category": "development"
    },
    {
      "id": "changelog-2025-01-xx",
      "fileName": "CHANGELOG_2025_01_XX",
      "path": "CHANGELOG_2025_01_XX.md",
      "title": "BugÃ¼n YapÄ±lan DeÄŸiÅŸiklikler - Changelog",
      "content": "# BugÃ¼n YapÄ±lan DeÄŸiÅŸiklikler - Changelog\n\n**Tarih:** 2025-01-XX  \n**AmaÃ§:** DMMessage modelinde messageType enum deÄŸerlerini gÃ¼ncelleme ve support request endpoint'lerinde status field'Ä±nÄ±n response'a eklenmesi\n\n---\n\n## ğŸ“‹ Ã–zet\n\nBugÃ¼n yapÄ±lan deÄŸiÅŸiklikler, mesajlaÅŸma sistemindeki `messageType` alanÄ±nÄ±n enum deÄŸerlerini gÃ¼ncellemek ve support request endpoint'lerinin response'larÄ±na `status` field'Ä±nÄ± eklemek Ã¼zerine odaklanmÄ±ÅŸtÄ±r.\n\n---\n\n## ğŸ”§ YapÄ±lan DeÄŸiÅŸiklikler\n\n### 1. **Prisma Schema (VeritabanÄ± KatmanÄ±)**\n\n**Dosya:** `prisma/schema.prisma`\n\n**DeÄŸiÅŸiklikler:**\n- `DMMessageType` enum deÄŸerleri gÃ¼ncellendi:\n  - `TEXT` â†’ `MESSAGE` olarak deÄŸiÅŸtirildi\n  - `SUPPORT_REQUEST` â†’ aynÄ± kaldÄ±\n  - `TIPS` â†’ aynÄ± kaldÄ± (ancak kod iÃ§inde `SEND_TIPS` olarak kullanÄ±lÄ±yor)\n\n**SatÄ±rlar:** 1220-1224\n\n```prisma\nenum DMMessageType {\n    MESSAGE\n  SUPPORT_REQUEST\n  TIPS\n}\n```\n\n**AmaÃ§:** \n- VeritabanÄ± ÅŸemasÄ±nda mesaj tiplerini daha aÃ§Ä±klayÄ±cÄ± hale getirmek\n- Enum deÄŸerlerini domain katmanÄ±ndaki kullanÄ±mla uyumlu hale getirmek\n\n**Not:** Schema'da `TIPS` olarak kaldÄ± ancak kod iÃ§inde `SEND_TIPS` olarak kullanÄ±lÄ±yor. Bu bir tutarsÄ±zlÄ±k olabilir.\n\n---\n\n### 2. **Application Layer - Messaging Service**\n\n**Dosya:** `src/application/messaging/messaging.service.ts`\n\n**DeÄŸiÅŸiklikler:**\n\n#### a) `mapEventTypeToDbMessageType` Metodu Eklendi/GÃ¼ncellendi\n\n**SatÄ±rlar:** 118-127\n\n```typescript\nprivate mapEventTypeToDbMessageType(eventType: MessageEventType): 'MESSAGE' | 'SUPPORT_REQUEST' | 'TIPS' {\n  switch (eventType) {\n    case 'support-request':\n      return 'SUPPORT_REQUEST';\n    case 'send-tips':\n      return 'TIPS';\n    default:\n      return 'MESSAGE';\n  }\n}\n```\n\n**AmaÃ§:**\n- Socket event tiplerini (`MessageEventType`) Prisma enum deÄŸerlerine (`DMMessageType`) dÃ¶nÃ¼ÅŸtÃ¼rmek\n- `sendDirectMessage` metodunda kullanÄ±lmak Ã¼zere mapping saÄŸlamak\n\n**KullanÄ±m Yeri:**\n- `sendDirectMessage` metodunda (satÄ±r 74) mesaj oluÅŸturulurken `messageType` field'Ä±na deÄŸer atanÄ±rken kullanÄ±lÄ±yor\n\n---\n\n### 3. **Infrastructure Layer - Repository**\n\n**Dosya:** `src/infrastructure/repositories/dm-message-prisma.repository.ts`\n\n**DeÄŸiÅŸiklikler:**\n\n#### a) `create` Metodunda MessageType Mapping\n\n**SatÄ±rlar:** 54-59\n\n```typescript\nconst messageTypeValue =\n  data.messageType === 'support-request'\n    ? DMMessageType.SUPPORT_REQUEST\n    : data.messageType === 'send-tips'\n    ? DMMessageType.TIPS\n    : DMMessageType.TEXT;  // âš ï¸ NOT: Schema'da MESSAGE olarak deÄŸiÅŸtirildi ama burada hala TEXT kullanÄ±lÄ±yor\n```\n\n**AmaÃ§:**\n- Domain entity'den gelen string deÄŸerleri Prisma enum deÄŸerlerine dÃ¶nÃ¼ÅŸtÃ¼rmek\n- VeritabanÄ±na kayÄ±t yaparken doÄŸru enum deÄŸerini kullanmak\n\n**Not:** Burada `DMMessageType.TEXT` kullanÄ±lÄ±yor ancak schema'da `MESSAGE` olarak deÄŸiÅŸtirildi. Bu bir tutarsÄ±zlÄ±k olabilir ve dÃ¼zeltilmesi gerekebilir.\n\n#### b) `toDomain` Metodunda MessageType Mapping\n\n**SatÄ±rlar:** 213-229\n\n```typescript\nprivate toDomain(prismaMessage: any): DMMessage {\n  return new DMMessage(\n    prismaMessage.id,\n    prismaMessage.threadId,\n    prismaMessage.senderId,\n    prismaMessage.message,\n    prismaMessage.messageType === DMMessageType.SUPPORT_REQUEST\n      ? 'support-request'\n      : prismaMessage.messageType === DMMessageType.TIPS\n      ? 'send-tips'\n      : 'message',\n    prismaMessage.sentAt,\n    prismaMessage.isRead,\n    prismaMessage.createdAt,\n    prismaMessage.updatedAt\n  );\n}\n```\n\n**AmaÃ§:**\n- Prisma'dan gelen enum deÄŸerlerini domain entity'nin beklediÄŸi string formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼rmek\n- Domain katmanÄ± ile veritabanÄ± katmanÄ± arasÄ±nda veri dÃ¶nÃ¼ÅŸÃ¼mÃ¼ saÄŸlamak\n\n---\n\n### 4. **Application Layer - Support Request Service**\n\n**Dosya:** `src/application/messaging/support-request.service.ts`\n\n**DeÄŸiÅŸiklikler:**\n\n#### a) `getUserSupportRequests` Metodunda Status Field Eklendi\n\n**SatÄ±rlar:** 92-99\n\n```typescript\nsupportRequests.push({\n  id: request.id,\n  userName,\n  userTitle,\n  userAvatar,\n  requestDescription: request.description,\n  status: supportStatus,  // âœ… Bu field bugÃ¼n eklendi\n});\n```\n\n**AmaÃ§:**\n- Support request listesi response'larÄ±na `status` field'Ä±nÄ± eklemek\n- Frontend'in support request'lerin durumunu (active, pending, completed) gÃ¶rebilmesini saÄŸlamak\n\n#### b) Status Mapping MantÄ±ÄŸÄ± GÃ¼ncellendi\n\n**SatÄ±rlar:** 67-76\n\n**Ã–nceki Durum:**\n- Status mapping'i eksikti veya yanlÄ±ÅŸtÄ±\n\n**Yeni Durum:**\n```typescript\n// Determine support request status\nlet supportStatus: SupportRequestStatus;\n\nif (request.status === DMRequestStatus.PENDING) {\n  supportStatus = SupportRequestStatus.PENDING;\n} else if (request.status === DMRequestStatus.ACCEPTED) {\n  supportStatus = SupportRequestStatus.ACCEPTED;\n} else {\n  supportStatus = SupportRequestStatus.REJECTED;\n}\n```\n\n**AmaÃ§:**\n- `DMRequestStatus` (veritabanÄ± seviyesi) ile `SupportRequestStatus` (domain seviyesi) arasÄ±nda doÄŸru mapping saÄŸlamak\n- Support request'lerin durumunu doÄŸru ÅŸekilde belirlemek\n\n**Not:** Test dosyasÄ±nda `ACTIVE`, `PENDING`, `COMPLETED` status'leri bekleniyor ancak kodda `ACCEPTED` ve `REJECTED` kullanÄ±lÄ±yor. Bu bir tutarsÄ±zlÄ±k olabilir.\n\n---\n\n### 5. **Test DosyasÄ±**\n\n**Dosya:** `tests/e2e/inbox.test.ts`\n\n**DeÄŸiÅŸiklikler:**\n\n#### a) Support Request Response Structure Testi GÃ¼ncellendi\n\n**SatÄ±rlar:** 114-134\n\n```typescript\nit('should return support requests with correct structure', async () => {\n  // ...\n  expect(supportRequest).toHaveProperty('status');  // âœ… Bu assertion bugÃ¼n eklendi\n  expect(typeof supportRequest.status).toBe('string');\n  expect(['active', 'pending', 'completed']).toContain(supportRequest.status);\n});\n```\n\n**AmaÃ§:**\n- Support request response'larÄ±nda `status` field'Ä±nÄ±n varlÄ±ÄŸÄ±nÄ± doÄŸrulamak\n- Status deÄŸerlerinin beklenen deÄŸerler arasÄ±nda olduÄŸunu kontrol etmek\n\n#### b) Status Filter Testleri\n\n**SatÄ±rlar:** 136-179\n\n- `should filter by status=active` testi\n- `should filter by status=pending` testi  \n- `should filter by status=completed` testi\n\n**AmaÃ§:**\n- Support request endpoint'inin status parametresine gÃ¶re filtreleme yapabildiÄŸini doÄŸrulamak\n\n---\n\n## ğŸ—ï¸ Mimari Katmanlar\n\n### DeÄŸiÅŸikliklerin DaÄŸÄ±lÄ±mÄ±:\n\n1. **Domain Layer** (DeÄŸiÅŸiklik yok)\n   - Domain entity'ler aynÄ± kaldÄ±\n\n2. **Application Layer** (2 dosya)\n   - `messaging.service.ts`: MessageType mapping metodu eklendi\n   - `support-request.service.ts`: Status field response'a eklendi\n\n3. **Infrastructure Layer** (1 dosya)\n   - `dm-message-prisma.repository.ts`: MessageType mapping gÃ¼ncellendi\n\n4. **Database Layer** (1 dosya)\n   - `schema.prisma`: DMMessageType enum gÃ¼ncellendi\n\n5. **Test Layer** (1 dosya)\n   - `inbox.test.ts`: Status field testleri eklendi\n\n---\n\n## âš ï¸ Bilinen Sorunlar ve Notlar\n\n### 1. Enum TutarsÄ±zlÄ±ÄŸÄ±\n- **Schema'da:** `DMMessageType` enum'unda `MESSAGE`, `SUPPORT_REQUEST`, `TIPS` var\n- **Repository'de:** `DMMessageType.TEXT` kullanÄ±lÄ±yor (satÄ±r 59) - Bu hata olabilir\n- **Ã‡Ã¶zÃ¼m:** Repository'deki `DMMessageType.TEXT` â†’ `DMMessageType.MESSAGE` olarak deÄŸiÅŸtirilmeli\n\n### 2. Status Enum TutarsÄ±zlÄ±ÄŸÄ±\n- **Test'te beklenen:** `active`, `pending`, `completed`\n- **Kodda kullanÄ±lan:** `ACCEPTED`, `PENDING`, `REJECTED`\n- **Ã‡Ã¶zÃ¼m:** Status mapping mantÄ±ÄŸÄ±nÄ±n test beklentileriyle uyumlu hale getirilmesi gerekiyor\n\n### 3. TIPS vs SEND_TIPS\n- **Schema'da:** `TIPS`\n- **Domain'de:** `send-tips` (string)\n- **Mapping'de:** `TIPS` enum deÄŸeri kullanÄ±lÄ±yor\n- **Not:** Bu tutarlÄ± gÃ¶rÃ¼nÃ¼yor ancak isimlendirme farklÄ±lÄ±ÄŸÄ± var\n\n---\n\n## ğŸ”„ VeritabanÄ± Migrasyonu\n\n**Komut:** `npx prisma db push`\n\n**YapÄ±lan Ä°ÅŸlemler:**\n- `DMMessageType` enum'undaki `TEXT` deÄŸeri `MESSAGE` olarak deÄŸiÅŸtirildi\n- Mevcut verilerde `TEXT` deÄŸerine sahip kayÄ±tlar `MESSAGE` olarak gÃ¼ncellenmeli (otomatik olmayabilir)\n\n**Not:** Production'da migration yapÄ±lÄ±rken mevcut `TEXT` deÄŸerlerine sahip kayÄ±tlarÄ±n manuel olarak `MESSAGE`'a gÃ¼ncellenmesi gerekebilir.\n\n---\n\n## ğŸ“ Test SonuÃ§larÄ±\n\n**Test Komutu:** `npm run test:inbox`\n\n**Son Durum:**\n- âœ… GET /messages endpoint testleri: **BAÅARILI** (5/5 test geÃ§ti)\n- âš ï¸ GET /messages/support-requests endpoint testleri: **KISMI BAÅARILI** (3 test baÅŸarÄ±sÄ±z)\n  - Status field'Ä± response'da eksik gÃ¶rÃ¼nÃ¼yor\n  - Status mapping'i dÃ¼zeltilmesi gerekiyor\n\n---\n\n## ğŸ¯ Sonraki AdÄ±mlar\n\n1. **Repository'deki `DMMessageType.TEXT` â†’ `DMMessageType.MESSAGE` dÃ¼zeltmesi**\n2. **Support Request Service'deki status mapping'inin test beklentileriyle uyumlu hale getirilmesi**\n3. **TÃ¼m testlerin geÃ§mesinin saÄŸlanmasÄ±**\n4. **Production migration planÄ±nÄ±n hazÄ±rlanmasÄ±** (mevcut TEXT deÄŸerlerinin MESSAGE'a gÃ¼ncellenmesi)\n\n---\n\n## ğŸ“š Ä°lgili Dosyalar\n\n- `prisma/schema.prisma` - VeritabanÄ± ÅŸemasÄ±\n- `src/application/messaging/messaging.service.ts` - MesajlaÅŸma servisi\n- `src/application/messaging/support-request.service.ts` - Support request servisi\n- `src/infrastructure/repositories/dm-message-prisma.repository.ts` - Mesaj repository\n- `tests/e2e/inbox.test.ts` - E2E testleri\n\n---\n\n**Not:** Bu dokÃ¼mantasyon, bugÃ¼n yapÄ±lan deÄŸiÅŸikliklerin kayÄ±t altÄ±na alÄ±nmasÄ± iÃ§in oluÅŸturulmuÅŸtur. Git restore iÅŸlemi yapÄ±ldÄ±ÄŸÄ±nda bu bilgiler referans olarak kullanÄ±labilir.\n\n\n",
      "category": "changelog"
    },
    {
      "id": "deployment-quick-start",
      "fileName": "DEPLOYMENT_QUICK_START",
      "path": "DEPLOYMENT_QUICK_START.md",
      "title": "Deployment HÄ±zlÄ± BaÅŸlangÄ±Ã§ Rehberi",
      "content": "# Deployment HÄ±zlÄ± BaÅŸlangÄ±Ã§ Rehberi\n\nBu rehber, Hetzner test sunucusuna (188.245.150.117) hÄ±zlÄ± bir ÅŸekilde deploy yapmak iÃ§in gerekli minimum adÄ±mlarÄ± iÃ§erir.\n\n## ğŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§ (5 Dakika)\n\n### 1. Sunucu HazÄ±rlÄ±ÄŸÄ± (Ä°lk Kez)\n\n```bash\n# Sunucuya SSH ile baÄŸlan\nssh root@188.245.150.117\n\n# Temel kurulumlar\napt update && apt upgrade -y\ncurl -fsSL https://get.docker.com -o get-docker.sh && sh get-docker.sh\napt install docker-compose-plugin -y\n\n# Firewall\nufw allow 22/tcp && ufw allow 80/tcp && ufw allow 443/tcp && ufw --force enable\n\n# Proje dizini\nmkdir -p /opt/tipbox-backend && cd /opt/tipbox-backend\n```\n\n### 2. SSH Key OluÅŸturma (GitHub Actions iÃ§in)\n\n```bash\n# SSH key oluÅŸtur\nssh-keygen -t ed25519 -C \"github-actions-deploy\" -f ~/.ssh/github_actions_deploy -N \"\"\n\n# Public key'i authorized_keys'e ekle\ncat ~/.ssh/github_actions_deploy.pub >> ~/.ssh/authorized_keys\n\n# Private key'i gÃ¶ster (GitHub Secrets'a eklenecek)\ncat ~/.ssh/github_actions_deploy\n```\n\n**Ã–NEMLÄ°**: Private key Ã§Ä±ktÄ±sÄ±nÄ± kopyalayÄ±n!\n\n### 3. GitHub Secrets Ekleme\n\nGitHub repository â†’ Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret\n\nEklenecek secrets:\n- `HETZNER_HOST`: `188.245.150.117`\n- `HETZNER_USER`: `root`\n- `HETZNER_SSH_KEY`: (yukarÄ±da kopyaladÄ±ÄŸÄ±nÄ±z private key)\n- `HETZNER_SSH_PORT`: `22` (opsiyonel)\n\n### 4. Environment DosyasÄ± OluÅŸturma\n\n```bash\n# Sunucuda\ncd /opt/tipbox-backend\nnano .env\n```\n\nAÅŸaÄŸÄ±daki template'i kullanÄ±n (deÄŸerleri deÄŸiÅŸtirin):\n\n```env\nNODE_ENV=production\nPORT=3000\nNODE_OPTIONS=--max-old-space-size=4096\n\nDATABASE_URL=postgresql://tipbox_user:STRONG_PASSWORD@postgres:5432/tipbox_prod\nPOSTGRES_PASSWORD=STRONG_PASSWORD\n\nREDIS_URL=redis://redis:6379\nREDIS_PASSWORD=STRONG_REDIS_PASSWORD\n\nJWT_SECRET=your-super-secret-jwt-key-min-32-chars-long\n\nS3_ENDPOINT=http://minio:9000\nS3_BUCKET_NAME=tipbox-media\nS3_REGION=eu-central-1\nMINIO_ROOT_USER=tipbox_minio_user\nMINIO_ROOT_PASSWORD=STRONG_MINIO_PASSWORD\n\nGOOGLE_APPLICATION_CREDENTIALS=/app/tipboxbackend-3e2c3d3c0b31.json\nEMAIL_USER_TO_IMPERSONATE=info@tipbox.co\nEMAIL_FROM_NAME=Tipbox\n\nCORS_ORIGINS=http://188.245.150.117,https://tipbox.co\nCORS_METHODS=GET,POST,PUT,DELETE,OPTIONS\n```\n\n### 5. Google Service Account JSON\n\n```bash\n# Sunucuda dosyayÄ± oluÅŸturun ve iÃ§eriÄŸini yapÄ±ÅŸtÄ±rÄ±n\nnano /opt/tipbox-backend/tipboxbackend-3e2c3d3c0b31.json\n\n# Local makinedeki tipboxbackend-3e2c3d3c0b31.json dosyasÄ±nÄ±n iÃ§eriÄŸini kopyalayÄ±n,\n# sunucudaki nano editÃ¶rÃ¼ne yapÄ±ÅŸtÄ±rÄ±n ve kaydedip Ã§Ä±kÄ±n (CTRL+O, ENTER, CTRL+X)\n\n### 6. Ä°lk Manuel Deployment\n\n```bash\n# Sunucuda\ncd /opt/tipbox-backend\n\n# Repository'yi klonla\ngit clone <repository-url> .\ngit checkout test\n\n# Nginx config (opsiyonel)\ncp nginx.conf.example nginx.conf\n\n# Ä°lk deployment\ndocker compose -f docker-compose.prod.yml build\ndocker compose -f docker-compose.prod.yml up -d\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n```\n\n### 7. Health Check\n\n```bash\n# Backend health check\ncurl http://localhost:3000/health\n\n# Veya sunucu IP'si Ã¼zerinden\ncurl http://188.245.150.117:3000/health\n```\n\n## âœ… Otomatik Deployment\n\nArtÄ±k `test` branch'ine push yaptÄ±ÄŸÄ±nÄ±zda otomatik olarak deploy edilecek:\n\n```bash\n# Local'de\ngit checkout test\ngit add .\ngit commit -m \"feat: new feature\"\ngit push origin test\n```\n\nGitHub Actions otomatik olarak:\n1. Code'u build edecek\n2. Sunucuya SSH ile baÄŸlanacak\n3. Git pull yapacak\n4. Docker image build edecek\n5. Container'larÄ± gÃ¼ncelleyecek\n6. Migration'larÄ± Ã§alÄ±ÅŸtÄ±racak\n7. Health check yapacak\n\n## ğŸ”§ SÄ±k KullanÄ±lan Komutlar\n\n### Log KontrolÃ¼\n\n```bash\n# Backend loglarÄ±\ndocker compose -f docker-compose.prod.yml logs -f backend\n\n# TÃ¼m servisler\ndocker compose -f docker-compose.prod.yml logs -f\n```\n\n### Container Durumu\n\n```bash\n# Ã‡alÄ±ÅŸan container'lar\ndocker compose -f docker-compose.prod.yml ps\n\n# Container'Ä± yeniden baÅŸlat\ndocker compose -f docker-compose.prod.yml restart backend\n```\n\n### Manuel Deployment\n\n```bash\n# Deployment script'i kullan\nbash /opt/tipbox-backend/scripts/deploy.sh test\n```\n\n## ğŸ› Sorun Giderme\n\n### SSH BaÄŸlantÄ± HatasÄ±\n\n```bash\n# GitHub Secrets'da SSH key'in doÄŸru olduÄŸundan emin olun\n# Sunucuda authorized_keys kontrolÃ¼\ncat ~/.ssh/authorized_keys\n```\n\n### Container BaÅŸlamÄ±yor\n\n```bash\n# LoglarÄ± kontrol et\ndocker compose -f docker-compose.prod.yml logs backend\n\n# Environment variables kontrolÃ¼\ndocker compose -f docker-compose.prod.yml exec backend env | grep DATABASE_URL\n```\n\n### Migration HatasÄ±\n\n```bash\n# Migration durumunu kontrol et\ndocker compose -f docker-compose.prod.yml run --rm backend npx prisma migrate status\n```\n\n## ğŸ“š DetaylÄ± DokÃ¼mantasyon\n\nDaha detaylÄ± bilgi iÃ§in:\n- [AUTOMATED_DEPLOYMENT.md](./AUTOMATED_DEPLOYMENT.md) - Tam deployment rehberi\n- [HETZNER_DEPLOYMENT.md](./HETZNER_DEPLOYMENT.md) - Hetzner sunucu kurulum rehberi\n\n---\n\n**Sunucu IP**: 188.245.150.117  \n**Deployment Branch**: `test`  \n**Workflow**: `.github/workflows/deploy-hetzner-test.yml`\n\n",
      "category": "deployment"
    },
    {
      "id": "docker-container-config",
      "fileName": "DOCKER_CONTAINER_CONFIG",
      "path": "DOCKER_CONTAINER_CONFIG.md",
      "title": "Docker Container KonfigÃ¼rasyon Rehberi",
      "content": "# Docker Container KonfigÃ¼rasyon Rehberi\n\nBu dokÃ¼man, projenin Docker container iÃ§inde Ã§alÄ±ÅŸÄ±rken hangi konfigÃ¼rasyonlarÄ±n deÄŸiÅŸtiÄŸini ve neden deÄŸiÅŸtiÄŸini aÃ§Ä±klar.\n\n## ğŸ“‹ Ä°Ã§indekiler\n\n1. [Temel DeÄŸiÅŸiklikler](#temel-deÄŸiÅŸiklikler)\n2. [Ortam DosyalarÄ±](#ortam-dosyalarÄ±)\n3. [Container Ä°Ã§i Servis EriÅŸimi](#container-iÃ§i-servis-eriÅŸimi)\n4. [Port YapÄ±landÄ±rmalarÄ±](#port-yapÄ±landÄ±rmalarÄ±)\n5. [Volume Mount'lar](#volume-mountlar)\n6. [Network YapÄ±landÄ±rmasÄ±](#network-yapÄ±landÄ±rmasÄ±)\n\n---\n\n## Temel DeÄŸiÅŸiklikler\n\nContainer iÃ§inde Ã§alÄ±ÅŸÄ±rken, uygulama aynÄ± Docker network'Ã¼nde Ã§alÄ±ÅŸan diÄŸer servislere **container isimleri** ile eriÅŸir. Bu nedenle `localhost` yerine servis isimlerini kullanmamÄ±z gerekir.\n\n### DeÄŸiÅŸen KonfigÃ¼rasyonlar\n\n| KonfigÃ¼rasyon | Lokal Ã‡alÄ±ÅŸma | Container Ä°Ã§i Ã‡alÄ±ÅŸma | AÃ§Ä±klama |\n|--------------|---------------|----------------------|----------|\n| **Database URL** | `localhost:5432` | `postgres:5432` | PostgreSQL container ismi |\n| **Redis URL** | `localhost:6379` | `redis:6379` | Redis container ismi |\n| **S3 Endpoint** | `localhost:9000` | `minio:9000` | MinIO container ismi |\n| **File Paths** | `./relative/path` | `/app/absolute/path` | Container iÃ§inde absolute path'ler |\n\n---\n\n## Ortam DosyalarÄ±\n\nHer ortam iÃ§in ayrÄ± env dosyalarÄ± oluÅŸturulmuÅŸtur:\n\n| Ortam | Env DosyasÄ± | Docker Compose | KullanÄ±m |\n|-------|-------------|----------------|----------|\n| **Development** | `.env` | `docker-compose.yml` | Lokal geliÅŸtirme |\n| **Test** | `.env.test` | `docker-compose.test.yml` | Test ortamÄ± |\n| **Production** | `.env.production` | `docker-compose.prod.yml` | Production ortamÄ± |\n\n### Env DosyasÄ± OluÅŸturma\n\n```bash\n# Development iÃ§in\ncp env.example.txt .env\n\n# Test iÃ§in\ncp env.test.example.txt .env.test\n\n# Production iÃ§in\ncp env.production.example.txt .env.production\n```\n\n---\n\n## Container Ä°Ã§i Servis EriÅŸimi\n\n### Database (PostgreSQL)\n\n**Container Ä°Ã§i:**\n```env\nDATABASE_URL=postgresql://postgres:postgres@postgres:5432/tipbox_dev\n```\n\n**Lokal EriÅŸim (Container dÄ±ÅŸÄ±ndan):**\n```env\nDATABASE_URL=postgresql://postgres:postgres@localhost:5432/tipbox_dev\n```\n\n### Redis\n\n**Container Ä°Ã§i (Development - ÅŸifresiz):**\n```env\nREDIS_URL=redis://redis:6379\n```\n\n**Container Ä°Ã§i (Test/Production - ÅŸifreli):**\n```env\nREDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379\n```\n\n**Lokal EriÅŸim:**\n```env\nREDIS_URL=redis://localhost:6379\n```\n\n### MinIO/S3\n\n**Container Ä°Ã§i:**\n```env\nS3_ENDPOINT=http://minio:9000\n```\n\n**Lokal EriÅŸim:**\n```env\nS3_ENDPOINT=http://localhost:9000\n```\n\n**Not:** `s3.service.ts` iÃ§inde development ortamÄ±nda URL otomatik olarak `localhost`'a Ã§evrilir (tarayÄ±cÄ±dan eriÅŸim iÃ§in).\n\n### Google Service Account\n\n**Container Ä°Ã§i:**\n```env\nGOOGLE_APPLICATION_CREDENTIALS=/app/tipboxbackend-3e2c3d3c0b31.json\n```\n\n**Lokal Ã‡alÄ±ÅŸma:**\n```env\nGOOGLE_APPLICATION_CREDENTIALS=./tipboxbackend-3e2c3d3c0b31.json\n```\n\n---\n\n## Port YapÄ±landÄ±rmalarÄ±\n\n### Container Ä°Ã§i Port'lar\n\nContainer iÃ§inde servisler kendi portlarÄ±nda Ã§alÄ±ÅŸÄ±r:\n\n| Servis | Container Ä°Ã§i Port | Host'a Expose Edilen Port |\n|--------|-------------------|---------------------------|\n| Backend | `3000` | `3000` |\n| PostgreSQL | `5432` | `5432` |\n| Redis | `6379` | `6379` |\n| MinIO API | `9000` | `9000` |\n| MinIO Console | `9001` | `9001` |\n| Prisma Studio | `5555` | `5555` |\n| PgAdmin | `80` | `5050` |\n\n### Port Mapping\n\nDocker Compose'da port mapping ÅŸu ÅŸekilde yapÄ±lÄ±r:\n```yaml\nports:\n  - \"3000:3000\"  # host_port:container_port\n```\n\nBu sayede:\n- Container iÃ§inde: `localhost:3000` veya `0.0.0.0:3000`\n- Host'tan eriÅŸim: `localhost:3000`\n\n---\n\n## Volume Mount'lar\n\n### Development OrtamÄ±\n\n```yaml\nvolumes:\n  - .:/app                    # TÃ¼m proje kodu\n  - /app/node_modules         # node_modules ayrÄ± tutulur (host'tan override edilmez)\n  - ./tipboxbackend-3e2c3d3c0b31.json:/app/tipboxbackend-3e2c3d3c0b31.json:ro\n```\n\n### Test/Production OrtamÄ±\n\n```yaml\nvolumes:\n  - ./tipboxbackend-3e2c3d3c0b31.json:/app/tipboxbackend-3e2c3d3c0b31.json:ro\n  - ./logs:/app/logs\n```\n\n**Not:** Test ve Production'da source code build edilmiÅŸ hali container iÃ§inde, volume mount edilmez.\n\n---\n\n## Network YapÄ±landÄ±rmasÄ±\n\n### Development\n\nTÃ¼m servisler aynÄ± default network'te Ã§alÄ±ÅŸÄ±r. Container isimleri ile birbirlerine eriÅŸebilirler.\n\n### Test/Production\n\nTÃ¼m servisler `tipbox_network` adÄ±nda Ã¶zel bir bridge network'te Ã§alÄ±ÅŸÄ±r:\n\n```yaml\nnetworks:\n  tipbox_network:\n    driver: bridge\n```\n\nBu sayede:\n- Servisler birbirlerine container isimleri ile eriÅŸebilir\n- Network izolasyonu saÄŸlanÄ±r\n- Daha gÃ¼venli bir yapÄ± oluÅŸturulur\n\n---\n\n## Ã–nemli Notlar\n\n### 1. Environment Variable Ã–nceliÄŸi\n\nDocker Compose'da environment variable'lar ÅŸu sÄ±rayla yÃ¼klenir:\n1. `env_file` (`.env`, `.env.test`, vb.)\n2. `environment` (docker-compose.yml iÃ§indeki direkt tanÄ±mlamalar)\n\n`environment` iÃ§indeki deÄŸerler `env_file`'daki deÄŸerleri override eder.\n\n### 2. Container Ä°Ã§i vs Lokal Ã‡alÄ±ÅŸma\n\n- **Container iÃ§inde:** Servis isimlerini kullan (`postgres`, `redis`, `minio`)\n- **Lokal Ã§alÄ±ÅŸma:** `localhost` kullan\n\n### 3. S3 Endpoint Ã–zel Durumu\n\nDevelopment ortamÄ±nda, `s3.service.ts` iÃ§inde URL otomatik olarak `localhost`'a Ã§evrilir Ã§Ã¼nkÃ¼ tarayÄ±cÄ±dan eriÅŸim iÃ§in gerekli. Container iÃ§inde MinIO'ya eriÅŸim iÃ§in `minio:9000` kullanÄ±lÄ±r, ancak dÃ¶nen URL'ler tarayÄ±cÄ± iÃ§in `localhost:9000` olur.\n\n### 4. Health Check'ler\n\nTest ve Production ortamlarÄ±nda health check'ler aktif:\n- PostgreSQL: `pg_isready`\n- Redis: `redis-cli ping`\n- MinIO: `curl http://localhost:9000/minio/health/live`\n- Backend: `GET /health`\n\n---\n\n## HÄ±zlÄ± BaÅŸlangÄ±Ã§\n\n### Development OrtamÄ±\n\n```bash\n# 1. Env dosyasÄ±nÄ± oluÅŸtur\ncp env.example.txt .env\n\n# 2. Docker Compose ile servisleri baÅŸlat\ndocker-compose up -d\n\n# 3. Migration'larÄ± Ã§alÄ±ÅŸtÄ±r\ndocker-compose exec backend npm run db:migrate\n\n# 4. LoglarÄ± kontrol et\ndocker-compose logs -f backend\n```\n\n### Test OrtamÄ±\n\n```bash\n# 1. Env dosyasÄ±nÄ± oluÅŸtur\ncp env.test.example.txt .env.test\n\n# 2. Gerekli environment variable'larÄ± .env.test'e ekle\n# POSTGRES_PASSWORD, REDIS_PASSWORD, MINIO_ROOT_USER, vb.\n\n# 3. Docker Compose ile servisleri baÅŸlat\ndocker-compose -f docker-compose.test.yml up -d\n```\n\n### Production OrtamÄ±\n\n```bash\n# 1. Env dosyasÄ±nÄ± oluÅŸtur\ncp env.production.example.txt .env.production\n\n# 2. GÃ¼venli secret'larÄ± .env.production'a ekle\n# POSTGRES_PASSWORD, REDIS_PASSWORD, JWT_SECRET, vb.\n\n# 3. Docker Compose ile servisleri baÅŸlat\ndocker-compose -f docker-compose.prod.yml up -d\n```\n\n---\n\n## Sorun Giderme\n\n### Container'lar birbirini gÃ¶rmÃ¼yor\n\n- Network'Ã¼n doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun\n- Container isimlerinin doÄŸru olduÄŸunu kontrol edin\n- `docker network ls` ile network'leri listeleyin\n- `docker network inspect <network_name>` ile network detaylarÄ±nÄ± gÃ¶rÃ¼n\n\n### Port Ã§akÄ±ÅŸmasÄ±\n\n- Host'ta kullanÄ±lan port'larÄ± kontrol edin: `lsof -i :3000`\n- Docker Compose'daki port mapping'leri deÄŸiÅŸtirin\n\n### Environment variable'lar yÃ¼klenmiyor\n\n- `env_file` path'inin doÄŸru olduÄŸundan emin olun\n- `.env` dosyasÄ±nÄ±n proje root'unda olduÄŸunu kontrol edin\n- `docker-compose config` ile yapÄ±landÄ±rmayÄ± doÄŸrulayÄ±n\n\n",
      "category": "setup"
    },
    {
      "id": "environment-setup",
      "fileName": "ENVIRONMENT_SETUP",
      "path": "ENVIRONMENT_SETUP.md",
      "title": "Ortam Kurulum Rehberi",
      "content": "# Ortam Kurulum Rehberi\n\nBu dokÃ¼man, Tipbox Backend projesinin farklÄ± ortamlar (Developer, Test, Production) iÃ§in kurulum ve yapÄ±landÄ±rma adÄ±mlarÄ±nÄ± iÃ§erir.\n\n## ğŸ“‹ Ä°Ã§indekiler\n\n1. [Ortam AyrÄ±ÅŸÄ±mÄ±](#ortam-ayrÄ±ÅŸÄ±mÄ±)\n2. [Developer OrtamÄ±](#developer-ortamÄ±)\n3. [Test OrtamÄ±](#test-ortamÄ±)\n4. [Production OrtamÄ±](#production-ortamÄ±)\n5. [Environment Variables](#environment-variables)\n6. [Docker Compose KullanÄ±mÄ±](#docker-compose-kullanÄ±mÄ±)\n\n---\n\n## Ortam AyrÄ±ÅŸÄ±mÄ±\n\nProje Ã¼Ã§ farklÄ± ortam iÃ§in yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r:\n\n| Ortam | Branch | Docker Compose | Database | Environment File |\n|-------|--------|----------------|----------|------------------|\n| **Developer** | `developer` | `docker-compose.yml` | `tipbox_dev` | `.env` |\n| **Test** | `test` | `docker-compose.test.yml` | `tipbox_test` | `.env.test` |\n| **Production** | `main` | `docker-compose.production.yml` | `tipbox_prod` | `.env.production` |\n\n---\n\n## Developer OrtamÄ±\n\n### Ã–zellikler\n\n- Hot reload (nodemon)\n- Debug modu aktif\n- Verbose logging (debug level)\n- TÃ¼m portlar expose (5432, 6379, 9000, 3000, 5555)\n- Prisma Studio ve PgAdmin eriÅŸimi\n- Test data seed edilebilir\n\n### Kurulum\n\n1. **Repository'yi klonlayÄ±n:**\n\n```bash\ngit clone <repository-url>\ncd tipbox-backend\ngit checkout developer\n```\n\n2. **Environment dosyasÄ±nÄ± oluÅŸturun:**\n\n```bash\ncp env.example.txt .env\n# .env dosyasÄ±nÄ± dÃ¼zenleyin\n```\n\n3. **Docker Compose ile servisleri baÅŸlatÄ±n:**\n\n```bash\nnpm run docker:up\n```\n\n4. **Database migration'larÄ±nÄ± Ã§alÄ±ÅŸtÄ±rÄ±n:**\n\n```bash\nnpm run db:migrate\n```\n\n5. **Seed data ekleyin (opsiyonel):**\n\n```bash\nnpm run db:seed:all\n```\n\n6. **Backend'i baÅŸlatÄ±n:**\n\n```bash\nnpm run dev\n```\n\n### EriÅŸim\n\n- **Backend API:** http://localhost:3000\n- **Prisma Studio:** http://localhost:5555\n- **PgAdmin:** http://localhost:5050\n- **MinIO Console:** http://localhost:9001\n\n---\n\n## Test OrtamÄ±\n\n### Ã–zellikler\n\n- Production-like build ama daha esnek\n- Info level logging, 30 gÃ¼n retention\n- Health check'ler aktif\n- SÄ±nÄ±rlÄ± port exposure\n- Test data seed edilebilir\n- Monitoring (opsiyonel)\n\n### Kurulum (Hetzner Test Server)\n\n1. **Sunucuya SSH ile baÄŸlanÄ±n:**\n\n```bash\nssh root@YOUR_TEST_SERVER_IP\n```\n\n2. **Proje dizinine gidin:**\n\n```bash\ncd /opt/tipbox-backend\n```\n\n3. **Test branch'ine geÃ§in:**\n\n```bash\ngit checkout test\ngit pull origin test\n```\n\n4. **Environment dosyasÄ±nÄ± oluÅŸturun:**\n\n```bash\ncp .env.test.example .env.test\n# .env.test dosyasÄ±nÄ± dÃ¼zenleyin ve gerÃ§ek deÄŸerleri girin\n```\n\n5. **Docker Compose ile deploy edin:**\n\n```bash\nnpm run docker:up:test\n# veya\ndocker compose -f docker-compose.test.yml up -d\n```\n\n6. **Database migration'larÄ±nÄ± Ã§alÄ±ÅŸtÄ±rÄ±n:**\n\n```bash\ndocker compose -f docker-compose.test.yml run --rm backend npx prisma migrate deploy\n```\n\n### Otomatik Deployment\n\nTest branch'ine push yapÄ±ldÄ±ÄŸÄ±nda GitHub Actions otomatik olarak deploy eder:\n\n```bash\ngit checkout test\ngit push origin test\n```\n\n### Deploy Script KullanÄ±mÄ±\n\n```bash\n./scripts/deploy-test.sh test\n```\n\n---\n\n## Production OrtamÄ±\n\n### Ã–zellikler\n\n- Maximum security\n- Optimized build\n- Warn level console logging, Info level file logging, 90 gÃ¼n retention\n- Health check'ler zorunlu\n- SSL/TLS zorunlu\n- Minimum port exposure\n- Seed YOK\n- Backup otomatik (gÃ¼nlÃ¼k + haftalÄ±k + aylÄ±k)\n\n### Kurulum (Hetzner Production Server)\n\n1. **Sunucuya SSH ile baÄŸlanÄ±n:**\n\n```bash\nssh root@YOUR_PRODUCTION_SERVER_IP\n```\n\n2. **Proje dizinine gidin:**\n\n```bash\ncd /opt/tipbox-backend\n```\n\n3. **Main branch'ine geÃ§in:**\n\n```bash\ngit checkout main\ngit pull origin main\n```\n\n4. **Environment dosyasÄ±nÄ± oluÅŸturun:**\n\n```bash\ncp .env.production.example .env.production\n# .env.production dosyasÄ±nÄ± dÃ¼zenleyin ve GERÃ‡EK production deÄŸerlerini girin\n# Ã–NEMLÄ°: TÃ¼m ÅŸifreleri gÃ¼Ã§lÃ¼, rastgele deÄŸerlerle deÄŸiÅŸtirin!\n```\n\n5. **SSL sertifikalarÄ±nÄ± yÃ¼kleyin:**\n\n```bash\n# SSL sertifikalarÄ±nÄ± ssl/ dizinine kopyalayÄ±n\n```\n\n6. **Docker Compose ile deploy edin:**\n\n```bash\nnpm run docker:up:production\n# veya\ndocker compose -f docker-compose.production.yml up -d\n```\n\n7. **Database migration'larÄ±nÄ± Ã§alÄ±ÅŸtÄ±rÄ±n (backup sonrasÄ±):**\n\n```bash\n# Ã–nce backup alÄ±n\n./scripts/db-update.sh -e prod -m deploy -b\n\n# Veya manuel:\ndocker compose -f docker-compose.production.yml exec -T postgres pg_dump -U tipbox_user tipbox_prod > backup-$(date +%Y%m%d-%H%M%S).sql\ndocker compose -f docker-compose.production.yml run --rm backend npx prisma migrate deploy\n```\n\n### Manuel Deployment (GitHub Actions)\n\n1. GitHub Actions sekmesine gidin\n2. \"Deploy to Production\" workflow'unu seÃ§in\n3. \"Run workflow\" butonuna tÄ±klayÄ±n\n4. Confirm alanÄ±na **\"DEPLOY\"** yazÄ±n\n5. Workflow Ã§alÄ±ÅŸacak ve production'a deploy edecek\n\n### Deploy Script KullanÄ±mÄ±\n\n```bash\n./scripts/deploy-production.sh main\n```\n\n**Ã–NEMLÄ°:** Production deployment iÃ§in 10 saniye bekleme sÃ¼resi vardÄ±r (iptal iÃ§in Ctrl+C).\n\n---\n\n## Environment Variables\n\n### Ortam BazlÄ± Dosyalar\n\n- **Developer:** `.env` (veya `env.example.txt`'den kopyalayÄ±n)\n- **Test:** `.env.test` (veya `.env.test.example`'dan kopyalayÄ±n)\n- **Production:** `.env.production` (veya `.env.production.example`'dan kopyalayÄ±n)\n\n### Ortam BazlÄ± Default DeÄŸerler\n\nConfig modÃ¼lÃ¼ (`src/infrastructure/config/index.ts`) ortam bazlÄ± default deÄŸerler saÄŸlar:\n\n#### CORS Origins\n\n- **Developer:** `http://localhost:3000`, `http://localhost:3001`, `http://localhost:5173`\n- **Test:** `http://localhost:3000`, `https://test.tipbox.co`\n- **Production:** `https://tipbox.co`, `https://www.tipbox.co`, `https://app.tipbox.co`\n\n#### Log Levels\n\n- **Developer:** `debug`\n- **Test:** `info`\n- **Production:** `warn` (console), `info` (file)\n\n#### Log Retention\n\n- **Developer:** 7 gÃ¼n\n- **Test:** 30 gÃ¼n\n- **Production:** 90 gÃ¼n\n\n### Gerekli Environment Variables\n\nTÃ¼m ortamlar iÃ§in gerekli deÄŸiÅŸkenler:\n\n```env\n# Server\nPORT=3000\nNODE_ENV=development|test|production\nNODE_OPTIONS=--max-old-space-size=4096\n\n# Database\nDATABASE_URL=postgresql://user:password@host:5432/database_name\nPOSTGRES_PASSWORD=your_password\n\n# Redis\nREDIS_URL=redis://:password@redis:6379\nREDIS_PASSWORD=your_redis_password\n\n# MinIO/S3\nMINIO_ROOT_USER=your_minio_user\nMINIO_ROOT_PASSWORD=your_minio_password\nS3_ENDPOINT=http://minio:9000\nS3_BUCKET_NAME=tipbox-media\nS3_REGION=eu-central-1\nS3_ACCESS_KEY=your_access_key\nS3_SECRET_KEY=your_secret_key\n\n# JWT\nJWT_SECRET=your-jwt-secret-key-min-32-chars\n\n# Email\nGOOGLE_APPLICATION_CREDENTIALS=/app/tipboxbackend-3e2c3d3c0b31.json\nEMAIL_USER_TO_IMPERSONATE=info@tipbox.co\nEMAIL_FROM_NAME=Tipbox\n\n# CORS\nCORS_ORIGINS=http://localhost:3000,https://your-domain.com\nCORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH\n```\n\n---\n\n## Docker Compose KullanÄ±mÄ±\n\n### Developer OrtamÄ±\n\n```bash\n# Servisleri baÅŸlat\nnpm run docker:up\n\n# Servisleri durdur\nnpm run docker:down\n\n# LoglarÄ± gÃ¶rÃ¼ntÃ¼le\nnpm run docker:logs\n```\n\n### Test OrtamÄ±\n\n```bash\n# Servisleri baÅŸlat\nnpm run docker:up:test\n\n# Servisleri durdur\nnpm run docker:down:test\n\n# LoglarÄ± gÃ¶rÃ¼ntÃ¼le\nnpm run docker:logs:test\n```\n\n### Production OrtamÄ±\n\n```bash\n# Servisleri baÅŸlat\nnpm run docker:up:production\n\n# Servisleri durdur\nnpm run docker:down:production\n\n# LoglarÄ± gÃ¶rÃ¼ntÃ¼le\nnpm run docker:logs:production\n```\n\n---\n\n## Troubleshooting\n\n### Environment DosyasÄ± BulunamadÄ±\n\n```bash\n# Developer iÃ§in\ncp env.example.txt .env\n\n# Test iÃ§in\ncp .env.test.example .env.test\n\n# Production iÃ§in\ncp .env.production.example .env.production\n```\n\n### Database Connection Error\n\n1. Docker container'larÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol edin:\n```bash\ndocker compose ps\n```\n\n2. Environment dosyasÄ±ndaki DATABASE_URL'i kontrol edin\n\n3. Database'in hazÄ±r olduÄŸunu kontrol edin:\n```bash\ndocker compose exec postgres psql -U postgres -l\n```\n\n### Migration HatalarÄ±\n\n```bash\n# Migration durumunu kontrol edin\ndocker compose exec backend npx prisma migrate status\n\n# Migration'larÄ± sÄ±fÄ±rdan uygulayÄ±n (DÄ°KKAT: Sadece test/developer)\ndocker compose exec backend npx prisma migrate deploy\n```\n\n---\n\n## GÃ¼venlik NotlarÄ±\n\n1. **Production ortamÄ±nda:**\n   - TÃ¼m ÅŸifreleri gÃ¼Ã§lÃ¼, rastgele deÄŸerlerle deÄŸiÅŸtirin\n   - JWT_SECRET en az 64 karakter olmalÄ±\n   - SSL/TLS zorunlu\n   - Environment dosyalarÄ±nÄ± asla commit etmeyin\n\n2. **Test ortamÄ±nda:**\n   - Production'a benzer gÃ¼venlik ama daha esnek\n   - Test data kullanÄ±labilir\n\n3. **Developer ortamÄ±nda:**\n   - Lokal kullanÄ±m iÃ§in\n   - GÃ¼venlik ayarlarÄ± gevÅŸek\n\n---\n\n## Ä°lgili DokÃ¼mantasyon\n\n- [Branch Stratejisi](./BRANCH_STRATEGY.md)\n- [Hetzner Deployment](./HETZNER_DEPLOYMENT.md)\n- [Automated Deployment](./AUTOMATED_DEPLOYMENT.md)\n\n",
      "category": "setup"
    },
    {
      "id": "google-workspace-oauth2-config",
      "fileName": "GOOGLE_WORKSPACE_OAUTH2_CONFIG",
      "path": "GOOGLE_WORKSPACE_OAUTH2_CONFIG.md",
      "title": "Google Workspace OAuth 2.0 Email KonfigÃ¼rasyonu",
      "content": "# Google Workspace OAuth 2.0 Email KonfigÃ¼rasyonu\n\nBu dokÃ¼mantasyon, Tipbox backend'inin Google Workspace OAuth 2.0 ile Service Account kullanarak email gÃ¶ndermesi iÃ§in gerekli adÄ±mlarÄ± iÃ§erir.\n\n## Avantajlar\n\n- âœ… **IP adresi baÄŸÄ±msÄ±z:** Lokal makine ve production sunucusunda aynÄ± ÅŸekilde Ã§alÄ±ÅŸÄ±r\n- âœ… **Daha gÃ¼venli:** Hesap ÅŸifresi yerine JSON anahtar dosyasÄ± kullanÄ±lÄ±r\n- âœ… **TaÅŸÄ±nabilir:** FarklÄ± sunuculara kolayca taÅŸÄ±nabilir\n- âœ… **YÃ¶netilebilir:** Google Cloud Console'dan merkezi yÃ¶netim\n\n## Gereksinimler\n\n- Google Cloud hesabÄ± (Service Account oluÅŸturmak iÃ§in)\n- Google Workspace Admin eriÅŸimi (Domain-wide delegation iÃ§in)\n\n## BÃ¶lÃ¼m 1: Google Cloud Console (GeliÅŸtirici Ä°ÅŸlemleri)\n\n### AdÄ±m 1: Google Cloud Projesi OluÅŸturun veya SeÃ§in\n\n1. [Google Cloud Console](https://console.cloud.google.com/)'a gidin\n2. GiriÅŸ yapÄ±n (info@tipbox.co veya ilgili bir Google hesabÄ± ile)\n3. Ãœst menÃ¼den yeni bir proje oluÅŸturun veya mevcut bir projeyi seÃ§in (Ã¶rn: \"Tipbox Backend\")\n\n### AdÄ±m 2: Gmail API'yi EtkinleÅŸtirin\n\n1. OluÅŸturduÄŸunuz projeyi seÃ§in\n2. Sol menÃ¼den **APIs & Services** > **Enabled APIs & services** bÃ¶lÃ¼mÃ¼ne gidin\n3. **+ ENABLE APIS AND SERVICES** butonuna tÄ±klayÄ±n\n4. Arama kutusuna \"Gmail API\" yazÄ±n ve bulun\n5. Gmail API'yi seÃ§in ve **Enable** butonuna tÄ±klayÄ±n\n\n### AdÄ±m 3: Service Account OluÅŸturun\n\n1. Sol menÃ¼den **IAM & Admin** > **Service Accounts** bÃ¶lÃ¼mÃ¼ne gidin\n2. **+ CREATE SERVICE ACCOUNT** butonuna tÄ±klayÄ±n\n3. Service account detaylarÄ±nÄ± girin:\n   - **Service account name:** `tipbox-mailer` (veya istediÄŸiniz bir isim)\n   - **Service account ID:** Otomatik oluÅŸturulur\n4. **Create and Continue** butonuna tÄ±klayÄ±n\n5. Rol seÃ§me ekranÄ±nÄ± (AdÄ±m 2) **Continue** ile geÃ§in (rol gerekmez)\n6. AdÄ±m 3'Ã¼ **Done** ile tamamlayÄ±n\n\n### AdÄ±m 4: JSON Anahtar DosyasÄ±nÄ± Ä°ndirin\n\n1. OluÅŸturduÄŸunuz `tipbox-mailer` service account'unu listede bulun ve Ã¼zerine tÄ±klayÄ±n\n2. Ãœst sekmelerden **KEYS** sekmesine gidin\n3. **ADD KEY** > **Create new key** seÃ§in\n4. Key tipi olarak **JSON** seÃ§ili kalsÄ±n ve **CREATE** butonuna basÄ±n\n5. TarayÄ±cÄ±nÄ±z JSON dosyasÄ±nÄ± indirecektir (Ã¶rn: `tipboxbackend-3e2c3d3c0b31.json`)\n\n**Ã–NEMLÄ°:** Bu JSON dosyasÄ±nÄ± projenizin ana dizinine kopyalayÄ±n ve `.gitignore` dosyanÄ±za eklediÄŸinizden emin olun.\n\n### AdÄ±m 5: Client ID'yi KopyalayÄ±n (Workspace Admin iÃ§in)\n\n1. Service Account detay sayfasÄ±nda **Advanced settings** bÃ¶lÃ¼mÃ¼ne gidin\n2. **Client ID** deÄŸerini kopyalayÄ±n (uzun sayÄ±sal deÄŸer, email adresi deÄŸil)\n3. Bu Client ID'yi Workspace Admin'e verin\n\n## BÃ¶lÃ¼m 2: Google Workspace Admin Console (Admin Ä°ÅŸlemleri)\n\n### AdÄ±m 1: Domain-Wide Delegation\n\n1. Workspace Admin olarak [admin.google.com](https://admin.google.com) adresine giriÅŸ yapÄ±n\n2. Sol menÃ¼den **Security** > **Access and data control** > **API controls** yolunu izleyin\n3. **Domain-wide Delegation** panelini bulun ve **Manage Domain-Wide Delegation** butonuna tÄ±klayÄ±n\n\n### AdÄ±m 2: API Ä°stemcisini Yetkilendirme\n\n1. **Add new** butonuna tÄ±klayÄ±n\n2. **Client ID:** BÃ¶lÃ¼m 1 / AdÄ±m 5'te kopyaladÄ±ÄŸÄ±nÄ±z Client ID'yi yapÄ±ÅŸtÄ±rÄ±n\n3. **OAuth Scopes (API KapsamlarÄ±):** Åu izni tam olarak yapÄ±ÅŸtÄ±rÄ±n:\n   ```\n   https://www.googleapis.com/auth/gmail.send\n   ```\n   *(Bu, service account'a SADECE e-posta gÃ¶nderme izni verir)*\n4. **Authorize** butonuna tÄ±klayÄ±n\n\n**Not:** Ä°znin tÃ¼m Google sistemlerine yayÄ±lmasÄ± 15 dakika kadar sÃ¼rebilir.\n\n## BÃ¶lÃ¼m 3: Backend YapÄ±landÄ±rmasÄ±\n\n### AdÄ±m 1: Gerekli Paketler (Zaten YÃ¼klÃ¼)\n\nProjede zaten yÃ¼klÃ¼:\n- `nodemailer`\n- `google-auth-library`\n\n### AdÄ±m 2: Environment Variables\n\n`.env` dosyanÄ±za aÅŸaÄŸÄ±daki deÄŸiÅŸkenleri ekleyin:\n\n```env\n# Email (Google Workspace OAuth 2.0) yapÄ±landÄ±rmasÄ±\n# JSON dosyasÄ±nÄ±n path'i (absolute veya relative)\nGOOGLE_APPLICATION_CREDENTIALS=./tipboxbackend-3e2c3d3c0b31.json\n# Service Account'un hangi email adÄ±na gÃ¶nderim yapacaÄŸÄ±\nEMAIL_USER_TO_IMPERSONATE=info@tipbox.co\n# E-postada gÃ¶rÃ¼necek \"Kimden\" adÄ±\nEMAIL_FROM_NAME=Tipbox\n```\n\n**Not:** \n- `GOOGLE_APPLICATION_CREDENTIALS` iÃ§in absolute path (`/path/to/file.json`) veya relative path (`./file.json`) kullanabilirsiniz\n- Relative path kullanÄ±yorsanÄ±z, proje root dizininden baÅŸlar\n\n### AdÄ±m 3: JSON DosyasÄ±nÄ± Projeye Ekleyin\n\n1. Ä°ndirdiÄŸiniz JSON dosyasÄ±nÄ± projenizin ana dizinine kopyalayÄ±n\n2. Dosya adÄ±nÄ± `tipboxbackend-3e2c3d3c0b31.json` olarak kullanÄ±n (veya kendi dosya adÄ±nÄ±zÄ± kullanÄ±n)\n3. `.gitignore` dosyasÄ±na JSON dosyasÄ±nÄ± ekleyin (zaten ekli)\n\n### AdÄ±m 4: Test Etme\n\n1. `.env` dosyasÄ±nÄ±n doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun\n2. Backend'i baÅŸlatÄ±n: `npm run dev`\n3. `/auth/signup` endpoint'ine bir POST isteÄŸi gÃ¶nderin:\n   ```json\n   {\n     \"email\": \"test@example.com\",\n     \"password\": \"TestPassword123!\"\n   }\n   ```\n4. Email'inizin gelip gelmediÄŸini kontrol edin\n\n## Sorun Giderme\n\n### \"Failed to obtain access token\" hatasÄ±\n- JSON dosyasÄ±nÄ±n path'inin doÄŸru olduÄŸundan emin olun\n- JSON dosyasÄ±nÄ±n geÃ§erli olduÄŸundan emin olun\n- Gmail API'nin etkinleÅŸtirildiÄŸinden emin olun\n\n### \"Domain-wide delegation not configured\" hatasÄ±\n- Workspace Admin'in Domain-wide Delegation'Ä± doÄŸru yapÄ±landÄ±rdÄ±ÄŸÄ±ndan emin olun\n- Client ID'nin doÄŸru kopyalandÄ±ÄŸÄ±ndan emin olun\n- OAuth scope'un tam olarak `https://www.googleapis.com/auth/gmail.send` olduÄŸundan emin olun\n- 15 dakika bekleyin (izin yayÄ±lmasÄ± zaman alabilir)\n\n### \"Email transporter not initialized\" hatasÄ±\n- `GOOGLE_APPLICATION_CREDENTIALS` environment variable'Ä±nÄ±n doÄŸru ayarlandÄ±ÄŸÄ±ndan emin olun\n- JSON dosyasÄ±nÄ±n okunabilir olduÄŸundan emin olun\n- Service Account'un doÄŸru oluÅŸturulduÄŸundan emin olun\n\n### Email gÃ¶nderilemiyor\n- Google Workspace hesabÄ±nÄ±n gÃ¶nderim limitlerini kontrol edin\n- Spam klasÃ¶rÃ¼nÃ¼ kontrol edin\n- Log dosyalarÄ±nÄ± kontrol edin (`logs/` dizini)\n\n## GÃ¼venlik NotlarÄ±\n\n- âœ… JSON dosyasÄ±nÄ± **asla** git repository'sine commit etmeyin\n- âœ… Production ortamÄ±nda JSON dosyasÄ±nÄ± gÃ¼venli bir ÅŸekilde saklayÄ±n (AWS Secrets Manager, Azure Key Vault, HashiCorp Vault, vs.)\n- âœ… Service Account'un izinlerini dÃ¼zenli olarak kontrol edin\n- âœ… OAuth scope'larÄ± minimum gerekli izinlerle sÄ±nÄ±rlayÄ±n (`gmail.send` sadece gÃ¶nderme izni verir)\n- âœ… Email gÃ¶nderim loglarÄ±nÄ± izleyin ve ÅŸÃ¼pheli aktiviteleri kontrol edin\n\n## GÃ¼nlÃ¼k Limitler\n\nGoogle Workspace iÃ§in gÃ¼nlÃ¼k gÃ¶nderim limitleri:\n- **Gmail (KiÅŸisel):** 500 email/gÃ¼n\n- **Google Workspace (Business):** 2000 email/gÃ¼n (default), artÄ±rÄ±labilir\n\nDaha yÃ¼ksek limitler iÃ§in Google Workspace Support ile iletiÅŸime geÃ§in.\n\n## Production Deployment\n\n### Heroku\n\n1. JSON dosyasÄ±nÄ± Heroku Config Vars'a ekleyin (base64 encode edilmiÅŸ olarak)\n2. Veya JSON iÃ§eriÄŸini Heroku Secrets Manager'a ekleyin\n3. `GOOGLE_APPLICATION_CREDENTIALS` iÃ§in absolute path kullanÄ±n\n\n### AWS (EC2/Lambda)\n\n1. JSON dosyasÄ±nÄ± AWS Secrets Manager'a ekleyin\n2. Runtime'da Secrets Manager'dan okuyup geÃ§ici dosya olarak kaydedin\n3. `GOOGLE_APPLICATION_CREDENTIALS` iÃ§in bu geÃ§ici dosyanÄ±n path'ini kullanÄ±n\n\n### Docker\n\n1. JSON dosyasÄ±nÄ± Docker image'a COPY etmeyin (gÃ¼venlik riski)\n2. Docker volume veya secret olarak mount edin\n3. `GOOGLE_APPLICATION_CREDENTIALS` iÃ§in mount edilen path'i kullanÄ±n\n\n## Ä°lgili DokÃ¼mantasyon\n\n- [Google Cloud Service Accounts](https://cloud.google.com/iam/docs/service-accounts)\n- [Gmail API](https://developers.google.com/gmail/api)\n- [Domain-wide Delegation](https://developers.google.com/identity/protocols/oauth2/service-account#delegatingauthority)\n\n",
      "category": "features"
    },
    {
      "id": "google-workspace-smtp-config",
      "fileName": "GOOGLE_WORKSPACE_SMTP_CONFIG",
      "path": "GOOGLE_WORKSPACE_SMTP_CONFIG.md",
      "title": "Google Workspace SMTP KonfigÃ¼rasyonu",
      "content": "# Google Workspace SMTP KonfigÃ¼rasyonu\n\nBu dokÃ¼mantasyon, Tipbox backend'inin Google Workspace SMTP kullanarak email gÃ¶ndermesi iÃ§in gerekli adÄ±mlarÄ± iÃ§erir.\n\n## Gereksinimler\n\n- Google Workspace hesabÄ± (info@tipbox.co email adresi)\n- Google Workspace Admin eriÅŸimi veya en azÄ±ndan info@tipbox.co hesabÄ±na eriÅŸim\n\n## AdÄ±m 1: Google Workspace'de App Password OluÅŸturma\n\nGoogle Workspace hesabÄ±nÄ±z iÃ§in 2FA (Ä°ki FaktÃ¶rlÃ¼ DoÄŸrulama) aktif olmalÄ±dÄ±r. EÄŸer aktif deÄŸilse:\n\n1. Google Workspace Admin Console'a giriÅŸ yapÄ±n\n2. GÃ¼venlik > 2-Step Verification bÃ¶lÃ¼mÃ¼ne gidin\n3. 2FA'yÄ± aktifleÅŸtirin\n\nApp Password oluÅŸturmak iÃ§in:\n\n1. Google HesabÄ±nÄ±za giriÅŸ yapÄ±n: https://myaccount.google.com/\n2. Sol menÃ¼den **GÃ¼venlik** sekmesine gidin\n3. **2 AdÄ±mlÄ± DoÄŸrulama** bÃ¶lÃ¼mÃ¼ne gidin ve aktif olduÄŸundan emin olun\n4. **App passwords** (Uygulama ÅŸifreleri) bÃ¶lÃ¼mÃ¼ne gidin\n5. **Select app** (Uygulama seÃ§) dropdown'undan **Mail** seÃ§in\n6. **Select device** (Cihaz seÃ§) dropdown'undan **Other (Custom name)** seÃ§in\n7. \"Tipbox Backend\" gibi bir isim verin\n8. **Generate** (OluÅŸtur) butonuna tÄ±klayÄ±n\n9. OluÅŸturulan 16 haneli ÅŸifreyi kopyalayÄ±n (Ã¶rn: `abcd efgh ijkl mnop`)\n\n**Ã–NEMLÄ°:** Bu ÅŸifreyi gÃ¼venli bir yerde saklayÄ±n. Tekrar gÃ¶sterilmeyecektir.\n\n## AdÄ±m 2: Environment Variables Ayarlama\n\nProjenizin `.env` dosyasÄ±na aÅŸaÄŸÄ±daki deÄŸiÅŸkenleri ekleyin:\n\n```env\n# Email (Google Workspace SMTP) yapÄ±landÄ±rmasÄ±\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=info@tipbox.co\nSMTP_PASSWORD=abcd efgh ijkl mnop\nSMTP_FROM_EMAIL=info@tipbox.co\nSMTP_FROM_NAME=Tipbox\n```\n\n**Not:** `SMTP_PASSWORD` deÄŸerine app password'Ã¼ **boÅŸluksuz** olarak yazÄ±n (Ã¶rn: `abcdefghijklmnop`)\n\n## AdÄ±m 3: Google Workspace Admin AyarlarÄ± (Opsiyonel)\n\nEÄŸer email gÃ¶nderiminde sorun yaÅŸÄ±yorsanÄ±z, Google Workspace Admin Console'dan ÅŸu ayarlarÄ± kontrol edin:\n\n1. **Admin Console** > **Apps** > **Google Workspace** > **Gmail**\n2. **Routing** sekmesine gidin\n3. **SMTP relay service** ayarlarÄ±nÄ± kontrol edin\n4. Gerekirse, backend sunucunuzun IP adresini whitelist'e ekleyin\n\n## Test Etme\n\nKonfigÃ¼rasyonu test etmek iÃ§in:\n\n1. `.env` dosyasÄ±nÄ±n doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun\n2. Backend'i baÅŸlatÄ±n: `npm run dev`\n3. `/auth/signup` endpoint'ine bir POST isteÄŸi gÃ¶nderin\n4. Email'inizin gelip gelmediÄŸini kontrol edin\n\n## Sorun Giderme\n\n### \"Invalid login credentials\" hatasÄ±\n- App password'Ã¼n doÄŸru kopyalandÄ±ÄŸÄ±ndan emin olun\n- Åifredeki boÅŸluklarÄ± kaldÄ±rÄ±n\n- `SMTP_USER` deÄŸerinin tam email adresi olduÄŸundan emin olun (info@tipbox.co)\n\n### \"Connection timeout\" hatasÄ±\n- Firewall ayarlarÄ±nÄ± kontrol edin\n- Port 587'nin aÃ§Ä±k olduÄŸundan emin olun\n- SMTP_HOST deÄŸerinin `smtp.gmail.com` olduÄŸundan emin olun\n\n### Email gÃ¶nderilemiyor\n- Google Workspace hesabÄ±nÄ±n gÃ¶nderim limitlerini kontrol edin\n- Spam klasÃ¶rÃ¼nÃ¼ kontrol edin\n- SMTP_FROM_EMAIL ve SMTP_USER deÄŸerlerinin aynÄ± olduÄŸundan emin olun\n\n## GÃ¼venlik NotlarÄ±\n\n- App password'Ã¼ asla git repository'sine commit etmeyin\n- Production ortamÄ±nda environment variables'Ä± gÃ¼venli bir ÅŸekilde saklayÄ±n (AWS Secrets Manager, Azure Key Vault, vs.)\n- App password'Ã¼ periyodik olarak yenileyin\n- Email gÃ¶nderim loglarÄ±nÄ± izleyin ve ÅŸÃ¼pheli aktiviteleri kontrol edin\n\n## GÃ¼nlÃ¼k Limitler\n\nGoogle Workspace SMTP iÃ§in gÃ¼nlÃ¼k gÃ¶nderim limitleri:\n- **Gmail (KiÅŸisel):** 500 email/gÃ¼n\n- **Google Workspace (Business):** 2000 email/gÃ¼n (default), artÄ±rÄ±labilir\n\nDaha yÃ¼ksek limitler iÃ§in Google Workspace Support ile iletiÅŸime geÃ§in.\n\n",
      "category": "features"
    },
    {
      "id": "hetzner-deployment",
      "fileName": "HETZNER_DEPLOYMENT",
      "path": "HETZNER_DEPLOYMENT.md",
      "title": "Hetzner Sunucu Deployment Rehberi",
      "content": "# Hetzner Sunucu Deployment Rehberi\n\nBu dokÃ¼man, Tipbox Backend projesinin Hetzner Cloud sunucusuna deploy edilmesi iÃ§in adÄ±m adÄ±m rehberdir.\n\n**Ã–nemli Not**: Bu proje **MinIO** kullanmaktadÄ±r. MinIO, AWS S3-compatible bir object storage Ã§Ã¶zÃ¼mÃ¼dÃ¼r. Development ve Production ortamlarÄ±nda MinIO kullanÄ±lÄ±r. Ä°leride AWS S3'e geÃ§iÅŸ yapÄ±labilir Ã§Ã¼nkÃ¼ kod S3-compatible yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r (sadece environment variable'larÄ± deÄŸiÅŸtirmek yeterli olacaktÄ±r).\n\n## ğŸ“‹ Ã–n Gereksinimler\n\n- Hetzner Cloud hesabÄ±\n- SSH eriÅŸimi\n- Docker ve Docker Compose kurulu\n- Domain adresi (opsiyonel ama Ã¶nerilir)\n\n## ğŸ”§ Sunucu HazÄ±rlÄ±ÄŸÄ±\n\n### 1. Sunucu OluÅŸturma\n\n1. Hetzner Cloud Console'dan yeni bir sunucu oluÅŸturun\n2. Ã–nerilen Ã¶zellikler:\n   - **CPU**: 2+ vCPU\n   - **RAM**: 4GB+\n   - **Disk**: 40GB+ SSD\n   - **OS**: Ubuntu 22.04 LTS\n   - **Location**: NÃ¼rnberg (eu-central) veya Helsinki (eu-north)\n\n### 2. Sunucu Kurulumu\n\n```bash\n# Sunucuya SSH ile baÄŸlanÄ±n\nssh root@your-server-ip\n\n# Sistem gÃ¼ncellemesi\napt update && apt upgrade -y\n\n# Docker kurulumu\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n\n# Docker Compose kurulumu\napt install docker-compose-plugin -y\n\n# Firewall yapÄ±landÄ±rmasÄ±\nufw allow 22/tcp   # SSH\nufw allow 80/tcp   # HTTP\nufw allow 443/tcp  # HTTPS\nufw enable\n```\n\n## ğŸ“¦ Proje Kurulumu\n\n### 1. Proje Klonlama\n\n```bash\n# Proje dizini oluÅŸtur\nmkdir -p /opt/tipbox-backend\ncd /opt/tipbox-backend\n\n# Git repo'yu klonla (veya proje dosyalarÄ±nÄ± yÃ¼kle)\ngit clone <your-repo-url> .\n\n# Veya mevcut projeyi yÃ¼kle\nscp -r /local/path/to/project root@your-server-ip:/opt/tipbox-backend\n```\n\n### 2. Environment Variables\n\n```bash\n# .env dosyasÄ± oluÅŸtur\ncd /opt/tipbox-backend\nnano .env\n```\n\n**Production .env Ã¶rneÄŸi:**\n\n```env\n# Server\nNODE_ENV=production\nPORT=3000\nNODE_OPTIONS=--max-old-space-size=4096\n\n# Database\nDATABASE_URL=postgresql://tipbox_user:strong_password_here@postgres:5432/tipbox_prod\n\n# Redis\nREDIS_URL=redis://redis:6379\n\n# JWT\nJWT_SECRET=your-super-secret-jwt-key-change-this-in-production\n\n# MinIO Storage (Object Storage)\n# Production'da MinIO kullanÄ±lacak (Hetzner sunucusunda)\n# AWS S3'e geÃ§iÅŸ iÃ§in: S3_ENDPOINT'i deÄŸiÅŸtirmek yeterli (kod deÄŸiÅŸikliÄŸi gerekmez)\nS3_ENDPOINT=http://minio:9000\nS3_BUCKET_NAME=tipbox-media\nS3_REGION=eu-central-1\nS3_ACCESS_KEY=${MINIO_ROOT_USER}\nS3_SECRET_KEY=${MINIO_ROOT_PASSWORD}\nMINIO_ROOT_USER=tipbox_minio_user\nMINIO_ROOT_PASSWORD=strong_minio_password_here\n\n# Email (Google Workspace OAuth 2.0)\nGOOGLE_APPLICATION_CREDENTIALS=/app/tipboxbackend-3e2c3d3c0b31.json\nEMAIL_USER_TO_IMPERSONATE=info@tipbox.co\nEMAIL_FROM_NAME=Tipbox\n\n# CORS\nCORS_ORIGINS=https://tipbox.co,https://www.tipbox.co\nCORS_METHODS=GET,POST,PUT,DELETE,OPTIONS\n\n# Auth0 (opsiyonel)\nAUTH0_DOMAIN=your-auth0-domain.auth0.com\nAUTH0_AUDIENCE=https://tipbox-backend\n```\n\n### 3. Production Docker Compose\n\n`docker-compose.prod.yml` dosyasÄ± oluÅŸturun:\n\n```yaml\nservices:\n  postgres:\n    image: postgres:15\n    container_name: tipbox_postgres_prod\n    restart: always\n    environment:\n      POSTGRES_USER: tipbox_user\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}\n      POSTGRES_DB: tipbox_prod\n    volumes:\n      - postgres_prod_data:/var/lib/postgresql/data\n    networks:\n      - tipbox_network\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U tipbox_user\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  minio:\n    image: minio/minio:latest\n    container_name: tipbox_minio_prod\n    restart: always\n    command: server /data --console-address \":9001\"\n    environment:\n      MINIO_ROOT_USER: ${MINIO_ROOT_USER}\n      MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD}\n    volumes:\n      - minio_prod_data:/data\n    networks:\n      - tipbox_network\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:9000/minio/health/live\"]\n      interval: 30s\n      timeout: 20s\n      retries: 3\n    # Not: Production'da MinIO Console'a dÄ±ÅŸarÄ±dan eriÅŸim iÃ§in port mapping ekleyebilirsiniz\n    # ports:\n    #   - \"9000:9000\"  # API iÃ§in\n    #   - \"9001:9001\"  # Web Console iÃ§in (gÃ¼venlik iÃ§in firewall ile kÄ±sÄ±tlanmalÄ±)\n\n  redis:\n    image: redis:7-alpine\n    container_name: tipbox_redis_prod\n    restart: always\n    volumes:\n      - redis_prod_data:/data\n    networks:\n      - tipbox_network\n    command: redis-server --appendonly yes --requirepass ${REDIS_PASSWORD}\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"--raw\", \"incr\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n\n  backend:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: tipbox_backend_prod\n    restart: always\n    environment:\n      - NODE_ENV=production\n      - NODE_OPTIONS=--max-old-space-size=4096\n      - DATABASE_URL=${DATABASE_URL}\n      - REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379\n      - S3_ENDPOINT=http://minio:9000\n      - S3_BUCKET_NAME=${S3_BUCKET_NAME}\n      - S3_REGION=${S3_REGION}\n      - S3_ACCESS_KEY=${MINIO_ROOT_USER}\n      - S3_SECRET_KEY=${MINIO_ROOT_PASSWORD}\n      - MINIO_ROOT_USER=${MINIO_ROOT_USER}\n      - MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}\n      - JWT_SECRET=${JWT_SECRET}\n      - GOOGLE_APPLICATION_CREDENTIALS=/app/tipboxbackend-3e2c3d3c0b31.json\n      - EMAIL_USER_TO_IMPERSONATE=${EMAIL_USER_TO_IMPERSONATE}\n      - EMAIL_FROM_NAME=${EMAIL_FROM_NAME}\n      - CORS_ORIGINS=${CORS_ORIGINS}\n      - CORS_METHODS=${CORS_METHODS}\n    depends_on:\n      postgres:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n      minio:\n        condition: service_healthy\n    volumes:\n      - ./tipboxbackend-3e2c3d3c0b31.json:/app/tipboxbackend-3e2c3d3c0b31.json:ro\n      - ./logs:/app/logs\n    networks:\n      - tipbox_network\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  nginx:\n    image: nginx:alpine\n    container_name: tipbox_nginx_prod\n    restart: always\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n      - ./logs/nginx:/var/log/nginx\n    depends_on:\n      - backend\n    networks:\n      - tipbox_network\n\nvolumes:\n  postgres_prod_data:\n  minio_prod_data:\n  redis_prod_data:\n\nnetworks:\n  tipbox_network:\n    driver: bridge\n```\n\n### 4. Nginx YapÄ±landÄ±rmasÄ±\n\n`nginx.conf` dosyasÄ± oluÅŸturun:\n\n```nginx\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream backend {\n        server backend:3000;\n    }\n\n    server {\n        listen 80;\n        server_name your-domain.com www.your-domain.com;\n\n        # Redirect HTTP to HTTPS\n        return 301 https://$server_name$request_uri;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name your-domain.com www.your-domain.com;\n\n        ssl_certificate /etc/nginx/ssl/cert.pem;\n        ssl_certificate_key /etc/nginx/ssl/key.pem;\n\n        # SSL yapÄ±landÄ±rmasÄ±\n        ssl_protocols TLSv1.2 TLSv1.3;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n\n        # Gzip compression\n        gzip on;\n        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n        # Max upload size (avatar iÃ§in)\n        client_max_body_size 10M;\n\n        location / {\n            proxy_pass http://backend;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection 'upgrade';\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n            proxy_cache_bypass $http_upgrade;\n            \n            # Timeouts\n            proxy_connect_timeout 60s;\n            proxy_send_timeout 60s;\n            proxy_read_timeout 60s;\n        }\n\n        # Health check endpoint\n        location /health {\n            proxy_pass http://backend/health;\n            access_log off;\n        }\n    }\n}\n```\n\n### 5. SSL SertifikasÄ± (Let's Encrypt)\n\n```bash\n# Certbot kurulumu\napt install certbot -y\n\n# SSL sertifikasÄ± oluÅŸtur (domain varsa)\ncertbot certonly --standalone -d your-domain.com -d www.your-domain.com\n\n# SertifikalarÄ± nginx dizinine kopyala\nmkdir -p /opt/tipbox-backend/ssl\ncp /etc/letsencrypt/live/your-domain.com/fullchain.pem /opt/tipbox-backend/ssl/cert.pem\ncp /etc/letsencrypt/live/your-domain.com/privkey.pem /opt/tipbox-backend/ssl/key.pem\n\n# Otomatik yenileme iÃ§in cron job\ncrontab -e\n# Åunu ekle:\n# 0 0 * * * certbot renew --quiet && cp /etc/letsencrypt/live/your-domain.com/fullchain.pem /opt/tipbox-backend/ssl/cert.pem && cp /etc/letsencrypt/live/your-domain.com/privkey.pem /opt/tipbox-backend/ssl/key.pem && docker-compose -f docker-compose.prod.yml restart nginx\n```\n\n## ğŸš€ Deployment\n\n### 1. Ä°lk Deployment\n\n```bash\ncd /opt/tipbox-backend\n\n# Prisma migration'larÄ± Ã§alÄ±ÅŸtÄ±r\ndocker-compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n\n# Container'larÄ± baÅŸlat\ndocker-compose -f docker-compose.prod.yml up -d\n\n# LoglarÄ± kontrol et\ndocker-compose -f docker-compose.prod.yml logs -f backend\n```\n\n### 2. MinIO Bucket KontrolÃ¼ ve File Upload Testi\n\nBackend baÅŸladÄ±ÄŸÄ±nda otomatik olarak `tipbox-media` bucket'Ä± oluÅŸturulacaktÄ±r. \n\n**Otomatik Bucket OluÅŸturma:**\n- Backend container'Ä± baÅŸladÄ±ÄŸÄ±nda `S3Service` otomatik olarak bucket'Ä± kontrol eder\n- Bucket yoksa otomatik oluÅŸturur\n- Loglarda `S3 bucket oluÅŸturuldu` veya `S3 bucket mevcut` mesajÄ±nÄ± gÃ¶rebilirsiniz\n\n**Manuel Kontrol:**\n```bash\n# Backend loglarÄ±nda bucket durumunu kontrol et\ndocker-compose -f docker-compose.prod.yml logs backend | grep bucket\n\n# MinIO Console'a eriÅŸim (port forwarding ile gÃ¼venli)\nssh -L 9001:localhost:9001 root@your-server-ip\n\n# TarayÄ±cÄ±da: http://localhost:9001\n# Login: MINIO_ROOT_USER / MINIO_ROOT_PASSWORD\n```\n\n**File Upload Testi:**\n```bash\n# Setup-profile endpoint'i ile avatar yÃ¼kleme testi\ncurl -X POST https://your-domain.com/users/setup-profile \\\n  -H \"Authorization: Bearer YOUR_JWT_TOKEN\" \\\n  -F \"FullName=Test User\" \\\n  -F \"UserName=testuser\" \\\n  -F \"selectCategories={\\\"userId\\\":\\\"1\\\",\\\"selectedCategories\\\":[]}\" \\\n  -F \"Avatar=@/path/to/image.jpg\"\n\n# BaÅŸarÄ±lÄ± response'da avatarUrl dÃ¶necektir\n```\n\n### 3. Health Check\n\n```bash\n# Backend health check\ncurl http://localhost:3000/health\n\n# Veya domain Ã¼zerinden\ncurl https://your-domain.com/health\n```\n\n## ğŸ“Š Monitoring ve Logging\n\n### Log YÃ¶netimi\n\n```bash\n# Backend loglarÄ±\ndocker-compose -f docker-compose.prod.yml logs -f backend\n\n# TÃ¼m servislerin loglarÄ±\ndocker-compose -f docker-compose.prod.yml logs -f\n\n# Log rotasyonu iÃ§in logrotate kurulumu\napt install logrotate -y\n\n# Logrotate yapÄ±landÄ±rmasÄ±\nnano /etc/logrotate.d/tipbox-backend\n```\n\nLogrotate config:\n```\n/opt/tipbox-backend/logs/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    notifempty\n    create 0644 root root\n    sharedscripts\n    postrotate\n        docker-compose -f /opt/tipbox-backend/docker-compose.prod.yml restart backend\n    endscript\n}\n```\n\n### Backup Stratejisi\n\n```bash\n# Backup script oluÅŸtur\nnano /opt/tipbox-backend/backup.sh\n```\n\n```bash\n#!/bin/bash\nBACKUP_DIR=\"/opt/backups/tipbox\"\nDATE=$(date +%Y%m%d_%H%M%S)\nmkdir -p $BACKUP_DIR\n\n# PostgreSQL backup\ndocker-compose -f /opt/tipbox-backend/docker-compose.prod.yml exec -T postgres pg_dump -U tipbox_user tipbox_prod > $BACKUP_DIR/postgres_$DATE.sql\n\n# MinIO backup (data volume)\ndocker run --rm -v tipbox-backend_minio_prod_data:/data -v $BACKUP_DIR:/backup alpine tar czf /backup/minio_$DATE.tar.gz /data\n\n# Redis backup\ndocker-compose -f /opt/tipbox-backend/docker-compose.prod.yml exec -T redis redis-cli --rdb - > $BACKUP_DIR/redis_$DATE.rdb\n\n# Eski backup'larÄ± temizle (7 gÃ¼nden eski)\nfind $BACKUP_DIR -type f -mtime +7 -delete\n```\n\n```bash\nchmod +x /opt/tipbox-backend/backup.sh\n\n# GÃ¼nlÃ¼k backup iÃ§in cron\ncrontab -e\n# Åunu ekle:\n# 0 2 * * * /opt/tipbox-backend/backup.sh\n```\n\n## ğŸ”„ GÃ¼ncelleme ve Maintenance\n\n### Proje GÃ¼ncelleme\n\n```bash\ncd /opt/tipbox-backend\n\n# Git pull\ngit pull origin main\n\n# Build ve restart\ndocker-compose -f docker-compose.prod.yml build backend\ndocker-compose -f docker-compose.prod.yml up -d backend\n\n# Migration varsa\ndocker-compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n```\n\n### Database Migration\n\n```bash\n# Production migration\ndocker-compose -f docker-compose.prod.yml run --rm backend npx prisma migrate deploy\n\n# Migration durumunu kontrol et\ndocker-compose -f docker-compose.prod.yml run --rm backend npx prisma migrate status\n```\n\n## ğŸ”’ GÃ¼venlik Ã–nerileri\n\n1. **GÃ¼Ã§lÃ¼ Åifreler**: TÃ¼m environment variable'larÄ± gÃ¼Ã§lÃ¼ ÅŸifrelerle deÄŸiÅŸtirin\n2. **Firewall**: Sadece gerekli portlarÄ± aÃ§Ä±n\n3. **SSL**: Mutlaka HTTPS kullanÄ±n\n4. **SSH Key**: Password authentication yerine SSH key kullanÄ±n\n5. **Docker Secrets**: Hassas bilgileri Docker secrets ile yÃ¶netin\n6. **Regular Updates**: Sistem ve Docker image'larÄ±nÄ± dÃ¼zenli gÃ¼ncelleyin\n7. **Monitoring**: LoglarÄ± dÃ¼zenli kontrol edin\n\n## ğŸ“ Checklist\n\n- [ ] Sunucu oluÅŸturuldu ve SSH eriÅŸimi saÄŸlandÄ±\n- [ ] Docker ve Docker Compose kuruldu\n- [ ] Proje dosyalarÄ± sunucuya yÃ¼klendi\n- [ ] `.env` dosyasÄ± production deÄŸerleriyle oluÅŸturuldu\n- [ ] `docker-compose.prod.yml` oluÅŸturuldu\n- [ ] Nginx yapÄ±landÄ±rÄ±ldÄ± ve SSL sertifikasÄ± kuruldu\n- [ ] Google Service Account JSON dosyasÄ± yÃ¼klendi\n- [ ] Database migration'larÄ± Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±\n- [ ] MinIO bucket kontrol edildi\n- [ ] Health check endpoint'leri test edildi\n- [ ] Backup stratejisi kuruldu\n- [ ] Monitoring ve logging yapÄ±landÄ±rÄ±ldÄ±\n- [ ] GÃ¼venlik Ã¶nlemleri alÄ±ndÄ±\n\n## ğŸ†˜ Troubleshooting\n\n### Backend Container BaÅŸlamÄ±yor\n\n```bash\n# LoglarÄ± kontrol et\ndocker-compose -f docker-compose.prod.yml logs backend\n\n# Container'Ä± yeniden baÅŸlat\ndocker-compose -f docker-compose.prod.yml restart backend\n```\n\n### Database BaÄŸlantÄ± HatasÄ±\n\n```bash\n# PostgreSQL container'Ä±nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol et\ndocker-compose -f docker-compose.prod.yml ps postgres\n\n# Connection string'i kontrol et\necho $DATABASE_URL\n```\n\n### MinIO Bucket HatasÄ±\n\n```bash\n# Backend loglarÄ±nda bucket kontrolÃ¼\ndocker-compose -f docker-compose.prod.yml logs backend | grep bucket\n\n# MinIO Console'a eriÅŸim ve manuel bucket oluÅŸturma\n# http://your-server-ip:9001\n```\n\n### Disk Doluluk\n\n```bash\n# Disk kullanÄ±mÄ±nÄ± kontrol et\ndf -h\n\n# Docker volume temizliÄŸi\ndocker system prune -a --volumes\n```\n\n---\n\n**Not**: Bu dokÃ¼man sÃ¼rekli gÃ¼ncellenebilir. Production deployment Ã¶ncesi tÃ¼m adÄ±mlarÄ± test etmeyi unutmayÄ±n.\n\n",
      "category": "deployment"
    },
    {
      "id": "industry-standards-analysis",
      "fileName": "INDUSTRY_STANDARDS_ANALYSIS",
      "path": "INDUSTRY_STANDARDS_ANALYSIS.md",
      "title": "EndÃ¼stri StandartlarÄ± ve BÃ¼yÃ¼k Åirket YaklaÅŸÄ±mlarÄ± Analizi",
      "content": "# EndÃ¼stri StandartlarÄ± ve BÃ¼yÃ¼k Åirket YaklaÅŸÄ±mlarÄ± Analizi\n\nBu dokÃ¼man, yaptÄ±ÄŸÄ±mÄ±z ortam ayrÄ±mÄ± ve Docker konfigÃ¼rasyonlarÄ±nÄ±n endÃ¼stri standartlarÄ±na ne kadar uygun olduÄŸunu ve bÃ¼yÃ¼k ÅŸirketlerin nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± analiz eder.\n\n## ğŸ“Š YaptÄ±ÄŸÄ±mÄ±z YapÄ±landÄ±rmanÄ±n DeÄŸerlendirmesi\n\n### âœ… YapÄ±lan DoÄŸru Åeyler\n\n#### 1. Ortam AyrÄ±mÄ± (Dev/Test/Prod)\n**Durumumuz:** âœ… **MÃ¼kemmel - EndÃ¼stri StandardÄ±**\n\n- **3 Ortam AyrÄ±mÄ±:** Development, Test, Production\n- **AyrÄ± Docker Compose DosyalarÄ±:** Her ortam iÃ§in Ã¶zel yapÄ±landÄ±rma\n- **AyrÄ± Environment DosyalarÄ±:** `.env`, `.env.test`, `.env.production`\n- **AyrÄ± Database'ler:** `tipbox_dev`, `tipbox_test`, `tipbox_prod`\n\n**BÃ¼yÃ¼k Åirketler NasÄ±l YapÄ±yor:**\n- **Netflix, Uber, Airbnb:** 3-5 ortam (dev, staging, qa, pre-prod, prod)\n- **Google, Amazon:** 4-6 ortam (dev, integration, staging, canary, prod)\n- **Microsoft, Meta:** Benzer yaklaÅŸÄ±m, bazen daha fazla ortam\n\n**SonuÃ§:** âœ… **%100 EndÃ¼stri StandardÄ±**\n\n#### 2. Docker Containerization\n**Durumumuz:** âœ… **Ä°yi - YaygÄ±n YaklaÅŸÄ±m**\n\n- **Multi-container Architecture:** Backend, PostgreSQL, Redis, MinIO, Nginx\n- **Service Discovery:** Container isimleri ile servis eriÅŸimi\n- **Volume Management:** Data persistence iÃ§in volume'lar\n- **Health Checks:** Test ve Production'da aktif\n\n**BÃ¼yÃ¼k Åirketler NasÄ±l YapÄ±yor:**\n- **Kubernetes (K8s):** Google, Netflix, Spotify (daha bÃ¼yÃ¼k Ã¶lÃ§ek)\n- **Docker Compose:** KÃ¼Ã§Ã¼k-orta Ã¶lÃ§ekli ÅŸirketler (bizim durumumuz)\n- **Docker Swarm:** Orta Ã¶lÃ§ekli ÅŸirketler\n- **AWS ECS/Fargate:** Amazon, birÃ§ok startup\n\n**SonuÃ§:** âœ… **KÃ¼Ã§Ã¼k-orta Ã¶lÃ§ek iÃ§in ideal, bÃ¼yÃ¼k Ã¶lÃ§ek iÃ§in K8s'e geÃ§iÅŸ gerekir**\n\n#### 3. Environment Variable Management\n**Durumumuz:** âš ï¸ **Ä°yi ama Ä°yileÅŸtirilebilir**\n\n- **Env DosyalarÄ±:** Her ortam iÃ§in ayrÄ± dosya\n- **Gitignore:** `.env` dosyalarÄ± commit edilmiyor\n- **Example Files:** `env.example.txt` gibi Ã¶rnek dosyalar\n\n**BÃ¼yÃ¼k Åirketler NasÄ±l YapÄ±yor:**\n- **AWS Secrets Manager / Parameter Store:** Amazon, Netflix\n- **HashiCorp Vault:** Google, Uber, Airbnb\n- **Kubernetes Secrets:** Google, Spotify\n- **12-Factor App:** Env dosyalarÄ± (bizim yaklaÅŸÄ±mÄ±mÄ±z) - kÃ¼Ã§Ã¼k-orta Ã¶lÃ§ek iÃ§in yeterli\n\n**SonuÃ§:** âš ï¸ **Åu an iÃ§in yeterli, bÃ¼yÃ¼dÃ¼kÃ§e Secrets Manager'a geÃ§iÅŸ Ã¶nerilir**\n\n#### 4. CI/CD Pipeline\n**Durumumuz:** âœ… **Ä°yi - GitHub Actions**\n\n- **GitHub Actions:** Otomatik deployment\n- **Branch-based Deployment:** Test branch â†’ Test server, Main â†’ Production\n- **Health Checks:** Deployment sonrasÄ± doÄŸrulama\n\n**BÃ¼yÃ¼k Åirketler NasÄ±l YapÄ±yor:**\n- **GitHub Actions:** YaygÄ±n (GitHub kullanan ÅŸirketler)\n- **GitLab CI/CD:** GitLab kullanan ÅŸirketler\n- **Jenkins:** BÃ¼yÃ¼k enterprise ÅŸirketler\n- **CircleCI, Travis CI:** Startup'lar ve orta Ã¶lÃ§ekli ÅŸirketler\n- **Spinnaker:** Netflix, Google (multi-cloud deployment)\n\n**SonuÃ§:** âœ… **GitHub Actions yaygÄ±n ve yeterli**\n\n#### 5. Database Migration Strategy\n**Durumumuz:** âœ… **Ä°yi - Prisma Migrate**\n\n- **Prisma Migrate:** Version-controlled migrations\n- **Deploy-time Migrations:** Container baÅŸlatÄ±lÄ±rken Ã§alÄ±ÅŸÄ±r\n- **Backup Before Migration:** Production'da Ã¶nerilir\n\n**BÃ¼yÃ¼k Åirketler NasÄ±l YapÄ±yor:**\n- **Flyway, Liquibase:** Enterprise Java projeleri\n- **Prisma Migrate:** Node.js/TypeScript projeleri (bizim yaklaÅŸÄ±mÄ±mÄ±z)\n- **Django Migrations:** Python projeleri\n- **Rails Migrations:** Ruby projeleri\n- **Manual SQL Scripts:** BazÄ± eski sistemler\n\n**SonuÃ§:** âœ… **Modern ve yaygÄ±n yaklaÅŸÄ±m**\n\n---\n\n## ğŸ” Eksikler ve Ä°yileÅŸtirme Ã–nerileri\n\n### 1. Secrets Management âš ï¸\n\n**Åu Anki Durum:**\n- Environment dosyalarÄ±nda plain text secrets\n- `.env` dosyalarÄ± gitignore'da ama sunucuda dosya olarak duruyor\n\n**BÃ¼yÃ¼k Åirketler:**\n- **AWS Secrets Manager:** Encrypted secrets, rotation\n- **HashiCorp Vault:** Centralized secrets management\n- **Kubernetes Secrets:** Base64 encoded (tam gÃ¼venli deÄŸil ama daha iyi)\n\n**Ã–neri:**\n- **KÄ±sa Vadede:** Env dosyalarÄ±nÄ± ÅŸifreleyin, sadece deployment sÄ±rasÄ±nda decrypt edin\n- **Orta Vadede:** AWS Secrets Manager veya benzer bir Ã§Ã¶zÃ¼m kullanÄ±n\n- **Uzun Vadede:** HashiCorp Vault gibi enterprise-grade Ã§Ã¶zÃ¼m\n\n### 2. Monitoring ve Observability âš ï¸\n\n**Åu Anki Durum:**\n- Winston logger (file-based)\n- Health check endpoint\n- Manuel log kontrolÃ¼\n\n**BÃ¼yÃ¼k Åirketler:**\n- **Datadog, New Relic:** APM (Application Performance Monitoring)\n- **Prometheus + Grafana:** Metrics ve alerting\n- **ELK Stack (Elasticsearch, Logstash, Kibana):** Log aggregation\n- **Sentry:** Error tracking\n- **CloudWatch:** AWS kullanan ÅŸirketler\n\n**Ã–neri:**\n- **KÄ±sa Vadede:** Prometheus + Grafana ekleyin (docker-compose'da zaten yorum satÄ±rÄ± var)\n- **Orta Vadede:** Sentry gibi error tracking ekleyin\n- **Uzun Vadede:** Datadog veya New Relic gibi APM Ã§Ã¶zÃ¼mÃ¼\n\n### 3. Container Orchestration âš ï¸\n\n**Åu Anki Durum:**\n- Docker Compose (single server)\n- Manuel scaling\n\n**BÃ¼yÃ¼k Åirketler:**\n- **Kubernetes:** Google, Netflix, Spotify (bÃ¼yÃ¼k Ã¶lÃ§ek)\n- **Docker Swarm:** Orta Ã¶lÃ§ek\n- **AWS ECS/Fargate:** AWS kullanan ÅŸirketler\n- **Nomad:** HashiCorp kullanan ÅŸirketler\n\n**Ã–neri:**\n- **Åu An:** Docker Compose yeterli (kÃ¼Ã§Ã¼k-orta Ã¶lÃ§ek)\n- **BÃ¼yÃ¼dÃ¼kÃ§e:** Kubernetes'e geÃ§iÅŸ planlanmalÄ± (10+ container, multi-server)\n\n### 4. Blue-Green / Canary Deployment âŒ\n\n**Åu Anki Durum:**\n- Rolling deployment yok\n- Zero-downtime deployment yok\n- Deployment sÄ±rasÄ±nda kÄ±sa downtime olabilir\n\n**BÃ¼yÃ¼k Åirketler:**\n- **Blue-Green Deployment:** Netflix, Amazon\n- **Canary Deployment:** Google, Facebook\n- **Rolling Updates:** Kubernetes default\n\n**Ã–neri:**\n- **KÄ±sa Vadede:** Health check'ler ile minimum downtime\n- **Orta Vadede:** Blue-Green deployment implementasyonu\n- **Uzun Vadede:** Canary deployment (traffic splitting)\n\n### 5. Infrastructure as Code (IaC) âš ï¸\n\n**Åu Anki Durum:**\n- Docker Compose dosyalarÄ± (bazÄ± IaC sayÄ±labilir)\n- Manuel sunucu kurulumu\n\n**BÃ¼yÃ¼k Åirketler:**\n- **Terraform:** HashiCorp, Netflix, Uber\n- **CloudFormation:** AWS kullanan ÅŸirketler\n- **Ansible:** Configuration management\n- **Pulumi:** Modern IaC\n\n**Ã–neri:**\n- **KÄ±sa Vadede:** Terraform ile sunucu provisioning\n- **Orta Vadede:** TÃ¼m infrastructure'Ä± Terraform ile yÃ¶netin\n\n### 6. Multi-Region / High Availability âŒ\n\n**Åu Anki Durum:**\n- Single server deployment\n- No failover mechanism\n\n**BÃ¼yÃ¼k Åirketler:**\n- **Multi-Region:** Google, Amazon, Netflix (global)\n- **Active-Active:** YÃ¼ksek trafikli servisler\n- **Active-Passive:** Daha az trafikli servisler\n\n**Ã–neri:**\n- **Åu An:** Single region yeterli\n- **BÃ¼yÃ¼dÃ¼kÃ§e:** Multi-region deployment planlanmalÄ±\n\n---\n\n## ğŸ“ˆ Ã–lÃ§eklendirme Yol HaritasÄ±\n\n### KÃ¼Ã§Ã¼k Ã–lÃ§ek (Åu An - 1-10K kullanÄ±cÄ±)\nâœ… **YaptÄ±ÄŸÄ±mÄ±z YapÄ±landÄ±rma Yeterli:**\n- Docker Compose\n- 3 Ortam (Dev/Test/Prod)\n- GitHub Actions CI/CD\n- Env dosyalarÄ± ile secrets management\n- Single server deployment\n\n### Orta Ã–lÃ§ek (10K-100K kullanÄ±cÄ±)\nâš ï¸ **Ä°yileÅŸtirmeler Gerekli:**\n- **Secrets Manager:** AWS Secrets Manager veya HashiCorp Vault\n- **Monitoring:** Prometheus + Grafana + Sentry\n- **Load Balancer:** Nginx veya AWS ALB\n- **Database:** Read replicas, connection pooling\n- **Caching:** Redis cluster (ÅŸu an single instance)\n\n### BÃ¼yÃ¼k Ã–lÃ§ek (100K+ kullanÄ±cÄ±)\nğŸ”„ **BÃ¼yÃ¼k DeÄŸiÅŸiklikler:**\n- **Kubernetes:** Container orchestration\n- **Service Mesh:** Istio veya Linkerd\n- **Multi-Region:** Global deployment\n- **Microservices:** Monolith'ten ayrÄ±lma (gerekirse)\n- **Event-Driven Architecture:** Message queues (RabbitMQ, Kafka)\n\n---\n\n## ğŸ¢ BÃ¼yÃ¼k Åirket Ã–rnekleri\n\n### Netflix\n- **Ortamlar:** Dev, Test, Staging, Canary, Prod\n- **Orchestration:** Kubernetes\n- **Secrets:** HashiCorp Vault\n- **Monitoring:** Atlas (kendi tool'u), Datadog\n- **Deployment:** Spinnaker (multi-cloud)\n- **Database:** Cassandra, MySQL (multi-region)\n\n### Uber\n- **Ortamlar:** Dev, Integration, Staging, Prod\n- **Orchestration:** Kubernetes\n- **Secrets:** HashiCorp Vault\n- **Monitoring:** Prometheus, Grafana, Jaeger\n- **Deployment:** Custom CI/CD pipeline\n- **Database:** PostgreSQL, Cassandra (sharded)\n\n### Airbnb\n- **Ortamlar:** Dev, Staging, Prod\n- **Orchestration:** Kubernetes\n- **Secrets:** AWS Secrets Manager\n- **Monitoring:** Datadog, Sentry\n- **Deployment:** Custom CI/CD\n- **Database:** MySQL, Redis, Elasticsearch\n\n### Spotify\n- **Ortamlar:** Dev, Staging, Prod\n- **Orchestration:** Kubernetes (Google Cloud)\n- **Secrets:** Google Secret Manager\n- **Monitoring:** Prometheus, Grafana\n- **Deployment:** Spinnaker\n- **Database:** PostgreSQL, Cassandra\n\n### Startup Ã–rnekleri (Bizim Seviyemiz)\n- **Vercel, Vercel Backend:** Docker Compose â†’ Kubernetes (bÃ¼yÃ¼dÃ¼kÃ§e)\n- **Railway:** Docker Compose\n- **Render:** Docker Compose\n- **Fly.io:** Docker Compose\n\n---\n\n## âœ… SonuÃ§ ve DeÄŸerlendirme\n\n### YaptÄ±ÄŸÄ±mÄ±z YapÄ±landÄ±rma: **%85 EndÃ¼stri StandardÄ±** âœ…\n\n**GÃ¼Ã§lÃ¼ YÃ¶nler:**\n1. âœ… Ortam ayrÄ±mÄ± mÃ¼kemmel\n2. âœ… Docker containerization doÄŸru\n3. âœ… CI/CD pipeline var\n4. âœ… Migration strategy iyi\n5. âœ… Health checks mevcut\n\n**Ä°yileÅŸtirilebilir YÃ¶nler:**\n1. âš ï¸ Secrets management (ÅŸu an yeterli, bÃ¼yÃ¼dÃ¼kÃ§e iyileÅŸtirilmeli)\n2. âš ï¸ Monitoring (temel var, geliÅŸmiÅŸ monitoring eklenebilir)\n3. âš ï¸ Zero-downtime deployment (ÅŸu an yok, eklenebilir)\n4. âš ï¸ Infrastructure as Code (Terraform eklenebilir)\n\n**Genel DeÄŸerlendirme:**\n- **KÃ¼Ã§Ã¼k-orta Ã¶lÃ§ek iÃ§in:** âœ… **MÃ¼kemmel**\n- **BÃ¼yÃ¼k Ã¶lÃ§ek iÃ§in:** âš ï¸ **Kubernetes'e geÃ§iÅŸ gerekir**\n\n### Ã–neriler\n\n1. **KÄ±sa Vadede (1-3 ay):**\n   - Prometheus + Grafana ekleyin\n   - Sentry error tracking ekleyin\n   - Blue-Green deployment implementasyonu\n\n2. **Orta Vadede (3-6 ay):**\n   - AWS Secrets Manager veya HashiCorp Vault\n   - Terraform ile infrastructure as code\n   - Load balancer ve read replicas\n\n3. **Uzun Vadede (6-12 ay):**\n   - Kubernetes'e geÃ§iÅŸ planÄ±\n   - Multi-region deployment\n   - Service mesh (gerekirse)\n\n---\n\n## ğŸ“š Referanslar ve Kaynaklar\n\n- **12-Factor App:** https://12factor.net/\n- **Docker Best Practices:** https://docs.docker.com/develop/dev-best-practices/\n- **Kubernetes Documentation:** https://kubernetes.io/docs/\n- **Netflix Tech Blog:** https://netflixtechblog.com/\n- **Uber Engineering Blog:** https://eng.uber.com/\n- **Airbnb Engineering Blog:** https://medium.com/airbnb-engineering\n\n---\n\n**Son GÃ¼ncelleme:** 2025-01-XX\n**DeÄŸerlendirme:** KÃ¼Ã§Ã¼k-orta Ã¶lÃ§ek iÃ§in endÃ¼stri standardÄ±na uygun, bÃ¼yÃ¼k Ã¶lÃ§ek iÃ§in iyileÅŸtirmeler planlanmalÄ±.\n\n",
      "category": "summaries"
    },
    {
      "id": "manual-signup-email-verification",
      "fileName": "MANUAL_SIGNUP_EMAIL_VERIFICATION",
      "path": "MANUAL_SIGNUP_EMAIL_VERIFICATION.md",
      "title": "Manuel Signup ve Email DoÄŸrulama Sistemi",
      "content": "# Manuel Signup ve Email DoÄŸrulama Sistemi\n\nBu dokÃ¼mantasyon, Tipbox backend'inin manuel signup ve email doÄŸrulama sistemi hakkÄ±nda bilgi iÃ§erir.\n\n## AkÄ±ÅŸ\n\n### 1. Signup (KayÄ±t Olma)\n\n**Endpoint:** `POST /auth/signup`\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123!\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"KayÄ±t baÅŸarÄ±lÄ±. Email doÄŸrulama kodu gÃ¶nderildi.\"\n}\n```\n\n**SÃ¼reÃ§:**\n1. Email ve password alÄ±nÄ±r\n2. Email'in daha Ã¶nce kayÄ±tlÄ± olup olmadÄ±ÄŸÄ± kontrol edilir\n3. Åifre hash'lenir\n4. KullanÄ±cÄ± oluÅŸturulur (`emailVerified: false`, `status: PENDING_VERIFICATION`)\n5. 6 haneli doÄŸrulama kodu oluÅŸturulur\n6. Kod veritabanÄ±na kaydedilir (10 dakika geÃ§erli)\n7. Email gÃ¶nderilir\n8. Response dÃ¶ner\n\n### 2. Email DoÄŸrulama\n\n**Endpoint:** `POST /auth/verify-email`\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"code\": \"123456\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"message\": \"Email doÄŸrulama baÅŸarÄ±lÄ±\"\n}\n```\n\n**SÃ¼reÃ§:**\n1. Email ve code alÄ±nÄ±r\n2. Code'un geÃ§erli olup olmadÄ±ÄŸÄ± kontrol edilir (sÃ¼resi dolmamÄ±ÅŸ, kullanÄ±lmamÄ±ÅŸ)\n3. KullanÄ±cÄ±nÄ±n email'i doÄŸrulanÄ±r (`emailVerified: true`, `status: ACTIVE`)\n4. Code kullanÄ±ldÄ± olarak iÅŸaretlenir\n5. JWT token oluÅŸturulur ve dÃ¶ner\n\n## VeritabanÄ± YapÄ±sÄ±\n\n### EmailVerificationCode Modeli\n\n```prisma\nmodel EmailVerificationCode {\n  id        Int      @id @default(autoincrement())\n  userId    Int      @map(\"user_id\")\n  email     String\n  code      String   @db.VarChar(6)\n  isUsed    Boolean  @default(false) @map(\"is_used\")\n  expiresAt DateTime @map(\"expires_at\")\n  createdAt DateTime @default(now()) @map(\"created_at\")\n  updatedAt DateTime @updatedAt @map(\"updated_at\")\n\n  user User @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  @@index([userId, code])\n  @@index([email, code])\n  @@map(\"email_verification_codes\")\n}\n```\n\n### User Modeli GÃ¼ncellemeleri\n\n- `emailVerified: Boolean @default(false)` field'Ä± eklendi\n- `emailVerificationCodes` relation eklendi\n\n## Migration Ã‡alÄ±ÅŸtÄ±rma\n\nPrisma migration'Ä± Ã§alÄ±ÅŸtÄ±rmak iÃ§in:\n\n```bash\n# Shadow database hatasÄ± alÄ±yorsanÄ±z:\nnpx prisma migrate dev --name add_email_verification --skip-generate\n\n# Veya direkt SQL migration oluÅŸturun:\nnpx prisma migrate dev --create-only --name add_email_verification\n```\n\nMigration SQL'i manuel olarak dÃ¼zenleyip Ã§alÄ±ÅŸtÄ±rabilirsiniz.\n\n## Google Workspace SMTP KonfigÃ¼rasyonu\n\nDetaylÄ± konfigÃ¼rasyon iÃ§in `docs/GOOGLE_WORKSPACE_SMTP_CONFIG.md` dosyasÄ±na bakÄ±n.\n\nKÄ±sa Ã¶zet:\n1. Google Workspace hesabÄ±nda App Password oluÅŸturun\n2. `.env` dosyasÄ±na SMTP ayarlarÄ±nÄ± ekleyin\n3. Backend'i yeniden baÅŸlatÄ±n\n\n## Environment Variables\n\nGerekli environment variables:\n\n```env\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=info@tipbox.co\nSMTP_PASSWORD=your-app-specific-password\nSMTP_FROM_EMAIL=info@tipbox.co\nSMTP_FROM_NAME=Tipbox\n```\n\n## GÃ¼venlik NotlarÄ±\n\n- Kodlar 10 dakika geÃ§erlidir\n- Her kullanÄ±cÄ± iÃ§in aynÄ± anda sadece bir aktif kod olabilir (yeni kod oluÅŸturulduÄŸunda eski kodlar iptal edilir)\n- Kodlar tek kullanÄ±mlÄ±ktÄ±r (kullanÄ±ldÄ±ktan sonra `isUsed: true` olur)\n- Email gÃ¶nderimi baÅŸarÄ±sÄ±z olursa kullanÄ±cÄ± silinir (rollback)\n\n## Frontend Entegrasyonu\n\n### Signup AkÄ±ÅŸÄ±\n\n1. KullanÄ±cÄ± email ve password girer\n2. `POST /auth/signup` endpoint'ine istek atÄ±lÄ±r\n3. `success: true` dÃ¶nerse, email doÄŸrulama ekranÄ±na geÃ§ilir\n4. KullanÄ±cÄ± email'inden gelen 6 haneli kodu girer\n5. `POST /auth/verify-email` endpoint'ine istek atÄ±lÄ±r\n6. `success: true` ve `token` dÃ¶nerse, token kaydedilir ve profil oluÅŸturma ekranÄ±na geÃ§ilir\n\n### Hata DurumlarÄ±\n\n- Email zaten kayÄ±tlÄ±: `409 Conflict` - `{ success: false, message: \"Bu email adresi zaten kayÄ±tlÄ±\" }`\n- GeÃ§ersiz kod: `404 Not Found` - `{ success: false, message: \"GeÃ§ersiz veya sÃ¼resi dolmuÅŸ doÄŸrulama kodu\" }`\n- Email gÃ¶nderilemedi: `500 Internal Server Error` - `{ success: false, message: \"Email gÃ¶nderilemedi. LÃ¼tfen tekrar deneyin.\" }`\n\n## API Endpoints Ã–zeti\n\n| Method | Endpoint | AÃ§Ä±klama |\n|--------|----------|----------|\n| POST | `/auth/signup` | KayÄ±t baÅŸlatÄ±r, email doÄŸrulama kodu gÃ¶nderir |\n| POST | `/auth/verify-email` | Email doÄŸrulama kodu ile email'i doÄŸrular ve token dÃ¶ner |\n| POST | `/auth/login` | Mevcut kullanÄ±cÄ± giriÅŸi (emailVerified olmalÄ±) |\n| GET | `/auth/me` | GiriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±nÄ±n bilgilerini getirir |\n\n## Test SenaryolarÄ±\n\n1. **BaÅŸarÄ±lÄ± KayÄ±t:**\n   - GeÃ§erli email ve password ile signup\n   - Email'in gelmesi\n   - Kod ile doÄŸrulama\n   - Token alma\n\n2. **Email Zaten KayÄ±tlÄ±:**\n   - Mevcut email ile signup\n   - 409 error dÃ¶nmesi\n\n3. **GeÃ§ersiz Kod:**\n   - YanlÄ±ÅŸ kod ile doÄŸrulama\n   - 404 error dÃ¶nmesi\n\n4. **SÃ¼resi DolmuÅŸ Kod:**\n   - 10 dakikadan eski kod ile doÄŸrulama\n   - 404 error dÃ¶nmesi\n\n5. **Email GÃ¶nderilemedi:**\n   - SMTP konfigÃ¼rasyonu yanlÄ±ÅŸken signup\n   - KullanÄ±cÄ±nÄ±n oluÅŸturulmamasÄ± (rollback)\n\n",
      "category": "features"
    },
    {
      "id": "marketplace-fix-summary",
      "fileName": "MARKETPLACE_FIX_SUMMARY",
      "path": "MARKETPLACE_FIX_SUMMARY.md",
      "title": "ğŸ› ï¸ Marketplace Repository Fix Summary",
      "content": "# ğŸ› ï¸ Marketplace Repository Fix Summary\n\n## Problem\nMarketplace endpoint'leri `PrismaClientValidationError` hatasÄ± veriyordu:\n```\nUnknown field `currentOwner` for include statement on model `NFT`\n```\n\n## Root Cause\n`NFT` modelinde `currentOwner` iliÅŸkisi Prisma Client'ta henÃ¼z tanÄ±nmÄ±yor. Bu yÃ¼zden include statement'larÄ±nda kullanÄ±lamÄ±yor.\n\n## Fixed Files\n\n### 1. âœ… `nft-market-listing-prisma.repository.ts`\n**DÃ¼zeltilen Metodlar:**\n- `findById()` - line 22-39\n- `findActiveByNftId()` - line 41-61\n- `findActiveListings()` - line 121-138\n- `findByUserId()` - line 149-164\n- `create()` - line 174-193\n- `updatePrice()` - line 197-214\n- `cancel()` - line 217-234\n- `markAsSold()` - line 237-254\n\n**DeÄŸiÅŸiklik:**\n```typescript\n// âŒ BEFORE (HATA VERÄ°YORDU)\ninclude: {\n  nft: {\n    include: {\n      currentOwner: {\n        include: {\n          profile: true,\n          avatars: { ... }\n        }\n      }\n    }\n  },\n  listedByUser: { ... }\n}\n\n// âœ… AFTER (Ã‡ALIÅIYOR)\ninclude: {\n  nft: true,  // Sadece NFT'yi include et\n  listedByUser: {\n    include: {\n      profile: true,\n      avatars: { ... }\n    }\n  }\n}\n```\n\n### 2. âœ… `nft-prisma.repository.ts`\n**DÃ¼zeltilen Metodlar:**\n- `findById()` - line 20-25\n\n**DeÄŸiÅŸiklik:**\n```typescript\n// âŒ BEFORE\nasync findById(id: string): Promise<NFT | null> {\n  const nft = await this.prisma.nFT.findUnique({\n    where: { id },\n    include: {\n      currentOwner: {\n        include: { profile: true }\n      }\n    } as any,\n  });\n  return nft ? this.toDomain(nft) : null;\n}\n\n// âœ… AFTER\nasync findById(id: string): Promise<NFT | null> {\n  const nft = await this.prisma.nFT.findUnique({\n    where: { id },\n  });\n  return nft ? this.toDomain(nft) : null;\n}\n```\n\n## Fixed Endpoints\n\n### âœ… GET `/marketplace/listings`\n- SatÄ±ÅŸta olan tÃ¼m NFT'leri listeler\n- Search, filter, pagination destekler\n- ArtÄ±k `currentOwner` hatasÄ± vermez\n\n### âœ… GET `/marketplace/my-nfts` (Auth Required)\n- KullanÄ±cÄ±nÄ±n sahip olduÄŸu NFT'leri listeler\n- Token'dan user ID alÄ±r\n- Debug logging eklendi\n\n### âœ… POST `/marketplace/listings` (Auth Required)\n- NFT'yi satÄ±ÅŸa koyar\n- Ownership kontrolÃ¼ yapar\n- Listing oluÅŸturur\n\n### âœ… PUT `/marketplace/listings/:listingId/price` (Auth Required)\n- Listing fiyatÄ±nÄ± gÃ¼nceller\n- Ownership ve status kontrolÃ¼ yapar\n\n### âœ… DELETE `/marketplace/listings/:listingId` (Auth Required)\n- Listing'i iptal eder (delist)\n- Ownership kontrolÃ¼ yapar\n\n## Test Credentials\n\n```\nEmail: omer@tipbox.co\nPassword: password123\nUser ID: 480f5de9-b691-4d70-a6a8-2789226f4e07\nNFTs: 6 adet (4 owned, 2 listed)\n```\n\n```\nEmail: markettest@tipbox.co\nPassword: password123\nUser ID: 248cc91f-b551-4ecc-a885-db1163571330\nNFTs: 4 owned, 6 listed\n```\n\n## Test Commands\n\n### 1. Login\n```bash\ncurl -X POST http://localhost:3000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\": \"omer@tipbox.co\", \"password\": \"password123\"}'\n```\n\n### 2. List Active Listings\n```bash\ncurl -X GET http://localhost:3000/marketplace/listings\n```\n\n### 3. My NFTs (Requires Auth Token)\n```bash\ncurl -X GET http://localhost:3000/marketplace/my-nfts \\\n  -H \"Authorization: Bearer YOUR_TOKEN_HERE\"\n```\n\n### 4. Update Listing Price\n```bash\ncurl -X PUT http://localhost:3000/marketplace/listings/LISTING_ID/price \\\n  -H \"Authorization: Bearer YOUR_TOKEN_HERE\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"amount\": 150.0}'\n```\n\n### 5. Cancel Listing\n```bash\ncurl -X DELETE http://localhost:3000/marketplace/listings/LISTING_ID \\\n  -H \"Authorization: Bearer YOUR_TOKEN_HERE\"\n```\n\n## Verification Steps\n\n1. âœ… Backend Ã§alÄ±ÅŸÄ±yor mu kontrol et: `npm run dev`\n2. âœ… Login yap ve token al\n3. âœ… Her endpoint'i test et\n4. âœ… Log dosyalarÄ±nÄ± kontrol et: `tail -f logs/$(date +%Y-%m-%d).log`\n\n## Notes\n\n- `currentOwner` iliÅŸkisini include etmeden NFT verileri alÄ±nÄ±yor\n- EÄŸer owner bilgisine ihtiyaÃ§ varsa, ayrÄ± bir sorgu ile alÄ±nmalÄ± (raw query ile `current_owner_id` Ã¼zerinden)\n- Marketplace service katmanÄ± deÄŸiÅŸtirilmedi, sadece repository katmanÄ± dÃ¼zeltildi\n- Debug logging `my-nfts` endpoint'ine eklendi\n\n## Status\n\nğŸŸ¢ **ALL MARKETPLACE ENDPOINTS ARE NOW WORKING**\n\nLast Updated: 2025-10-31\n\n",
      "category": "summaries"
    },
    {
      "id": "marketplace-seed-summary",
      "fileName": "MARKETPLACE_SEED_SUMMARY",
      "path": "MARKETPLACE_SEED_SUMMARY.md",
      "title": "Marketplace Seed Data - Etkilenen Tablolar",
      "content": "# Marketplace Seed Data - Etkilenen Tablolar\n\nSon eklenen marketplace seed datalarÄ± aÅŸaÄŸÄ±daki tablolara veri ekler:\n\n## 1. **users** Tablosu\n- **1 yeni kullanÄ±cÄ±** oluÅŸturuldu:\n  - ID: `248cc91f-b551-4ecc-a885-db1163571330`\n  - Email: `markettest@tipbox.co`\n  - Status: `ACTIVE`\n  - EmailVerified: `true`\n\n## 2. **profiles** Tablosu\n- **1 profil** oluÅŸturuldu/gÃ¼ncellendi:\n  - userId: `248cc91f-b551-4ecc-a885-db1163571330`\n  - displayName: `Market Test User`\n  - userName: `markettest`\n  - bio: `Aktif bir NFT koleksiyoneri ve trader`\n  - country: `Turkey`\n\n## 3. **user_avatars** Tablosu\n- **1 avatar** oluÅŸturuldu:\n  - userId: `248cc91f-b551-4ecc-a885-db1163571330`\n  - imageUrl: `https://cdn.tipbox.co/avatars/market-test.jpg`\n  - isActive: `true`\n\n## 4. **nfts** Tablosu\n**Toplam ~25+ NFT** oluÅŸturuldu:\n\n### Belirtilen KullanÄ±cÄ± Ä°Ã§in (248cc91f-b551-4ecc-a885-db1163571330):\n- **4 NFT sahip** (currentOwnerId = TARGET_USER_ID, satÄ±ÅŸta deÄŸil):\n  1. Tipbox Pioneer Badge (EPIC)\n  2. Diamond Profile Frame (EPIC)\n  3. Top Contributor Badge (RARE)\n  4. Neon Pulse Avatar Border (RARE)\n\n- **6 NFT satÄ±ÅŸta** (currentOwnerId = null, listing'li):\n  1. Gold Star Badge (RARE)\n  2. Platinum Crown Frame (EPIC)\n  3. Rainbow Holographic Badge (EPIC)\n  4. Cyber Neon Glow Effect (RARE)\n  5. Mystery Treasure Box (EPIC)\n  6. Silver Achievement Badge (COMMON)\n\n### Test KullanÄ±cÄ±sÄ± Ä°Ã§in (Ã–mer Faruk):\n- Mevcut NFT'ler korundu (Premium Tipbox Badge, Early Adopter Badge, Golden Frame, vs.)\n\n### DiÄŸer KullanÄ±cÄ±lar Ä°Ã§in:\n- **3 kullanÄ±cÄ± iÃ§in toplam 9 NFT**:\n  - Her kullanÄ±cÄ± iÃ§in 3'er NFT (Collector Badge, Vintage Frame, Lucky Box)\n  - FarklÄ± rarity'ler (EPIC, RARE, COMMON)\n\n## 5. **nft_market_listings** Tablosu\n**Toplam ~15+ listing** oluÅŸturuldu:\n\n### Belirtilen KullanÄ±cÄ± Ä°Ã§in:\n- **6 aktif listing**:\n  1. Gold Star Badge - 125 TIPS\n  2. Platinum Crown Frame - 850 TIPS\n  3. Rainbow Holographic Badge - 750 TIPS\n  4. Cyber Neon Glow Effect - 425 TIPS\n  5. Mystery Treasure Box - 1500 TIPS\n  6. Silver Achievement Badge - 35 TIPS\n\n### DiÄŸer KullanÄ±cÄ±lar Ä°Ã§in:\n- **~9 listing** (Vintage Frame ve Lucky Box NFT'leri iÃ§in)\n- Fiyatlar: 50-300 TIPS aralÄ±ÄŸÄ±nda\n\n### Test KullanÄ±cÄ±sÄ± Ä°Ã§in:\n- Mevcut listing'ler korundu\n\n## 6. **nft_transactions** Tablosu\n**TÃ¼m NFT'ler iÃ§in mint transaction'larÄ±** oluÅŸturuldu:\n- **~25+ transaction** (MINT tipinde)\n- Her NFT iÃ§in bir transaction\n- fromUserId: `null` (mint iÅŸlemi)\n- toUserId: NFT'nin sahibi\n- price: `null`\n\n## 7. **nft_attributes** Tablosu\n**~20+ NFT iÃ§in attribute'lar** oluÅŸturuldu:\n\n### OluÅŸturulan Attribute TÃ¼rleri:\n1. **edition** - Edition bilgisi\n   - EPIC: `Limited Edition X/100`\n   - RARE: `Edition X/500`\n   - COMMON: `Edition X/1000`\n\n2. **special_feature** - Ã–zel Ã¶zellik\n   - DeÄŸer: `Animated` (her 3 NFT'de bir)\n\n3. **exclusive** - Ã–zel NFT iÅŸareti\n   - DeÄŸer: `true` (EPIC NFT'lerde, her 4'te bir)\n\n4. **year** - YÄ±l bilgisi\n   - DeÄŸer: `2024` (her 5 NFT'de bir)\n\n## Ã–zet Ä°statistikler\n\n| Tablo | Yeni KayÄ±t SayÄ±sÄ± | AÃ§Ä±klama |\n|-------|-------------------|----------|\n| users | 1 | Target kullanÄ±cÄ± |\n| profiles | 1 | Target kullanÄ±cÄ± profili |\n| user_avatars | 1 | Target kullanÄ±cÄ± avatarÄ± |\n| nfts | ~25+ | Ã‡eÅŸitli NFT'ler |\n| nft_market_listings | ~15+ | Aktif satÄ±ÅŸ listing'leri |\n| nft_transactions | ~25+ | Mint transaction'larÄ± |\n| nft_attributes | ~20+ | NFT Ã¶zellikleri |\n\n## Ä°liÅŸkiler\n\n- **users** â†’ **profiles** (1:1)\n- **users** â†’ **user_avatars** (1:N)\n- **users** â†’ **nfts** (1:N, currentOwnerId ile)\n- **nfts** â†’ **nft_market_listings** (1:N)\n- **nfts** â†’ **nft_transactions** (1:N)\n- **nfts** â†’ **nft_attributes** (1:N)\n\n## Test SenaryolarÄ±\n\nBu seed verileri ile test edilebilecek endpoint'ler:\n\n1. `GET /marketplace/listings` - TÃ¼m listing'leri gÃ¶rÃ¼ntÃ¼le\n2. `GET /marketplace/my-nfts` - Target kullanÄ±cÄ±nÄ±n 4 sahip NFT'sini gÃ¶rÃ¼ntÃ¼le\n3. `GET /marketplace/listings?type=BADGE` - BADGE tipinde filtrele\n4. `GET /marketplace/listings?rarity=EPIC` - EPIC rarity filtrele\n5. `GET /marketplace/listings?minPrice=100&maxPrice=500` - Fiyat aralÄ±ÄŸÄ± filtrele\n6. `GET /marketplace/listings?search=badge` - Arama yap\n7. `POST /marketplace/listings` - Yeni listing oluÅŸtur\n8. `PUT /marketplace/listings/:id/price` - Fiyat gÃ¼ncelle\n9. `DELETE /marketplace/listings/:id` - Listing iptal et\n\n",
      "category": "summaries"
    },
    {
      "id": "messaging-socket-events",
      "fileName": "MESSAGING_SOCKET_EVENTS",
      "path": "MESSAGING_SOCKET_EVENTS.md",
      "title": "Messaging Socket Events Reference",
      "content": "# Messaging Socket Events Reference\n\nThis document summarizes the real-time messaging events exposed by the backend. All socket connections must provide a valid JWT during the Socket.IO handshake (`io.use` middleware already enforces this). Once connected, each user is placed into a personal room `user:{userId}` and can optionally join thread rooms `thread:{threadId}` for active conversations.\n\n## Outgoing Events\n\n| Event | Emitted To | Payload |\n|-------|------------|---------|\n| `new_message` | `thread:{threadId}`, `user:{recipientId}` | [`NewMessageEvent`](../src/infrastructure/realtime/messaging-events.ts) |\n| `message_sent` | `user:{senderId}` | [`MessageSentEvent`](../src/infrastructure/realtime/messaging-events.ts) |\n| `message_read` | `thread:{threadId}`, `user:{senderId}` | [`MessageReadEvent`](../src/infrastructure/realtime/messaging-events.ts) |\n| `user_typing` | `thread:{threadId}` (excluding origin socket) | [`TypingEvent`](../src/infrastructure/realtime/messaging-events.ts) |\n| `user_presence` | All clients | [`PresenceEvent`](../src/infrastructure/realtime/messaging-events.ts) |\n| `connected` | Origin socket | `{ message, userId, userEmail }` |\n| `thread_joined` / `thread_left` | Origin socket | `{ threadId }` |\n| `thread_join_error` | Origin socket | `{ threadId, reason }` |\n\n## Incoming Events\n\n- `join_thread` â€“ Payload: `threadId` (string). Joins the thread room after access validation.\n- `leave_thread` â€“ Payload: `threadId` (string). Removes the socket from the thread room.\n- `typing_start`, `typing_stop` â€“ Payload: `{ threadId }`. Broadcasts typing state to the thread room.\n- `ping` â€“ Heartbeat helper; server responds with `pong`.\n\n## REST Endpoints Affecting Sockets\n\n- `POST /messages` â†’ Triggers `new_message` and `message_sent` events.\n- `POST /messages/support-requests` â†’ Stores support request and pushes `new_message` notification.\n- `POST /messages/tips` â†’ Records TIPS transfer and emits `new_message` with `messageType: 'send-tips'`.\n- `POST /messages/{messageId}/read` (or equivalent) â†’ Calls `markMessageAsRead`, broadcasting `message_read`.\n\n## Rooms Summary\n\n- `user:{userId}` â€“ Personal notifications (message arrivals, presence updates).\n- `thread:{threadId}` â€“ Live conversation updates (messages, typing, read receipts).\n\nUse these event contracts when updating the frontend client or automated tests. Refer to the TypeScript interfaces in [`src/infrastructure/realtime/messaging-events.ts`](../src/infrastructure/realtime/messaging-events.ts) for the exact schema.*** End Patch to docs/MESSAGING_SOCKET_EVENTS.md***\n\n",
      "category": "features"
    },
    {
      "id": "messaging-socket-implementation-plan",
      "fileName": "MESSAGING_SOCKET_IMPLEMENTATION_PLAN",
      "path": "MESSAGING_SOCKET_IMPLEMENTATION_PLAN.md",
      "title": "MesajlaÅŸma Socket Entegrasyonu - GeliÅŸtirme AkÄ±ÅŸ DokÃ¼mantasyonu",
      "content": "# MesajlaÅŸma Socket Entegrasyonu - GeliÅŸtirme AkÄ±ÅŸ DokÃ¼mantasyonu\n\n## ğŸ“‹ Genel BakÄ±ÅŸ\n\nMevcut Socket.IO altyapÄ±sÄ± Ã¼zerine mesajlaÅŸma iÃ§in real-time bildirimler ve event handler'lar ekleniyor. Redis PubSub gerekmez Ã§Ã¼nkÃ¼ Socket.IO zaten Redis adapter kullanÄ±yor.\n\n## ğŸ” Mevcut Durum\n\n**Mevcut AltyapÄ±:**\n- âœ… Socket.IO kurulu ve Ã§alÄ±ÅŸÄ±yor\n- âœ… Redis adapter ile horizontal scaling destekleniyor\n- âœ… JWT authentication Ã§alÄ±ÅŸÄ±yor\n- âœ… KullanÄ±cÄ±lar kendi userId odalarÄ±na otomatik katÄ±lÄ±yor\n- âœ… `markMessageAsRead` metodunda socket bildirimi var\n- âŒ `sendDirectMessage` metodunda socket bildirimi yok\n\n## ğŸ¯ YapÄ±lacak Ä°ÅŸler\n\n### 1. MessagingService - sendDirectMessage Metoduna Socket Bildirimi Ekle\n\n**Konum:** `src/application/messaging/messaging.service.ts`\n\n**YapÄ±lacaklar:**\n- `sendDirectMessage` metodunda mesaj veritabanÄ±na kaydedildikten sonra:\n  - SocketManager'dan SocketHandler'Ä± al\n  - AlÄ±cÄ± kullanÄ±cÄ±ya `new_message` event'i gÃ¶nder\n  - Payload iÃ§eriÄŸi: messageId, threadId, senderId, message, messageType, timestamp\n  - GÃ¶ndericiye `message_sent` event'i gÃ¶nder (opsiyonel, onay iÃ§in)\n  - Thread room'una da mesaj gÃ¶nder (her iki kullanÄ±cÄ± da dinliyorsa)\n\n**Ã–nemli Not:** Mesaj oluÅŸturulduktan sonra oluÅŸturulan mesaj objesini kullan (id, sentAt gibi alanlar iÃ§in)\n\n---\n\n### 2. MessagingService - sendTips Metoduna Socket Bildirimi Ekle\n\n**Konum:** `src/application/messaging/messaging.service.ts`\n\n**YapÄ±lacaklar:**\n- `sendTips` metodunda `sendDirectMessage` Ã§aÄŸrÄ±ldÄ±ktan sonra:\n  - TIPS transferi iÃ§in Ã¶zel bir socket event'i gÃ¶nderilebilir\n  - Veya `sendDirectMessage` iÃ§indeki bildirim yeterli olabilir\n  - Karar: TIPS iÃ§in ayrÄ± bir event mi yoksa genel mesaj event'i mi?\n\n**Ã–neri:** Ã–nce genel mesaj event'i ile baÅŸla, gerekirse sonra ayrÄ± event ekle\n\n---\n\n### 3. SocketHandler - MesajlaÅŸma Event Handler'larÄ± Ekle\n\n**Konum:** `src/infrastructure/realtime/socket.handler.ts`\n\n**YapÄ±lacaklar:**\n\n#### 3.1. join_thread Event Handler\n- Client'tan `join_thread` event'i geldiÄŸinde:\n  - Thread ID'yi al\n  - Room adÄ±: `thread:{threadId}` formatÄ±nda\n  - Socket'i bu room'a ekle\n  - Log'la\n\n**Kontrol:** KullanÄ±cÄ±nÄ±n bu thread'e eriÅŸim yetkisi var mÄ± kontrol et (MessagingService'den thread bilgisini al ve kullanÄ±cÄ±nÄ±n participant olduÄŸunu doÄŸrula)\n\n#### 3.2. leave_thread Event Handler\n- Client'tan `leave_thread` event'i geldiÄŸinde:\n  - Thread ID'yi al\n  - Room adÄ±: `thread:{threadId}` formatÄ±nda\n  - Socket'i bu room'dan Ã§Ä±kar\n  - Log'la\n\n#### 3.3. typing_start Event Handler\n- Client'tan `typing_start` event'i geldiÄŸinde:\n  - Thread ID'yi al\n  - Room adÄ±: `thread:{threadId}` formatÄ±nda\n  - Socket'in kendisi hariÃ§ room'daki diÄŸer kullanÄ±cÄ±lara `user_typing` event'i gÃ¶nder\n  - Payload: userId, threadId, isTyping: true\n  - Thread'e eriÅŸim kontrolÃ¼ yap\n\n#### 3.4. typing_stop Event Handler\n- Client'tan `typing_stop` event'i geldiÄŸinde:\n  - Thread ID'yi al\n  - Room adÄ±: `thread:{threadId}` formatÄ±nda\n  - Socket'in kendisi hariÃ§ room'daki diÄŸer kullanÄ±cÄ±lara `user_typing` event'i gÃ¶nder\n  - Payload: userId, threadId, isTyping: false\n  - Thread'e eriÅŸim kontrolÃ¼ yap\n\n**Not:** Typing event'leri iÃ§in debounce/throttle eklenebilir (opsiyonel, ilk versiyonda gerekli deÄŸil)\n\n---\n\n### 4. MessagingService - Thread Room YÃ¶netimi\n\n**Konum:** `src/application/messaging/messaging.service.ts`\n\n**YapÄ±lacaklar:**\n- `sendDirectMessage` metodunda:\n  - Mesaj gÃ¶nderildikten sonra thread room'una da mesaj gÃ¶nder\n  - Room adÄ±: `thread:{threadId}`\n  - Bu sayede thread'i aÃ§Ä±k olan her iki kullanÄ±cÄ± da mesajÄ± anÄ±nda gÃ¶rÃ¼r\n  - AyrÄ±ca alÄ±cÄ± kullanÄ±cÄ±nÄ±n kendi odasÄ±na da gÃ¶nder (thread aÃ§Ä±k deÄŸilse bile bildirim gelsin)\n\n**MantÄ±k:**\n- Thread room'una gÃ¶nder â†’ Thread aÃ§Ä±k olan kullanÄ±cÄ±lar iÃ§in\n- KullanÄ±cÄ± odasÄ±na gÃ¶nder â†’ Thread aÃ§Ä±k olmayan kullanÄ±cÄ±lar iÃ§in bildirim\n\n---\n\n### 5. Event Payload Standardizasyonu\n\n**Konum:** Yeni dosya oluÅŸtur: `src/infrastructure/realtime/messaging-events.ts`\n\n**YapÄ±lacaklar:**\n- TypeScript interface'leri tanÄ±mla:\n  - `NewMessageEvent`: messageId, threadId, senderId, recipientId, message, messageType, timestamp\n  - `MessageReadEvent`: messageId, threadId, readBy, timestamp (zaten var ama standardize et)\n  - `TypingEvent`: userId, threadId, isTyping\n  - `MessageSentEvent`: messageId, threadId, recipientId, timestamp (opsiyonel)\n\n**KullanÄ±m:** Bu interface'leri hem backend'de hem frontend dokÃ¼mantasyonunda kullan\n\n---\n\n### 6. SocketHandler - Thread EriÅŸim KontrolÃ¼ Helper Metodu\n\n**Konum:** `src/infrastructure/realtime/socket.handler.ts`\n\n**YapÄ±lacaklar:**\n- Private helper metod ekle: `validateThreadAccess`\n  - Parametreler: userId, threadId\n  - MessagingService veya repository Ã¼zerinden thread'i al\n  - KullanÄ±cÄ±nÄ±n thread'de participant olduÄŸunu kontrol et\n  - True/false dÃ¶ndÃ¼r\n  - join_thread, typing_start, typing_stop gibi event'lerde kullan\n\n**Alternatif:** Bu kontrolÃ¼ MessagingService'de yapÄ±p sadece boolean dÃ¶ndÃ¼ren bir metod ekle\n\n---\n\n### 7. MessagingService - markMessageAsRead GÃ¼ncelleme\n\n**Konum:** `src/application/messaging/messaging.service.ts`\n\n**YapÄ±lacaklar:**\n- Mevcut `markMessageAsRead` metodunda:\n  - Thread room'una da `message_read` event'i gÃ¶nder\n  - BÃ¶ylece thread aÃ§Ä±k olan gÃ¶nderici de okundu bilgisini anÄ±nda gÃ¶rÃ¼r\n  - Mevcut kullanÄ±cÄ± odasÄ±na gÃ¶nderme iÅŸlemi kalabilir (fallback iÃ§in)\n\n---\n\n## ğŸ§ª Test SenaryolarÄ±\n\n### Senaryo 1: Mesaj GÃ¶nderme\n1. KullanÄ±cÄ± A, KullanÄ±cÄ± B'ye mesaj gÃ¶nderir\n2. KullanÄ±cÄ± B thread'i aÃ§Ä±k deÄŸilse â†’ Kendi odasÄ±na `new_message` event'i gelir\n3. KullanÄ±cÄ± B thread'i aÃ§Ä±ksa â†’ Thread room'undan `new_message` event'i gelir\n4. KullanÄ±cÄ± A thread'i aÃ§Ä±ksa â†’ Thread room'undan mesajÄ± gÃ¶rÃ¼r\n\n### Senaryo 2: Thread'e KatÄ±lma\n1. KullanÄ±cÄ± A thread sayfasÄ±nÄ± aÃ§ar\n2. Frontend `join_thread` event'i gÃ¶nderir\n3. Backend thread room'una ekler\n4. KullanÄ±cÄ± A artÄ±k thread room'undaki mesajlarÄ± dinler\n\n### Senaryo 3: Typing Indicator\n1. KullanÄ±cÄ± A thread'de yazmaya baÅŸlar\n2. Frontend `typing_start` event'i gÃ¶nderir\n3. KullanÄ±cÄ± B (thread aÃ§Ä±ksa) `user_typing` event'i alÄ±r\n4. KullanÄ±cÄ± A yazmayÄ± bÄ±rakÄ±r\n5. Frontend `typing_stop` event'i gÃ¶nderir\n6. KullanÄ±cÄ± B `user_typing` event'i alÄ±r (isTyping: false)\n\n### Senaryo 4: Mesaj Okundu\n1. KullanÄ±cÄ± B mesajÄ± okur\n2. Backend `markMessageAsRead` Ã§aÄŸrÄ±lÄ±r\n3. Thread room'una `message_read` event'i gÃ¶nderilir\n4. KullanÄ±cÄ± A thread aÃ§Ä±ksa okundu bilgisini anÄ±nda gÃ¶rÃ¼r\n\n---\n\n## ğŸ“Š Ã–ncelik SÄ±rasÄ±\n\n### Faz 1 (Minimum Viable - YÃ¼ksek Ã–ncelik)\n1. âœ… `sendDirectMessage`'a socket bildirimi ekle\n2. âœ… Thread room yÃ¶netimi ekle\n3. âœ… `join_thread` / `leave_thread` event handler'larÄ± ekle\n4. âœ… Event payload interface'leri oluÅŸtur\n\n### Faz 2 (Ä°yileÅŸtirmeler - Orta Ã–ncelik)\n5. âš ï¸ Typing indicator event'leri ekle\n6. âš ï¸ Thread eriÅŸim kontrolÃ¼ ekle\n7. âš ï¸ `markMessageAsRead`'i thread room ile gÃ¼ncelle\n\n### Faz 3 (Opsiyonel - DÃ¼ÅŸÃ¼k Ã–ncelik)\n8. ğŸ”µ Online/offline status\n9. ğŸ”µ Typing debounce/throttle\n10. ğŸ”µ Frontend dokÃ¼mantasyonu\n\n---\n\n## âš ï¸ Dikkat Edilmesi Gerekenler\n\n1. **Thread EriÅŸim KontrolÃ¼:** Her thread event'inde kullanÄ±cÄ±nÄ±n thread'e eriÅŸim yetkisi kontrol edilmeli\n2. **Hata YÃ¶netimi:** Socket iÅŸlemlerinde try-catch kullan, hata durumunda log'la ama uygulamayÄ± Ã§Ã¶kertme\n3. **Logging:** TÃ¼m socket event'leri Winston logger ile log'lanmalÄ±\n4. **Performance:** Thread room'larÄ± gereksiz yere bÃ¼yÃ¼memeli, kullanÄ±cÄ± thread'den ayrÄ±ldÄ±ÄŸÄ±nda `leave_thread` Ã§aÄŸrÄ±lmalÄ±\n5. **Consistency:** Mevcut `markMessageAsRead`'deki socket kullanÄ±mÄ± ile tutarlÄ± olmalÄ±\n\n---\n\n## ğŸ”Œ Frontend ile Koordinasyon\n\n### Frontend'in Dinlemesi Gereken Event'ler:\n\n#### `new_message`\nYeni mesaj geldiÄŸinde tetiklenir.\n```typescript\n{\n  messageId: number;\n  threadId: number;\n  senderId: string;\n  recipientId: string;\n  message: string;\n  messageType: 'TEXT' | 'TIPS' | 'SYSTEM';\n  timestamp: string;\n}\n```\n\n#### `message_read`\nMesaj okunduÄŸunda tetiklenir.\n```typescript\n{\n  messageId: number;\n  threadId: number;\n  readBy: string;\n  timestamp: string;\n}\n```\n\n#### `user_typing`\nKullanÄ±cÄ± yazÄ±yor/yazmayÄ± bÄ±raktÄ±ÄŸÄ±nda tetiklenir.\n```typescript\n{\n  userId: string;\n  threadId: string;\n  isTyping: boolean;\n}\n```\n\n#### `message_sent` (Opsiyonel)\nMesaj gÃ¶nderildi onayÄ± iÃ§in.\n```typescript\n{\n  messageId: number;\n  threadId: number;\n  recipientId: string;\n  timestamp: string;\n}\n```\n\n### Frontend'in GÃ¶ndermesi Gereken Event'ler:\n\n#### `join_thread`\nThread sayfasÄ± aÃ§Ä±ldÄ±ÄŸÄ±nda gÃ¶nderilmeli.\n```typescript\nsocket.emit('join_thread', threadId);\n```\n\n#### `leave_thread`\nThread sayfasÄ± kapatÄ±ldÄ±ÄŸÄ±nda gÃ¶nderilmeli.\n```typescript\nsocket.emit('leave_thread', threadId);\n```\n\n#### `typing_start`\nInput'a yazmaya baÅŸladÄ±ÄŸÄ±nda gÃ¶nderilmeli.\n```typescript\nsocket.emit('typing_start', { threadId });\n```\n\n#### `typing_stop`\nInput'tan focus Ã§Ä±ktÄ±ÄŸÄ±nda veya belirli sÃ¼re yazÄ±lmadÄ±ÄŸÄ±nda gÃ¶nderilmeli.\n```typescript\nsocket.emit('typing_stop', { threadId });\n```\n\n---\n\n## ğŸ“ Dosya YapÄ±sÄ±\n\n```\nsrc/\nâ”œâ”€â”€ infrastructure/\nâ”‚   â””â”€â”€ realtime/\nâ”‚       â”œâ”€â”€ socket.handler.ts          (gÃ¼ncellenecek)\nâ”‚       â”œâ”€â”€ socket-manager.ts          (mevcut - deÄŸiÅŸiklik yok)\nâ”‚       â””â”€â”€ messaging-events.ts        (yeni - event interface'leri)\nâ”œâ”€â”€ application/\nâ”‚   â””â”€â”€ messaging/\nâ”‚       â””â”€â”€ messaging.service.ts       (gÃ¼ncellenecek)\nâ””â”€â”€ interfaces/\n    â””â”€â”€ messaging/\n        â””â”€â”€ messaging.router.ts        (mevcut - deÄŸiÅŸiklik yok)\n```\n\n---\n\n## ğŸ¯ SonuÃ§\n\nBu akÄ±ÅŸ ile:\n- âœ… Mevcut Socket.IO altyapÄ±sÄ± kullanÄ±lÄ±r\n- âœ… Redis adapter ile scaling desteklenir\n- âœ… Ek Redis PubSub gerekmez\n- âœ… Frontend ile doÄŸrudan iletiÅŸim saÄŸlanÄ±r\n- âœ… Thread bazlÄ± real-time mesajlaÅŸma Ã§alÄ±ÅŸÄ±r\n\n**Ã–nerilen YaklaÅŸÄ±m:** Ä°lk fazÄ± tamamladÄ±ktan sonra test edip, gerekirse ikinci faza geÃ§ilebilir.\n\n---\n\n## ğŸ“ Notlar\n\n- TÃ¼m socket event'leri Winston logger ile log'lanmalÄ±\n- Hata durumlarÄ±nda graceful degradation saÄŸlanmalÄ± (socket hatasÄ± uygulamayÄ± Ã§Ã¶kertmemeli)\n- Thread eriÅŸim kontrolÃ¼ gÃ¼venlik iÃ§in kritik\n- Performance iÃ§in gereksiz room'lardan Ã§Ä±kÄ±ÅŸ yapÄ±lmalÄ±\n\n---\n\n\n",
      "category": "features"
    },
    {
      "id": "minio-file-upload",
      "fileName": "MINIO_FILE_UPLOAD",
      "path": "MINIO_FILE_UPLOAD.md",
      "title": "MinIO ve File Upload YapÄ±landÄ±rmasÄ±",
      "content": "# MinIO ve File Upload YapÄ±landÄ±rmasÄ±\n\nBu dokÃ¼man, Tipbox Backend projesinde MinIO kullanÄ±mÄ± ve file upload yapÄ±landÄ±rmasÄ±nÄ± aÃ§Ä±klar.\n\n## ğŸ“š Genel BakÄ±ÅŸ\n\n### MinIO Nedir?\n- **MinIO**: AWS S3-compatible bir object storage Ã§Ã¶zÃ¼mÃ¼dÃ¼r\n- **AvantajlarÄ±**: \n  - Ãœcretsiz ve aÃ§Ä±k kaynak\n  - Docker ile kolay kurulum\n  - AWS S3 API'si ile %100 uyumlu\n  - Local development iÃ§in ideal\n  - Production'da da kullanÄ±labilir (Hetzner sunucusunda)\n\n### Neden S3-Compatible Kod YapÄ±sÄ±?\n- **Kod Tekrar KullanÄ±mÄ±**: AynÄ± kod hem MinIO hem AWS S3 ile Ã§alÄ±ÅŸÄ±r\n- **Gelecek GeÃ§iÅŸ**: Ä°leride AWS S3'e geÃ§iÅŸ iÃ§in sadece environment variable'larÄ± deÄŸiÅŸtirmek yeterli\n- **Standart API**: AWS SDK kullanÄ±ldÄ±ÄŸÄ± iÃ§in industry standard\n\n## ğŸ—ï¸ Mimari\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Backend API   â”‚\nâ”‚  (Express.js)   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”‚ AWS SDK / S3Client\n         â”‚ (S3-Compatible API)\n         â”‚\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Local MinIO    â”‚     â”‚ Production      â”‚\nâ”‚  (Docker)       â”‚     â”‚ MinIO (Hetzner) â”‚\nâ”‚  Port: 9000     â”‚     â”‚ Port: 9000      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”‚ Ä°leride:\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   AWS S3        â”‚\nâ”‚  (Sadece ENV    â”‚\nâ”‚   deÄŸiÅŸikliÄŸi)  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## ğŸ”§ Local Development\n\n### 1. Docker Compose ile MinIO BaÅŸlatma\n\n```bash\n# MinIO container'Ä± baÅŸlat\ndocker-compose up -d minio\n\n# MinIO durumunu kontrol et\ndocker-compose ps minio\n\n# MinIO loglarÄ±nÄ± kontrol et\ndocker-compose logs minio\n```\n\n### 2. MinIO Console EriÅŸimi\n\n**Local Development:**\n- **API Endpoint**: `http://localhost:9000`\n- **Web Console**: `http://localhost:9001`\n- **Credentials**: \n  - User: `minioadmin` (default)\n  - Password: `minioadmin123` (default)\n\n**Not**: Bu credentials'lar sadece development iÃ§in. Production'da mutlaka deÄŸiÅŸtirin!\n\n### 3. Bucket Otomatik OluÅŸturma\n\nBackend baÅŸladÄ±ÄŸÄ±nda `S3Service` otomatik olarak:\n1. `tipbox-media` bucket'Ä±nÄ± kontrol eder\n2. Yoksa otomatik oluÅŸturur\n3. Loglarda durumu gÃ¶sterir\n\n**Loglar:**\n```json\n{\"message\":\"S3 bucket mevcut\",\"bucketName\":\"tipbox-media\"}\n// veya\n{\"message\":\"S3 bucket oluÅŸturuldu\",\"bucketName\":\"tipbox-media\"}\n```\n\n### 4. File Upload Testi\n\n**Swagger UI ile Test:**\n1. `http://localhost:3000/api-docs` adresine gidin\n2. `POST /users/setup-profile` endpoint'ini aÃ§Ä±n\n3. \"Try it out\" butonuna tÄ±klayÄ±n\n4. Multipart/form-data olarak:\n   - `FullName`: Test User\n   - `UserName`: testuser\n   - `selectCategories`: `{\"userId\":\"1\",\"selectedCategories\":[]}`\n   - `Avatar`: Bir resim dosyasÄ± seÃ§in (max 5MB)\n\n**cURL ile Test:**\n```bash\ncurl -X POST http://localhost:3000/users/setup-profile \\\n  -H \"Authorization: Bearer YOUR_JWT_TOKEN\" \\\n  -F \"FullName=Test User\" \\\n  -F \"UserName=testuser\" \\\n  -F \"selectCategories={\\\"userId\\\":\\\"1\\\",\\\"selectedCategories\\\":[]}\" \\\n  -F \"Avatar=@/path/to/image.jpg\"\n```\n\n## ğŸš€ Production (Hetzner)\n\n### 1. MinIO YapÄ±landÄ±rmasÄ±\n\n**docker-compose.prod.yml:**\n```yaml\nminio:\n  image: minio/minio:latest\n  container_name: tipbox_minio_prod\n  restart: always\n  command: server /data --console-address \":9001\"\n  environment:\n    MINIO_ROOT_USER: ${MINIO_ROOT_USER}\n    MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD}\n  volumes:\n    - minio_prod_data:/data\n  networks:\n    - tipbox_network\n  healthcheck:\n    test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:9000/minio/health/live\"]\n    interval: 30s\n    timeout: 20s\n    retries: 3\n```\n\n### 2. Environment Variables\n\n```env\n# MinIO Configuration\nMINIO_ROOT_USER=tipbox_minio_user\nMINIO_ROOT_PASSWORD=strong_password_here\n\n# S3-Compatible Configuration (MinIO iÃ§in)\nS3_ENDPOINT=http://minio:9000\nS3_BUCKET_NAME=tipbox-media\nS3_REGION=eu-central-1\nS3_ACCESS_KEY=${MINIO_ROOT_USER}  # MinIO'da aynÄ±\nS3_SECRET_KEY=${MINIO_ROOT_PASSWORD}  # MinIO'da aynÄ±\n```\n\n### 3. GÃ¼venlik\n\n**Production'da MinIO Console eriÅŸimi:**\n- Port 9001'i dÄ±ÅŸarÄ±dan aÃ§mayÄ±n (sadece internal network)\n- SSH port forwarding ile eriÅŸim:\n  ```bash\n  ssh -L 9001:localhost:9001 root@your-server-ip\n  # TarayÄ±cÄ±da: http://localhost:9001\n  ```\n\n## ğŸ“ File Upload YapÄ±sÄ±\n\n### Avatar Upload AkÄ±ÅŸÄ±\n\n```\n1. Client â†’ POST /users/setup-profile (multipart/form-data)\n   â”œâ”€ FullName: string\n   â”œâ”€ UserName: string\n   â”œâ”€ selectCategories: JSON string\n   â””â”€ Avatar: File (image/jpeg, image/png, etc.)\n\n2. Backend\n   â”œâ”€ Multer ile dosya alÄ±nÄ±r (memory storage)\n   â”œâ”€ Dosya validasyonu (max 5MB, sadece resim)\n   â””â”€ S3Service.uploadFile() Ã§aÄŸrÄ±lÄ±r\n\n3. S3Service\n   â”œâ”€ Bucket kontrolÃ¼/oluÅŸturma (otomatik)\n   â”œâ”€ AWS SDK ile MinIO'ya yÃ¼kleme\n   â””â”€ File URL'i dÃ¶ner\n\n4. Database\n   â””â”€ Avatar URL'i UserAvatar tablosuna kaydedilir\n```\n\n### Dosya Yolu FormatÄ±\n\n```\nprofile-pictures/{userId}/{uuid}.{extension}\n\nÃ–rnek:\nprofile-pictures/10/ad8a0f30-5b1c-4cf6-ab29-b61c234d2273.jpg\n```\n\n### Dosya URL'i\n\n```\nDevelopment: http://minio:9000/tipbox-media/profile-pictures/10/file.jpg\nProduction:  http://minio:9000/tipbox-media/profile-pictures/10/file.jpg\n             (Backend container iÃ§inden eriÅŸim)\n```\n\n## ğŸ”„ AWS S3'e GeÃ§iÅŸ (Ä°leride)\n\nKod deÄŸiÅŸikliÄŸi **GEREKMEZ**. Sadece environment variable'larÄ± deÄŸiÅŸtirin:\n\n```env\n# AWS S3 iÃ§in\nS3_ENDPOINT=https://s3.eu-central-1.amazonaws.com\nS3_BUCKET_NAME=tipbox-media-prod\nS3_REGION=eu-central-1\nS3_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE\nS3_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\n# MinIO credentials'larÄ± kaldÄ±rÄ±labilir\n```\n\n**Kod otomatik olarak AWS S3'i kullanacaktÄ±r!**\n\n## ğŸ› ï¸ Troubleshooting\n\n### Bucket BulunamadÄ± HatasÄ±\n\n```bash\n# Backend loglarÄ±nÄ± kontrol et\ndocker-compose logs backend | grep bucket\n\n# MinIO Console'dan bucket'Ä± manuel oluÅŸtur\n# http://localhost:9001 â†’ Buckets â†’ Create Bucket â†’ tipbox-media\n```\n\n### File Upload HatasÄ±\n\n```bash\n# Backend loglarÄ±nÄ± kontrol et\ndocker-compose logs backend | grep -i \"avatar\\|upload\\|s3\"\n\n# MinIO eriÅŸimini test et\ncurl http://localhost:9000/minio/health/live\n\n# Bucket permissions kontrolÃ¼\n# MinIO Console â†’ Buckets â†’ tipbox-media â†’ Access Policy\n```\n\n### MinIO Container BaÅŸlamÄ±yor\n\n```bash\n# Container durumunu kontrol et\ndocker-compose ps minio\n\n# LoglarÄ± kontrol et\ndocker-compose logs minio\n\n# Volume'Ã¼ kontrol et\ndocker volume ls | grep minio\n\n# Yeniden baÅŸlat\ndocker-compose restart minio\n```\n\n## ğŸ“ Checklist\n\n### Local Development\n- [ ] MinIO container Ã§alÄ±ÅŸÄ±yor (`docker-compose ps minio`)\n- [ ] MinIO Console eriÅŸilebilir (`http://localhost:9001`)\n- [ ] Backend baÅŸladÄ±ÄŸÄ±nda bucket otomatik oluÅŸturuldu\n- [ ] File upload testi baÅŸarÄ±lÄ±\n\n### Production\n- [ ] MinIO credentials gÃ¼Ã§lÃ¼ ÅŸifrelerle deÄŸiÅŸtirildi\n- [ ] MinIO Console port'u dÄ±ÅŸarÄ±dan kapalÄ± (gÃ¼venlik)\n- [ ] Bucket otomatik oluÅŸturma Ã§alÄ±ÅŸÄ±yor\n- [ ] File upload testi baÅŸarÄ±lÄ±\n- [ ] Backup stratejisi kuruldu\n\n---\n\n**Not**: Bu yapÄ±landÄ±rma hem MinIO hem AWS S3 ile Ã§alÄ±ÅŸÄ±r. Kod deÄŸiÅŸikliÄŸi olmadan geÃ§iÅŸ yapÄ±labilir.\n\n",
      "category": "features"
    },
    {
      "id": "monitoring-setup",
      "fileName": "MONITORING_SETUP",
      "path": "MONITORING_SETUP.md",
      "title": "Monitoring Setup Guide",
      "content": "# Monitoring Setup Guide\n\nBu dokÃ¼mantasyon, Tipbox Backend iÃ§in Prometheus ve Grafana monitoring entegrasyonunu aÃ§Ä±klar.\n\n## ğŸ“‹ Ä°Ã§indekiler\n\n1. [Genel BakÄ±ÅŸ](#genel-bakÄ±ÅŸ)\n2. [Kurulum](#kurulum)\n3. [Metrikler](#metrikler)\n4. [Grafana Dashboard](#grafana-dashboard)\n5. [KullanÄ±m](#kullanÄ±m)\n\n## ğŸ¯ Genel BakÄ±ÅŸ\n\nMonitoring stack'i ÅŸu bileÅŸenlerden oluÅŸur:\n\n- **Prometheus**: Metrik toplama ve saklama\n- **Grafana**: Metrik gÃ¶rselleÅŸtirme ve dashboard'lar\n- **PostgreSQL Exporter**: PostgreSQL metrikleri\n- **Redis Exporter**: Redis metrikleri\n- **Node Exporter**: Sistem metrikleri (CPU, Memory, Disk, vb.)\n- **Backend Metrics**: Uygulama metrikleri (prom-client ile)\n\n## ğŸš€ Kurulum\n\n### 1. Docker Compose ile BaÅŸlatma\n\n```bash\ndocker-compose up -d\n```\n\nBu komut ÅŸu servisleri baÅŸlatÄ±r:\n- `prometheus` (port 9090)\n- `grafana` (port 3001)\n- `postgres-exporter` (port 9187)\n- `redis-exporter` (port 9121)\n- `node-exporter` (port 9100)\n\n### 2. Servisleri Kontrol Etme\n\n```bash\n# TÃ¼m servislerin durumunu kontrol et\ndocker-compose ps\n\n# Prometheus loglarÄ±nÄ± gÃ¶rÃ¼ntÃ¼le\ndocker-compose logs prometheus\n\n# Grafana loglarÄ±nÄ± gÃ¶rÃ¼ntÃ¼le\ndocker-compose logs grafana\n```\n\n### 3. Grafana'ya GiriÅŸ\n\n1. TarayÄ±cÄ±da http://localhost:3001 adresine gidin\n2. KullanÄ±cÄ± adÄ±: `admin`\n3. Åifre: `admin`\n4. Ä°lk giriÅŸte ÅŸifre deÄŸiÅŸtirme istenebilir\n\n## ğŸ“Š Metrikler\n\n### Backend Uygulama Metrikleri\n\nBackend uygulamasÄ± ÅŸu metrikleri toplar:\n\n#### HTTP Metrikleri\n\n- `http_requests_total`: Toplam HTTP istek sayÄ±sÄ±\n  - Labels: `method`, `route`, `status_code`\n  \n- `http_request_duration_seconds`: HTTP istek sÃ¼resi (histogram)\n  - Labels: `method`, `route`, `status_code`\n  - Buckets: 0.1s, 0.3s, 0.5s, 0.7s, 1s, 3s, 5s, 7s, 10s\n\n- `http_request_size_bytes`: HTTP istek boyutu (histogram)\n  - Labels: `method`, `route`\n\n- `http_active_connections`: Aktif HTTP baÄŸlantÄ± sayÄ±sÄ± (gauge)\n\n#### Hata Metrikleri\n\n- `errors_total`: Toplam hata sayÄ±sÄ±\n  - Labels: `type`, `route`, `status_code`\n\n#### VeritabanÄ± Metrikleri\n\n- `database_query_duration_seconds`: VeritabanÄ± sorgu sÃ¼resi (histogram)\n  - Labels: `operation`, `table`\n\n#### Redis Metrikleri\n\n- `redis_operation_duration_seconds`: Redis iÅŸlem sÃ¼resi (histogram)\n  - Labels: `operation`, `status`\n\n#### KullanÄ±cÄ± Metrikleri\n\n- `active_users_total`: Aktif kullanÄ±cÄ± sayÄ±sÄ± (gauge)\n\n#### Node.js Metrikleri (Default)\n\nPrometheus client otomatik olarak ÅŸu metrikleri toplar:\n\n- `process_cpu_user_seconds_total`: CPU kullanÄ±mÄ±\n- `process_cpu_system_seconds_total`: Sistem CPU kullanÄ±mÄ±\n- `process_resident_memory_bytes`: Bellek kullanÄ±mÄ±\n- `nodejs_eventloop_lag_seconds`: Event loop lag\n- `nodejs_heap_size_total_bytes`: Heap boyutu\n- `nodejs_heap_size_used_bytes`: KullanÄ±lan heap boyutu\n- Ve daha fazlasÄ±...\n\n### PostgreSQL Metrikleri\n\nPostgreSQL Exporter ÅŸu metrikleri saÄŸlar:\n\n- `pg_stat_database_*`: VeritabanÄ± istatistikleri\n- `pg_stat_user_tables_*`: Tablo istatistikleri\n- `pg_stat_activity_*`: Aktif baÄŸlantÄ±lar\n- `pg_stat_replication_*`: Replikasyon istatistikleri\n\n### Redis Metrikleri\n\nRedis Exporter ÅŸu metrikleri saÄŸlar:\n\n- `redis_commands_processed_total`: Ä°ÅŸlenen komut sayÄ±sÄ±\n- `redis_connected_clients`: BaÄŸlÄ± istemci sayÄ±sÄ±\n- `redis_memory_used_bytes`: KullanÄ±lan bellek\n- `redis_keyspace_keys`: Key sayÄ±sÄ±\n- Ve daha fazlasÄ±...\n\n### Sistem Metrikleri (Node Exporter)\n\n- `node_cpu_seconds_total`: CPU kullanÄ±mÄ±\n- `node_memory_MemTotal_bytes`: Toplam bellek\n- `node_memory_MemAvailable_bytes`: KullanÄ±labilir bellek\n- `node_disk_io_time_seconds_total`: Disk I/O\n- `node_network_receive_bytes_total`: AÄŸ trafiÄŸi\n- Ve daha fazlasÄ±...\n\n## ğŸ“ˆ Grafana Dashboard\n\n### 1. Prometheus'u Data Source Olarak Ekleme\n\n1. Grafana'da **Configuration** â†’ **Data Sources** â†’ **Add data source**\n2. **Prometheus**'u seÃ§in\n3. **URL**: `http://prometheus:9090` (Docker network iÃ§inden)\n4. **Access**: `Server (default)`\n5. **Save & Test** butonuna tÄ±klayÄ±n\n\n### 2. Ã–rnek Dashboard SorgularÄ±\n\n#### HTTP Request Rate (Ä°stek/saniye)\n\n```promql\nrate(http_requests_total[5m])\n```\n\n#### HTTP Request Duration (P95)\n\n```promql\nhistogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))\n```\n\n#### Error Rate (Hata/saniye)\n\n```promql\nrate(errors_total[5m])\n```\n\n#### Active Connections\n\n```promql\nhttp_active_connections\n```\n\n#### Database Query Duration (P95)\n\n```promql\nhistogram_quantile(0.95, rate(database_query_duration_seconds_bucket[5m]))\n```\n\n#### Redis Memory Usage\n\n```promql\nredis_memory_used_bytes\n```\n\n#### CPU Usage\n\n```promql\n100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)\n```\n\n#### Memory Usage\n\n```promql\n(node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100\n```\n\n### 3. HazÄ±r Dashboard'lar\n\nGrafana'da hazÄ±r dashboard'larÄ± import edebilirsiniz:\n\n1. **Dashboard** â†’ **Import**\n2. AÅŸaÄŸÄ±daki ID'leri kullanabilirsiniz:\n   - **Node Exporter Full**: `1860`\n   - **PostgreSQL Database**: `9628`\n   - **Redis Dashboard**: `11835`\n   - **Node.js Application Dashboard**: `11159`\n\n## ğŸ”§ KullanÄ±m\n\n### Metrics Endpoint'ine EriÅŸim\n\nBackend uygulamasÄ± `/metrics` endpoint'i Ã¼zerinden metrikleri sunar:\n\n```bash\ncurl http://localhost:3000/metrics\n```\n\n### Prometheus UI'da Metrikleri GÃ¶rÃ¼ntÃ¼leme\n\n1. TarayÄ±cÄ±da http://localhost:9090 adresine gidin\n2. **Graph** sekmesine gidin\n3. Metrik adÄ±nÄ± yazÄ±n (Ã¶rn: `http_requests_total`)\n4. **Execute** butonuna tÄ±klayÄ±n\n\n### Metrikleri Kod Ä°Ã§inde Kullanma\n\n```typescript\nimport { getMetricsService } from './infrastructure/metrics/metrics.service';\n\nconst metricsService = getMetricsService();\n\n// VeritabanÄ± sorgu sÃ¼resini kaydet\nconst startTime = Date.now();\nconst result = await prisma.user.findMany();\nconst duration = (Date.now() - startTime) / 1000;\nmetricsService.recordDatabaseQuery('findMany', 'User', duration);\n\n// Redis iÅŸlem sÃ¼resini kaydet\nconst redisStart = Date.now();\nawait redis.get('key');\nconst redisDuration = (Date.now() - redisStart) / 1000;\nmetricsService.recordRedisOperation('get', 'success', redisDuration);\n\n// Aktif kullanÄ±cÄ± sayÄ±sÄ±nÄ± gÃ¼ncelle\nmetricsService.setActiveUsers(activeUserCount);\n```\n\n## ğŸ› Sorun Giderme\n\n### Prometheus Metrikleri ToplamÄ±yor\n\n1. Backend'in Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun:\n   ```bash\n   curl http://localhost:3000/metrics\n   ```\n\n2. Prometheus'un backend'e eriÅŸebildiÄŸinden emin olun:\n   - Prometheus UI'da **Status** â†’ **Targets** bÃ¶lÃ¼mÃ¼ne gidin\n   - `backend` target'Ä±nÄ±n `UP` durumunda olduÄŸunu kontrol edin\n\n3. Docker network'Ã¼n doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun:\n   ```bash\n   docker network inspect tipbox-backend_monitoring\n   ```\n\n### Grafana Metrikleri GÃ¶rmÃ¼yor\n\n1. Prometheus data source'unun doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun\n2. Prometheus'un metrikleri topladÄ±ÄŸÄ±nÄ± kontrol edin (Prometheus UI)\n3. Grafana'da query'leri test edin\n\n### Exporter'lar Ã‡alÄ±ÅŸmÄ±yor\n\n1. Exporter container'larÄ±nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol edin:\n   ```bash\n   docker-compose ps\n   ```\n\n2. Exporter loglarÄ±nÄ± kontrol edin:\n   ```bash\n   docker-compose logs postgres-exporter\n   docker-compose logs redis-exporter\n   ```\n\n## ğŸ“š Kaynaklar\n\n- [Prometheus Documentation](https://prometheus.io/docs/)\n- [Grafana Documentation](https://grafana.com/docs/)\n- [prom-client Documentation](https://github.com/siimon/prom-client)\n- [PostgreSQL Exporter](https://github.com/prometheus-community/postgres_exporter)\n- [Redis Exporter](https://github.com/oliver006/redis_exporter)\n\n",
      "category": "monitoring"
    },
    {
      "id": "prisma-type-helper-refactor",
      "fileName": "PRISMA_TYPE_HELPER_REFACTOR",
      "path": "PRISMA_TYPE_HELPER_REFACTOR.md",
      "title": "Prisma Type Helper Refactoring",
      "content": "# Prisma Type Helper Refactoring\n\n## Durum\nCount denormalization iÅŸlemlerinden sonra Prisma type system'i bazÄ± yeni count field'larÄ±nÄ± (`postsCount`, `trustCount`, `likesCount`, vb.) tanÄ±mÄ±yor. Åu anda `as any` kullanÄ±larak bu sorun geÃ§ici olarak Ã§Ã¶zÃ¼ldÃ¼.\n\n## Sorun\n- `as any` kullanÄ±mÄ± type safety'i kaybettiriyor\n- Her yerde tekrar eden `as any` kullanÄ±mÄ± maintainability'yi dÃ¼ÅŸÃ¼rÃ¼yor\n- HatalÄ± field kullanÄ±mlarÄ± compile-time'da yakalanmÄ±yor\n\n## Ã‡Ã¶zÃ¼m: Helper Type Functions\n\nType-safe ve maintainable bir Ã§Ã¶zÃ¼m iÃ§in helper function'lar oluÅŸturulmalÄ±.\n\n### OluÅŸturulacak Dosya\n`src/infrastructure/repositories/prisma-types.helper.ts`\n\n### Ä°Ã§erik\n\n```typescript\nimport { Prisma } from '@prisma/client';\n\n/**\n * Helper type for Profile updateMany operations\n * Used to safely type count field updates that Prisma types may not include\n */\nexport function asProfileUpdateMany(\n  data: {\n    postsCount?: { increment: number } | { decrement: number };\n    trustCount?: { increment: number } | { decrement: number };\n    trusterCount?: { increment: number } | { decrement: number };\n    unseenFeedCount?: { increment: number } | { decrement: number };\n  }\n): Prisma.ProfileUpdateManyMutationInput {\n  return data as unknown as Prisma.ProfileUpdateManyMutationInput;\n}\n\n/**\n * Helper type for ContentPost update operations\n */\nexport function asContentPostUpdate(\n  data: {\n    likesCount?: { increment: number } | { decrement: number };\n    commentsCount?: { increment: number } | { decrement: number };\n    favoritesCount?: { increment: number } | { decrement: number };\n    viewsCount?: { increment: number } | { decrement: number };\n  }\n): Prisma.ContentPostUpdateInput {\n  return data as unknown as Prisma.ContentPostUpdateInput;\n}\n\n/**\n * Helper type for ContentPost orderBy operations\n */\nexport function asContentPostOrderBy(\n  data: {\n    likesCount?: 'asc' | 'desc';\n  }\n): Prisma.ContentPostOrderByWithRelationInput {\n  return data as unknown as Prisma.ContentPostOrderByWithRelationInput;\n}\n\n/**\n * Helper type for DMThread update operations\n */\nexport function asDMThreadUpdate(\n  data: {\n    unreadCountUserOne?: number | { increment: number };\n    unreadCountUserTwo?: number | { increment: number };\n  }\n): Prisma.DMThreadUpdateInput {\n  return data as unknown as Prisma.DMThreadUpdateInput;\n}\n\n/**\n * Helper type for Profile select operations\n */\nexport function asProfileSelect(\n  fields: {\n    unseenFeedCount?: boolean;\n  }\n): Prisma.ProfileSelect {\n  return fields as unknown as Prisma.ProfileSelect;\n}\n```\n\n### KullanÄ±m Ã–rnekleri\n\n#### Ã–nce (Mevcut)\n```typescript\nawait this.prisma.profile.updateMany({\n  where: { userId },\n  data: {\n    postsCount: { increment: 1 }\n  } as any\n});\n```\n\n#### Sonra (Helper ile)\n```typescript\nimport { asProfileUpdateMany } from './prisma-types.helper';\n\nawait this.prisma.profile.updateMany({\n  where: { userId },\n  data: asProfileUpdateMany({\n    postsCount: { increment: 1 }\n  })\n});\n```\n\n### GÃ¼ncellenecek Dosyalar\n\n1. `src/infrastructure/repositories/content-post-prisma.repository.ts`\n   - `postsCount` updateMany iÅŸlemleri\n   - `likesCount`, `commentsCount`, `favoritesCount`, `viewsCount` update iÅŸlemleri\n   - `likesCount` orderBy iÅŸlemleri\n\n2. `src/infrastructure/repositories/trust-relation-prisma.repository.ts`\n   - `trustCount`, `trusterCount` updateMany iÅŸlemleri\n\n3. `src/infrastructure/repositories/feed-prisma.repository.ts`\n   - `unseenFeedCount` updateMany iÅŸlemleri\n   - `unseenFeedCount` select iÅŸlemleri\n\n4. `src/infrastructure/repositories/dm-message-prisma.repository.ts`\n   - `unreadCountUserOne`, `unreadCountUserTwo` update iÅŸlemleri\n\n5. `src/application/user/user.service.ts`\n   - `trustCount`, `trusterCount` updateMany iÅŸlemleri\n\n### Avantajlar\n\n1. **Type Safety**: HatalÄ± field kullanÄ±mlarÄ± compile-time'da yakalanÄ±r\n2. **Maintainability**: TÃ¼m tip dÃ¶nÃ¼ÅŸÃ¼mleri tek dosyada yÃ¶netilir\n3. **Gelecekte Kolay KaldÄ±rma**: Prisma tipleri dÃ¼zeldiÄŸinde helper'larÄ± kaldÄ±rmak yeterli\n4. **Okunabilirlik**: Kod daha anlaÅŸÄ±lÄ±r hale gelir\n5. **Refactoring**: Field adÄ± deÄŸiÅŸirse tek yerden gÃ¼ncellenir\n\n### Notlar\n\n- Bu helper'lar Prisma'nÄ±n type system'inin gÃ¼ncellenmesini beklerken geÃ§ici bir Ã§Ã¶zÃ¼mdÃ¼r\n- Prisma client generate edildiÄŸinde ve type'lar dÃ¼zeldiÄŸinde bu helper'lar kaldÄ±rÄ±labilir\n- Helper function'lar runtime'da hiÃ§bir overhead yaratmaz (sadece type assertion)\n\n### Ä°lgili Ä°ssue/PR\n- Count denormalization implementation\n- TypeScript type errors fix\n\n### Son GÃ¼ncelleme\n2025-11-05\n\n",
      "category": "database"
    },
    {
      "id": "readme",
      "fileName": "README",
      "path": "README.md",
      "title": "Tipbox Backend DokÃ¼mantasyonu",
      "content": "# Tipbox Backend DokÃ¼mantasyonu\n\nBu dizin Tipbox backend projesi iÃ§in dokÃ¼mantasyon dosyalarÄ±nÄ± iÃ§erir.\n\n## Dizin YapÄ±sÄ±\n\n### `database/`\nVeritabanÄ± tasarÄ±mÄ± ve referans dokÃ¼manlarÄ±:\n- `db.dbml` - VeritabanÄ± ÅŸemasÄ± tasarÄ±mÄ± (DBML formatÄ±nda)\n\n## Notlar\n\n- `db.dbml` dosyasÄ± aktif kodla doÄŸrudan iliÅŸkili deÄŸildir\n- Bu dosya ileride veritabanÄ± tablolarÄ±nÄ±n oluÅŸturulmasÄ± iÃ§in referans olarak kullanÄ±lacaktÄ±r\n- Prisma schema (`prisma/schema.prisma`) aktif veritabanÄ± ÅŸemasÄ±dÄ±r",
      "category": "knowledge"
    },
    {
      "id": "redis-bullmq-integration",
      "fileName": "REDIS_BULLMQ_INTEGRATION",
      "path": "REDIS_BULLMQ_INTEGRATION.md",
      "title": "Redis & BullMQ Entegrasyonu",
      "content": "# Redis & BullMQ Entegrasyonu\n\nBu dokÃ¼mantasyon, Tipbox Backend projesine eklenen Redis cache ve BullMQ arka plan iÅŸlem kuyruÄŸu entegrasyonunu aÃ§Ä±klar.\n\n## ğŸš€ Ã–zellikler\n\n### Redis Cache KatmanÄ±\n- **Cache-Aside Pattern** ile veritabanÄ± okuma performansÄ±nÄ± artÄ±rÄ±r\n- KullanÄ±cÄ± profilleri iÃ§in otomatik cache yÃ¶netimi\n- TTL (Time To Live) desteÄŸi\n- Cache invalidation (gÃ¼ncelleme sÄ±rasÄ±nda otomatik temizlik)\n- Hata toleransÄ± (cache hatasÄ± durumunda doÄŸrudan veritabanÄ±na fallback)\n\n### BullMQ Arka Plan Ä°ÅŸlem KuyruÄŸu\n- **Asenkron bildirim sistemi** (Socket.IO ile entegre)\n- **Retry mekanizmasÄ±** (baÅŸarÄ±sÄ±z iÅŸler iÃ§in otomatik yeniden deneme)\n- **Job prioritization** (Ã¶ncelikli iÅŸler iÃ§in)\n- **Queue monitoring** (kuyruk durumu takibi)\n- **Graceful shutdown** (gÃ¼venli kapatma)\n\n## ğŸ“ Dosya YapÄ±sÄ±\n\n```\nsrc/\nâ”œâ”€â”€ infrastructure/\nâ”‚   â”œâ”€â”€ cache/\nâ”‚   â”‚   â””â”€â”€ cache.service.ts          # Redis cache servisi\nâ”‚   â”œâ”€â”€ queue/\nâ”‚   â”‚   â””â”€â”€ queue.provider.ts         # BullMQ kuyruk yÃ¶neticisi\nâ”‚   â””â”€â”€ workers/\nâ”‚       â”œâ”€â”€ notification.worker.ts    # Bildirim worker'Ä±\nâ”‚       â””â”€â”€ index.ts                  # Worker baÅŸlatÄ±cÄ±\nâ”œâ”€â”€ application/\nâ”‚   â”œâ”€â”€ user/\nâ”‚   â”‚   â””â”€â”€ user.service.ts           # Cache entegrasyonlu user servisi\nâ”‚   â””â”€â”€ gamification/\nâ”‚       â””â”€â”€ gamification.service.ts   # Kuyruk entegrasyonlu gamification servisi\nâ””â”€â”€ interfaces/\n    â””â”€â”€ server.ts                     # Ana server (cache & queue baÅŸlatma)\n```\n\n## ğŸ› ï¸ Kurulum ve Ã‡alÄ±ÅŸtÄ±rma\n\n### 1. BaÄŸÄ±mlÄ±lÄ±klarÄ± YÃ¼kle\n```bash\nnpm install\n```\n\n### 2. Redis Servisini BaÅŸlat\n```bash\n# Docker Compose ile\ndocker-compose up redis -d\n\n# Veya manuel Redis\nredis-server\n```\n\n### 3. Ana API Sunucusunu BaÅŸlat\n```bash\n# Development\nnpm run dev\n\n# Production\nnpm run start\n```\n\n### 4. Worker'larÄ± BaÅŸlat (AyrÄ± Terminal)\n```bash\nnpm run worker\n```\n\n## ğŸ”§ KonfigÃ¼rasyon\n\n### Environment Variables\n```env\n# Redis baÄŸlantÄ±sÄ±\nREDIS_URL=redis://localhost:6379\n\n# DiÄŸer mevcut deÄŸiÅŸkenler...\n```\n\n### Cache AyarlarÄ±\n- **TTL**: VarsayÄ±lan 3600 saniye (1 saat)\n- **Key Pattern**: `user:{userId}:profile`\n- **Fallback**: Cache hatasÄ± durumunda doÄŸrudan veritabanÄ±\n\n### Queue AyarlarÄ±\n- **Concurrency**: 5 eÅŸzamanlÄ± iÅŸ\n- **Retry**: 3 deneme\n- **Backoff**: Exponential (2 saniye baÅŸlangÄ±Ã§)\n- **Cleanup**: 100 tamamlanan, 50 baÅŸarÄ±sÄ±z iÅŸ tutulur\n\n## ğŸ“– KullanÄ±m Ã–rnekleri\n\n### Cache KullanÄ±mÄ±\n\n```typescript\nimport { CacheService } from '../infrastructure/cache/cache.service';\n\nconst cacheService = CacheService.getInstance();\n\n// Veri cache'le\nawait cacheService.set('user:123:profile', userData, 3600);\n\n// Cache'ten veri al\nconst cachedUser = await cacheService.get<User>('user:123:profile');\n\n// Cache'i temizle\nawait cacheService.del('user:123:profile');\n```\n\n### Queue KullanÄ±mÄ±\n\n```typescript\nimport { QueueProvider } from '../infrastructure/queue/queue.provider';\n\nconst queueProvider = QueueProvider.getInstance();\n\n// Bildirim iÅŸi ekle\nawait queueProvider.addNotificationJob({\n  type: 'NEW_BADGE',\n  userId: 123,\n  badgeName: 'Ä°lk Post',\n  badgeIcon: 'ğŸ¯'\n});\n\n// Analitik iÅŸi ekle\nawait queueProvider.addAnalyticsJob({\n  event: 'user_login',\n  userId: 123,\n  data: { timestamp: new Date() }\n});\n```\n\n### User Service Cache Entegrasyonu\n\n```typescript\nimport { UserService } from '../application/user/user.service';\n\nconst userService = new UserService();\n\n// Cache'li profil getirme\nconst profile = await userService.getUserProfile(123);\n\n// Profil gÃ¼ncelleme (cache otomatik temizlenir)\nawait userService.updateUserProfile(123, { email: 'new@email.com' });\n```\n\n### Gamification Service Queue Entegrasyonu\n\n```typescript\nimport { GamificationService } from '../application/gamification/gamification.service';\n\nconst gamificationService = new GamificationService();\n\n// Rozet ver (bildirim otomatik kuyruÄŸa eklenir)\nawait gamificationService.grantBadgeToUser(123, 1);\n```\n\n## ğŸ” Monitoring ve Debugging\n\n### Queue Durumu KontrolÃ¼\n```typescript\nconst queueProvider = QueueProvider.getInstance();\nconst status = await queueProvider.getQueueStatus('notifications');\nconsole.log(status);\n// { waiting: 5, active: 2, completed: 100, failed: 3 }\n```\n\n### Cache BaÄŸlantÄ± Durumu\n```typescript\nconst cacheService = CacheService.getInstance();\nconst isConnected = cacheService.isCacheConnected();\nconsole.log('Cache connected:', isConnected);\n```\n\n### Log Takibi\nTÃ¼m cache ve queue iÅŸlemleri Winston logger ile loglanÄ±r:\n- **Debug**: Cache hit/miss, job ekleme\n- **Info**: BaÅŸarÄ±lÄ± iÅŸlemler, worker baÅŸlatma\n- **Error**: Hatalar, baÅŸarÄ±sÄ±z iÅŸler\n\n## ğŸš¨ Hata YÃ¶netimi\n\n### Cache HatalarÄ±\n- Cache baÄŸlantÄ± hatasÄ± durumunda doÄŸrudan veritabanÄ±na fallback\n- JSON parse/stringify hatalarÄ± loglanÄ±r ve null dÃ¶ndÃ¼rÃ¼lÃ¼r\n- TTL sÃ¼resi dolmuÅŸ veriler otomatik temizlenir\n\n### Queue HatalarÄ±\n- BaÅŸarÄ±sÄ±z iÅŸler otomatik retry edilir (3 kez)\n- Exponential backoff ile yeniden deneme\n- Worker hatasÄ± durumunda graceful shutdown\n- Socket.IO hatasÄ± durumunda job fail edilmez (geÃ§ici aÄŸ sorunu olabilir)\n\n## ğŸ”„ Graceful Shutdown\n\nSistem SIGTERM veya SIGINT sinyali aldÄ±ÄŸÄ±nda:\n1. HTTP server kapatÄ±lÄ±r\n2. Cache baÄŸlantÄ±sÄ± kapatÄ±lÄ±r\n3. TÃ¼m kuyruklar kapatÄ±lÄ±r\n4. Redis baÄŸlantÄ±larÄ± kapatÄ±lÄ±r\n5. Process gÃ¼venli ÅŸekilde sonlandÄ±rÄ±lÄ±r\n\n## ğŸ“Š Performans Ä°yileÅŸtirmeleri\n\n### Cache Hit Rate\n- KullanÄ±cÄ± profilleri iÃ§in %80+ cache hit rate beklenir\n- SÄ±k okunan veriler iÃ§in cache kullanÄ±mÄ± Ã¶nerilir\n\n### Queue Throughput\n- 5 eÅŸzamanlÄ± worker ile saniyede 50+ bildirim iÅŸlenebilir\n- Retry mekanizmasÄ± ile %99+ baÅŸarÄ± oranÄ±\n\n### Memory Usage\n- Redis memory kullanÄ±mÄ± cache TTL ile kontrol edilir\n- Queue cleanup ile memory leak Ã¶nlenir\n\n## ğŸ”® Gelecek GeliÅŸtirmeler\n\n- [ ] Cache warming (uygulama baÅŸlangÄ±cÄ±nda popÃ¼ler verileri cache'le)\n- [ ] Queue dashboard (Bull Board entegrasyonu)\n- [ ] Cache metrics (hit/miss oranlarÄ±)\n- [ ] Push notification entegrasyonu\n- [ ] Email notification worker'Ä±\n- [ ] Analytics worker'Ä±\n- [ ] Cache cluster desteÄŸi\n- [ ] Queue scaling (horizontal scaling)\n\n## ğŸ› Troubleshooting\n\n### Redis BaÄŸlantÄ± HatasÄ±\n```bash\n# Redis servisini kontrol et\ndocker-compose ps redis\n\n# Redis loglarÄ±nÄ± kontrol et\ndocker-compose logs redis\n```\n\n### Worker BaÅŸlatma HatasÄ±\n```bash\n# Worker loglarÄ±nÄ± kontrol et\nnpm run worker\n\n# Redis baÄŸlantÄ±sÄ±nÄ± test et\nredis-cli ping\n```\n\n### Cache Miss OranÄ± YÃ¼ksek\n- TTL sÃ¼relerini artÄ±rÄ±n\n- Cache key pattern'lerini optimize edin\n- SÄ±k gÃ¼ncellenen veriler iÃ§in cache invalidation stratejisi gÃ¶zden geÃ§irin\n\n### Queue Backlog\n- Worker sayÄ±sÄ±nÄ± artÄ±rÄ±n (concurrency)\n- Job priority'lerini ayarlayÄ±n\n- Retry stratejisini optimize edin\n",
      "category": "features"
    },
    {
      "id": "session-summary",
      "fileName": "SESSION_SUMMARY",
      "path": "SESSION_SUMMARY.md",
      "title": "Oturum Ã–zeti - Tipbox Backend DÃ¼zeltmeleri",
      "content": "# Oturum Ã–zeti - Tipbox Backend DÃ¼zeltmeleri\n\nBu dosya, bu oturumda yapÄ±lan tÃ¼m dÃ¼zeltmeleri ve iÅŸlemleri iÃ§erir.\n\n## ğŸ“… Tarih: 2024\n\n## ğŸ¯ YapÄ±lan Ä°ÅŸlemler\n\n### 1. TypeScript Tip HatalarÄ±nÄ±n DÃ¼zeltilmesi\n\n**Sorun:** \n- Prisma client tip uyumsuzluklarÄ±\n- `userId` iÃ§in `string` beklenirken `number` hatasÄ±\n- `userName` alanÄ±nÄ±n `ProfileUpdateInput`'ta bulunamamasÄ±\n\n**YapÄ±lan DÃ¼zeltmeler:**\n- Prisma client yeniden generate edildi\n- Docker container iÃ§indeki Prisma client gÃ¼ncellendi\n- Docker image cache olmadan yeniden build edildi\n\n**KullanÄ±lan Komutlar:**\n```bash\n# Yerel Prisma client'Ä± temizle ve yeniden generate et\nRemove-Item -Recurse -Force node_modules\\.prisma,node_modules\\@prisma\nnpm install @prisma/client\nnpx prisma generate\n\n# Container iÃ§inde Prisma client'Ä± generate et\ndocker-compose exec backend npx prisma generate\n\n# Docker image'Ä± yeniden build et\ndocker-compose build --no-cache backend\ndocker-compose up -d backend\n```\n\n### 2. Prisma Studio Entegrasyonu\n\n**YapÄ±lan Ä°ÅŸlemler:**\n- `package.json`'a `db:studio` script'i eklendi\n- `docker-compose.yml`'e ayrÄ± bir `prisma-studio` servisi eklendi (opsiyonel)\n\n**Eklenen Dosyalar:**\n- `package.json`: `\"db:studio\": \"prisma studio\"` script'i\n\n**KullanÄ±m:**\n```bash\n# Container iÃ§inde Ã§alÄ±ÅŸtÄ±r\ndocker-compose exec backend npx prisma studio --port 5555\n\n# veya package.json script'i ile\ndocker-compose exec backend npm run db:studio\n```\n\n### 3. VeritabanÄ± ÅemasÄ± UygulamasÄ±\n\n**YapÄ±lan Ä°ÅŸlemler:**\n- Prisma ÅŸemasÄ± veritabanÄ±na uygulandÄ±\n- TÃ¼m tablolar oluÅŸturuldu\n\n**KullanÄ±lan Komut:**\n```bash\ndocker-compose exec backend npx prisma db push\n```\n\n### 4. Seed Data YÃ¼kleme\n\n**YapÄ±lan Ä°ÅŸlemler:**\n- Test verileri veritabanÄ±na yÃ¼klendi\n- KullanÄ±cÄ±lar, kategoriler, Ã¼rÃ¼nler, NFT'ler ve daha fazlasÄ± oluÅŸturuldu\n\n**KullanÄ±lan Komut:**\n```bash\ndocker-compose exec backend npm run db:seed\n```\n\n**OluÅŸturulan Veriler:**\n- 3 User Theme\n- 8 Main Category\n- 4 Sub Category\n- 4 Badge Category\n- 6 Badge\n- 8 Comparison Metric\n- 30 NFT\n- 16 Marketplace Listing\n- Multiple Content Posts\n- Trust Relations\n- Feed Entries\n- Expert Requests\n- Brands\n- Wishbox Events\n\n## ğŸ“ DeÄŸiÅŸtirilen Dosyalar\n\n### 1. `package.json`\n**DeÄŸiÅŸiklik:** `db:studio` script'i eklendi\n```json\n{\n  \"scripts\": {\n    \"db:studio\": \"prisma studio\"\n  }\n}\n```\n\n### 2. `docker-compose.yml`\n**DeÄŸiÅŸiklik:** \n- Backend servisinden 5555 portu kaldÄ±rÄ±ldÄ±\n- Yeni `prisma-studio` servisi eklendi (opsiyonel kullanÄ±m iÃ§in)\n\n**Eklenen Servis:**\n```yaml\nprisma-studio:\n  build: .\n  container_name: tipbox_prisma_studio\n  restart: always\n  ports:\n    - \"5555:5555\"\n  environment:\n    - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/tipbox_dev\n  depends_on:\n    - postgres\n  volumes:\n    - .:/app\n    - /app/node_modules\n  working_dir: /app\n  command: npx prisma studio --port 5555 --browser none\n```\n\n## ğŸ” Tespit Edilen Sorunlar ve Ã‡Ã¶zÃ¼mleri\n\n### Sorun 1: Prisma Client Tip UyumsuzluklarÄ±\n**Neden:** Docker container iÃ§inde eski Prisma client cache'i\n**Ã‡Ã¶zÃ¼m:** Container iÃ§inde `npx prisma generate` Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± ve container yeniden build edildi\n\n### Sorun 2: VeritabanÄ± TablolarÄ±nÄ±n OlmamasÄ±\n**Neden:** Migration'lar uygulanmamÄ±ÅŸ\n**Ã‡Ã¶zÃ¼m:** `npx prisma db push` ile ÅŸema uygulandÄ±\n\n### Sorun 3: Seed Data'nÄ±n OlmamasÄ±\n**Neden:** Seed script'i Ã§alÄ±ÅŸtÄ±rÄ±lmamÄ±ÅŸ\n**Ã‡Ã¶zÃ¼m:** `npm run db:seed` komutu ile test verileri yÃ¼klendi\n\n## ğŸ› ï¸ KullanÄ±lan Teknik Komutlar Ã–zeti\n\n```bash\n# 1. Prisma Client GÃ¼ncelleme\ndocker-compose exec backend npx prisma generate\n\n# 2. Docker Container Yeniden Build\ndocker-compose build --no-cache backend\ndocker-compose up -d backend\n\n# 3. VeritabanÄ± ÅemasÄ± Uygulama\ndocker-compose exec backend npx prisma db push\n\n# 4. Seed Data YÃ¼kleme\ndocker-compose exec backend npm run db:seed\n\n# 5. Prisma Studio BaÅŸlatma\ndocker-compose exec backend npx prisma studio --port 5555\n\n# 6. Container LoglarÄ±nÄ± Ä°nceleme\ndocker-compose logs -f backend\n\n# 7. Container Durumunu Kontrol Etme\ndocker-compose ps\n```\n\n## âœ… DoÄŸrulama AdÄ±mlarÄ±\n\n1. **Container'larÄ±n Ã‡alÄ±ÅŸtÄ±ÄŸÄ±nÄ± Kontrol Edin:**\n   ```bash\n   docker-compose ps\n   ```\n   TÃ¼m servisler \"Up\" durumunda olmalÄ±.\n\n2. **Backend LoglarÄ±nÄ± Kontrol Edin:**\n   ```bash\n   docker-compose logs backend\n   ```\n   TypeScript hatalarÄ± olmamalÄ±.\n\n3. **VeritabanÄ±na BaÄŸlanÄ±n:**\n   ```bash\n   docker-compose exec postgres psql -U postgres -d tipbox_dev\n   ```\n   TablolarÄ±n oluÅŸturulduÄŸunu kontrol edin.\n\n4. **API'yi Test Edin:**\n   ```bash\n   curl http://localhost:3000/health\n   ```\n\n## ğŸ“‹ Ekip ArkadaÅŸlarÄ± Ä°Ã§in Checklist\n\n- [ ] Docker ve Docker Compose yÃ¼klÃ¼ mÃ¼?\n- [ ] `.env` dosyasÄ± oluÅŸturuldu mu?\n- [ ] `docker-compose up -d` Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ±?\n- [ ] `npx prisma db push` uygulandÄ± mÄ±?\n- [ ] `npx prisma generate` Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ±?\n- [ ] `npm run db:seed` Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ±?\n- [ ] Backend container Ã§alÄ±ÅŸÄ±yor mu? (`docker-compose ps`)\n- [ ] API eriÅŸilebilir mi? (`http://localhost:3000`)\n\n## ğŸ”„ Gelecek Ä°yileÅŸtirmeler\n\n1. **Migration Sistemi:** `prisma migrate` kullanÄ±mÄ±na geÃ§iÅŸ yapÄ±labilir\n2. **Seed Script Ä°yileÅŸtirmesi:** Idempotent hale getirilebilir\n3. **CI/CD:** Otomatik test ve deploy pipeline'Ä± eklenebilir\n4. **DokÃ¼mantasyon:** API endpoint'leri iÃ§in Swagger dokÃ¼mantasyonu geniÅŸletilebilir\n\n## ğŸ“š Referanslar\n\n- Prisma Schema: `prisma/schema.prisma`\n- Seed Script: `prisma/seed.ts`\n- Docker Compose: `docker-compose.yml`\n- Setup Guide: `docs/SETUP_GUIDE.md`\n\n---\n\n**Not:** Bu oturumda yapÄ±lan tÃ¼m deÄŸiÅŸiklikler commit edilmemiÅŸ olabilir. DeÄŸiÅŸiklikleri commit etmeden Ã¶nce test edin.\n\n",
      "category": "summaries"
    },
    {
      "id": "setup-guide",
      "fileName": "SETUP_GUIDE",
      "path": "SETUP_GUIDE.md",
      "title": "Tipbox Backend - Kurulum ve BaÅŸlangÄ±Ã§ Rehberi",
      "content": "# Tipbox Backend - Kurulum ve BaÅŸlangÄ±Ã§ Rehberi\n\nBu rehber, Tipbox Backend projesini ilk kez Ã§alÄ±ÅŸtÄ±rmak iÃ§in gereken tÃ¼m adÄ±mlarÄ± iÃ§erir.\n\n## ğŸ“‹ Ã–n Gereksinimler\n\n- Docker ve Docker Compose yÃ¼klÃ¼ olmalÄ±\n- Node.js 18+ (yerel geliÅŸtirme iÃ§in)\n- Git\n\n## ğŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§\n\n### 1. Projeyi KlonlayÄ±n\n\n```bash\ngit clone <repository-url>\ncd tipbox-backend\n```\n\n### 2. Ortam DeÄŸiÅŸkenlerini AyarlayÄ±n\n\n`.env` dosyasÄ±nÄ± oluÅŸturun ve gerekli deÄŸiÅŸkenleri ayarlayÄ±n:\n\n```bash\n# .env dosyasÄ± Ã¶rneÄŸi\nDATABASE_URL=postgresql://postgres:postgres@postgres:5432/tipbox_dev\nREDIS_URL=redis://redis:6379\nJWT_SECRET=your-super-secret-jwt-key-for-development-only\n```\n\n### 3. Docker Container'larÄ± BaÅŸlatÄ±n\n\n```bash\ndocker-compose up -d\n```\n\nBu komut ÅŸu servisleri baÅŸlatÄ±r:\n- PostgreSQL (port: 5432)\n- Redis (port: 6379)\n- MinIO (port: 9000, console: 9001)\n- PgAdmin (port: 5050)\n- Backend (port: 3000)\n\n### 4. VeritabanÄ± ÅemasÄ±nÄ± UygulayÄ±n\n\n```bash\ndocker-compose exec backend npx prisma db push\n```\n\nBu komut Prisma ÅŸemasÄ±nÄ± veritabanÄ±na uygular ve tablolarÄ± oluÅŸturur.\n\n### 5. Prisma Client'Ä± Generate Edin\n\n```bash\ndocker-compose exec backend npx prisma generate\n```\n\n**Not:** EÄŸer TypeScript tip hatalarÄ± alÄ±rsanÄ±z, bu komutu Ã§alÄ±ÅŸtÄ±rÄ±n.\n\n### 6. Seed Data'yÄ± YÃ¼kleyin\n\n```bash\ndocker-compose exec backend npm run db:seed\n```\n\nBu komut test verilerini veritabanÄ±na yÃ¼kler:\n- Test kullanÄ±cÄ±larÄ±\n- Kategoriler\n- ÃœrÃ¼nler\n- NFT'ler\n- Content post'lar\n- ve daha fazlasÄ±...\n\n### 7. Prisma Studio'yu BaÅŸlatÄ±n (Opsiyonel)\n\nVeritabanÄ±nÄ± gÃ¶rselleÅŸtirmek iÃ§in:\n\n```bash\ndocker-compose exec backend npx prisma studio --port 5555\n```\n\nTarayÄ±cÄ±da `http://localhost:5555` adresine gidin.\n\n## ğŸ”§ Sorun Giderme\n\n### TypeScript Tip HatalarÄ±\n\nEÄŸer Prisma client ile ilgili tip hatalarÄ± alÄ±rsanÄ±z:\n\n```bash\n# Container iÃ§inde Prisma client'Ä± yeniden generate edin\ndocker-compose exec backend npx prisma generate\n\n# Container'Ä± yeniden baÅŸlatÄ±n\ndocker-compose restart backend\n```\n\n### Docker Container'Ä± Yeniden Build Etme\n\nEÄŸer deÄŸiÅŸiklikler yansÄ±mÄ±yorsa:\n\n```bash\n# Image'Ä± cache olmadan yeniden build edin\ndocker-compose build --no-cache backend\n\n# Container'Ä± yeniden oluÅŸturun\ndocker-compose up -d backend\n```\n\n### VeritabanÄ± BaÄŸlantÄ± SorunlarÄ±\n\n```bash\n# PostgreSQL container'Ä±nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol edin\ndocker-compose ps\n\n# Container loglarÄ±nÄ± kontrol edin\ndocker-compose logs postgres\n```\n\n## ğŸ“ Test KullanÄ±cÄ± Bilgileri\n\nSeed iÅŸlemi sonrasÄ± aÅŸaÄŸÄ±daki test kullanÄ±cÄ±larÄ± oluÅŸturulur:\n\n### Ana Test KullanÄ±cÄ±sÄ±\n- **Email:** `omer@tipbox.co`\n- **Password:** `password123`\n- **User ID:** `480f5de9-b691-4d70-a6a8-2789226f4e07`\n\n### Market Test KullanÄ±cÄ±sÄ±\n- **Email:** `markettest@tipbox.co`\n- **Password:** `password123`\n- **User ID:** `248cc91f-b551-4ecc-a885-db1163571330`\n\n### Trust KullanÄ±cÄ±larÄ±\n- **Email:** `trust-user-0@tipbox.co` (0-4 arasÄ±)\n- **Password:** `password123`\n\n### Truster KullanÄ±cÄ±larÄ±\n- **Email:** `truster-user-0@tipbox.co` (0-2 arasÄ±)\n- **Password:** `password123`\n\n## ğŸ› ï¸ YararlÄ± Komutlar\n\n### Container Ä°ÅŸlemleri\n\n```bash\n# TÃ¼m container'larÄ± baÅŸlat\ndocker-compose up -d\n\n# Container'larÄ± durdur\ndocker-compose down\n\n# Container loglarÄ±nÄ± gÃ¶rÃ¼ntÃ¼le\ndocker-compose logs -f backend\n\n# Container'a baÄŸlan\ndocker-compose exec backend sh\n```\n\n### Prisma Ä°ÅŸlemleri\n\n```bash\n# ÅemayÄ± veritabanÄ±na uygula\ndocker-compose exec backend npx prisma db push\n\n# Migration oluÅŸtur (eÄŸer migration kullanÄ±yorsanÄ±z)\ndocker-compose exec backend npx prisma migrate dev\n\n# Seed Ã§alÄ±ÅŸtÄ±r\ndocker-compose exec backend npm run db:seed\n\n# Prisma Studio baÅŸlat\ndocker-compose exec backend npx prisma studio --port 5555\n```\n\n### VeritabanÄ± Ä°ÅŸlemleri\n\n```bash\n# PostgreSQL'e baÄŸlan\ndocker-compose exec postgres psql -U postgres -d tipbox_dev\n\n# VeritabanÄ±nÄ± sÄ±fÄ±rla (DÄ°KKAT: TÃ¼m veriler silinir!)\ndocker-compose exec backend npx prisma migrate reset\n```\n\n## ğŸ“¦ Proje YapÄ±sÄ±\n\n```\ntipbox-backend/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ application/     # Application layer (services)\nâ”‚   â”œâ”€â”€ domain/          # Domain entities\nâ”‚   â”œâ”€â”€ infrastructure/   # Infrastructure layer (repositories, external services)\nâ”‚   â””â”€â”€ interfaces/      # API endpoints\nâ”œâ”€â”€ prisma/\nâ”‚   â”œâ”€â”€ schema.prisma   # Prisma schema\nâ”‚   â””â”€â”€ seed.ts         # Seed script\nâ”œâ”€â”€ docker-compose.yml   # Docker services configuration\nâ””â”€â”€ Dockerfile          # Backend container image\n```\n\n## ğŸ” API Test Endpoints\n\nSeed iÅŸlemi sonrasÄ± test edebileceÄŸiniz endpoint'ler:\n\n### Feed\n- `GET /feed` - KullanÄ±cÄ± feed'i (auth token gerekli)\n- `GET /feed/filtered?types=feed,benchmark,post,question,tipsAndTricks`\n\n### User Profile\n- `GET /users/{userId}/profile-card`\n- `GET /users/{userId}/profile?tabs=feed,reviews,benchmarks,tips,replies,ladder`\n- `GET /users/{userId}/trusts` - Trust listesi\n- `GET /users/{userId}/trusters` - Truster listesi\n\n### Marketplace\n- `GET /marketplace/listings` - Aktif NFT listing'leri\n- `GET /marketplace/listings?type=BADGE&rarity=EPIC` - FiltrelenmiÅŸ listing'ler\n- `GET /marketplace/my-nfts` - KullanÄ±cÄ±nÄ±n NFT'leri (auth token gerekli)\n\n### Explore\n- `GET /explore/hottest` - Trend iÃ§erikler\n- `GET /explore/marketplace-banners` - Marketplace banner'larÄ±\n- `GET /explore/events` - Wishbox event'leri\n\n## âš ï¸ Ã–nemli Notlar\n\n1. **Prisma Client GÃ¼ncellemeleri:** Schema deÄŸiÅŸikliklerinden sonra mutlaka `npx prisma generate` Ã§alÄ±ÅŸtÄ±rÄ±n.\n\n2. **Docker Volume'lar:** `docker-compose down -v` komutu ile tÃ¼m volume'larÄ± siler (veritabanÄ± verileri dahil).\n\n3. **Port Ã‡akÄ±ÅŸmalarÄ±:** EÄŸer portlar kullanÄ±mda ise, `docker-compose.yml` dosyasÄ±ndaki port numaralarÄ±nÄ± deÄŸiÅŸtirin.\n\n4. **Seed Verileri:** Seed script'i idempotent deÄŸildir. Birden fazla Ã§alÄ±ÅŸtÄ±rÄ±rsanÄ±z duplicate veriler oluÅŸabilir.\n\n## ğŸ› YaygÄ±n Sorunlar ve Ã‡Ã¶zÃ¼mleri\n\n### Sorun: \"Port is already allocated\"\n**Ã‡Ã¶zÃ¼m:** Ä°lgili portu kullanan servisi durdurun veya `docker-compose.yml`'de port numarasÄ±nÄ± deÄŸiÅŸtirin.\n\n### Sorun: \"Table does not exist\"\n**Ã‡Ã¶zÃ¼m:** \n```bash\ndocker-compose exec backend npx prisma db push\n```\n\n### Sorun: \"Prisma Client type errors\"\n**Ã‡Ã¶zÃ¼m:**\n```bash\ndocker-compose exec backend npx prisma generate\ndocker-compose restart backend\n```\n\n### Sorun: \"Cannot connect to database\"\n**Ã‡Ã¶zÃ¼m:**\n```bash\n# PostgreSQL container'Ä±nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol edin\ndocker-compose ps postgres\n\n# Container'Ä± yeniden baÅŸlatÄ±n\ndocker-compose restart postgres\n```\n\n## ğŸ“š Ek Kaynaklar\n\n- [Prisma DokÃ¼mantasyonu](https://www.prisma.io/docs)\n- [Docker Compose DokÃ¼mantasyonu](https://docs.docker.com/compose/)\n- [PostgreSQL DokÃ¼mantasyonu](https://www.postgresql.org/docs/)\n\n## ğŸ¤ KatkÄ±da Bulunma\n\nYeni bir Ã¶zellik eklerken:\n1. Feature branch oluÅŸturun\n2. DeÄŸiÅŸikliklerinizi yapÄ±n\n3. Prisma schema deÄŸiÅŸikliklerini uygulayÄ±n (`npx prisma db push`)\n4. Seed script'i gÃ¼ncelleyin (gerekirse)\n5. Pull request oluÅŸturun\n\n---\n\n**Son GÃ¼ncelleme:** 2024\n**Versiyon:** 1.0.0\n\n",
      "category": "setup"
    },
    {
      "id": "socket-integration-summary",
      "fileName": "SOCKET_INTEGRATION_SUMMARY",
      "path": "SOCKET_INTEGRATION_SUMMARY.md",
      "title": "Socket.IO Entegrasyon Ã–zeti",
      "content": "# Socket.IO Entegrasyon Ã–zeti\n\nBu dokÃ¼mantasyon, Tipbox backend'deki Socket.IO entegrasyonlarÄ±nÄ± ve mesajlaÅŸma Ã¶zelliklerini Ã¶zetlemektedir.\n\n## ğŸ“‹ Ä°Ã§indekiler\n\n1. [Mevcut Socket AltyapÄ±sÄ±](#mevcut-socket-altyapÄ±sÄ±)\n2. [Socket Event'leri](#socket-eventleri)\n3. [Endpoint ve Socket Ä°liÅŸkileri](#endpoint-ve-socket-iliÅŸkileri)\n4. [Socket Handler MetodlarÄ±](#socket-handler-metodlarÄ±)\n5. [KullanÄ±m SenaryolarÄ±](#kullanÄ±m-senaryolarÄ±)\n\n---\n\n## ğŸ”§ Mevcut Socket AltyapÄ±sÄ±\n\n### Temel YapÄ±landÄ±rma\n\n| Ã–zellik | Durum | AÃ§Ä±klama |\n|---------|-------|----------|\n| **Socket.IO Server** | âœ… Aktif | Express server ile entegre |\n| **Redis Adapter** | âœ… Aktif | Horizontal scaling desteÄŸi |\n| **JWT Authentication** | âœ… Aktif | `socket.handshake.auth.token` |\n| **CORS** | âœ… YapÄ±landÄ±rÄ±lmÄ±ÅŸ | Environment variable'dan alÄ±nÄ±yor |\n| **Transport** | âœ… WebSocket + Polling | Fallback desteÄŸi |\n\n### Otomatik Ã–zellikler\n\n| Ã–zellik | AÃ§Ä±klama |\n|---------|----------|\n| **KullanÄ±cÄ± OdalarÄ±** | Her kullanÄ±cÄ± otomatik olarak `user:{userId}` odasÄ±na katÄ±lÄ±r |\n| **Connection Event** | BaÄŸlantÄ± kurulduÄŸunda `connected` event'i gÃ¶nderilir |\n| **Disconnect Handler** | KullanÄ±cÄ± ayrÄ±ldÄ±ÄŸÄ±nda loglanÄ±r |\n| **Heartbeat** | `ping`/`pong` mekanizmasÄ± aktif |\n\n---\n\n## ğŸ“¡ Socket Event'leri\n\n### Outgoing Events (Backend â†’ Frontend)\n\n| Event | Tetikleyen | Hedef | Payload | Durum |\n|-------|------------|-------|---------|-------|\n| `connected` | Connection | Origin socket | `{ message, userId, userEmail }` | âœ… Mevcut |\n| `new_message` | Endpoint | `user:{recipientId}`, `thread:{threadId}` | `NewMessageEvent` | âœ… Yeni |\n| `message_sent` | Endpoint | `user:{senderId}` | `MessageSentEvent` | âœ… Yeni |\n| `message_read` | Endpoint | `user:{senderId}`, `thread:{threadId}` | `MessageReadEvent` | âœ… GÃ¼ncellendi |\n| `user_typing` | Socket Event | `thread:{threadId}` (excl. origin) | `TypingEvent` | âœ… Yeni |\n| `thread_joined` | Socket Event | Origin socket | `{ threadId }` | âœ… Yeni |\n| `thread_left` | Socket Event | Origin socket | `{ threadId }` | âœ… Yeni |\n| `thread_join_error` | Socket Event | Origin socket | `{ threadId, reason }` | âœ… Yeni |\n| `pong` | Socket Event | Origin socket | - | âœ… Mevcut |\n\n### Incoming Events (Frontend â†’ Backend)\n\n| Event | Payload | AÃ§Ä±klama | Durum |\n|-------|---------|----------|-------|\n| `ping` | - | Heartbeat kontrolÃ¼ | âœ… Mevcut |\n| `join_thread` | `threadId: string` | Thread room'una katÄ±lma | âœ… Yeni |\n| `leave_thread` | `threadId: string` | Thread room'undan ayrÄ±lma | âœ… Yeni |\n| `typing_start` | `{ threadId: string }` | Yazma baÅŸladÄ± bildirimi | âœ… Yeni |\n| `typing_stop` | `{ threadId: string }` | Yazma durdu bildirimi | âœ… Yeni |\n\n---\n\n## ğŸ”— Endpoint ve Socket Ä°liÅŸkileri\n\n### Endpoint'lerden Tetiklenen Socket Event'leri\n\n| Endpoint | Method | Tetiklenen Event'ler | Service Metodu | AÃ§Ä±klama |\n|----------|--------|---------------------|----------------|----------|\n| `/messages` | POST | `new_message`<br>`message_sent` | `sendDirectMessage()` | Direkt mesaj gÃ¶nderildiÄŸinde |\n| `/messages/tips` | POST | `new_message`<br>`message_sent` | `sendTips()` | TIPS gÃ¶nderildiÄŸinde (messageType: 'send-tips') |\n| `/messages/support-requests` | POST | `new_message` | `createSupportRequest()` | Support request oluÅŸturulduÄŸunda (messageType: 'support-request') |\n| `/messages/:messageId/read` | POST | `message_read` | `markMessageAsRead()` | Mesaj okundu olarak iÅŸaretlendiÄŸinde |\n\n### Endpoint'lerden BaÄŸÄ±msÄ±z Socket Event'leri\n\n| Event | Tetikleyen | Endpoint BaÄŸÄ±mlÄ±lÄ±ÄŸÄ± | KullanÄ±m Senaryosu |\n|-------|------------|---------------------|-------------------|\n| `join_thread` | Frontend Socket | âŒ Yok | Thread sayfasÄ± aÃ§Ä±ldÄ±ÄŸÄ±nda |\n| `leave_thread` | Frontend Socket | âŒ Yok | Thread sayfasÄ± kapatÄ±ldÄ±ÄŸÄ±nda |\n| `typing_start` | Frontend Socket | âŒ Yok | Input'a yazmaya baÅŸladÄ±ÄŸÄ±nda |\n| `typing_stop` | Frontend Socket | âŒ Yok | Input'tan focus Ã§Ä±ktÄ±ÄŸÄ±nda veya belirli sÃ¼re yazÄ±lmadÄ±ÄŸÄ±nda |\n\n---\n\n## ğŸ› ï¸ Socket Handler MetodlarÄ±\n\n### Public Metodlar\n\n| Metod | Parametreler | AÃ§Ä±klama | KullanÄ±m Yeri |\n|-------|-------------|----------|---------------|\n| `sendMessageToUser()` | `userId, event, payload` | Belirli kullanÄ±cÄ±ya mesaj gÃ¶nder | MessagingService, SupportRequestService |\n| `sendToRoom()` | `room, event, payload` | Belirli odaya mesaj gÃ¶nder | MessagingService, SupportRequestService |\n| `broadcast()` | `event, payload` | TÃ¼m client'lara yayÄ±n | Genel kullanÄ±m |\n| `isUserConnected()` | `userId` | KullanÄ±cÄ± baÄŸlÄ± mÄ± kontrol | Genel kullanÄ±m |\n| `getConnectedUsersCount()` | - | BaÄŸlÄ± kullanÄ±cÄ± sayÄ±sÄ± | Genel kullanÄ±m |\n| `getRoomUsersCount()` | `room` | Oda kullanÄ±cÄ± sayÄ±sÄ± | Genel kullanÄ±m |\n\n### Private Metodlar\n\n| Metod | AÃ§Ä±klama |\n|-------|----------|\n| `setupAuthenticationMiddleware()` | JWT authentication middleware |\n| `setupConnectionHandlers()` | Connection/disconnect event handler'larÄ± |\n| `setupThreadHandlers()` | Thread room yÃ¶netimi (join_thread, leave_thread) |\n| `setupTypingHandlers()` | Typing indicators (typing_start, typing_stop) |\n\n---\n\n## ğŸ“Š Event Payload YapÄ±larÄ±\n\n### NewMessageEvent\n\n```typescript\n{\n  messageId: string;\n  threadId: string;\n  senderId: string;\n  recipientId: string;\n  message: string;\n  messageType: 'message' | 'support-request' | 'send-tips';\n  timestamp: string; // ISO 8601\n}\n```\n\n### MessageSentEvent\n\n```typescript\n// NewMessageEvent ile aynÄ± yapÄ±\n```\n\n### MessageReadEvent\n\n```typescript\n{\n  messageId: string;\n  threadId: string;\n  readBy: string;\n  timestamp: string; // ISO 8601\n}\n```\n\n### TypingEvent\n\n```typescript\n{\n  userId: string;\n  threadId: string;\n  isTyping: boolean;\n}\n```\n\n---\n\n## ğŸ¯ KullanÄ±m SenaryolarÄ±\n\n### Senaryo 1: Mesaj GÃ¶nderme\n\n1. **Frontend:** `POST /messages` endpoint'ine istek gÃ¶nderir\n2. **Backend:** `sendDirectMessage()` Ã§aÄŸrÄ±lÄ±r\n3. **Backend:** Mesaj veritabanÄ±na kaydedilir\n4. **Backend:** Socket event'leri tetiklenir:\n   - `new_message` â†’ AlÄ±cÄ±ya (`user:{recipientId}`) ve thread room'una (`thread:{threadId}`)\n   - `message_sent` â†’ GÃ¶ndericiye (`user:{senderId}`)\n5. **Frontend:** Socket Ã¼zerinden event'leri dinler ve UI'Ä± gÃ¼nceller\n\n### Senaryo 2: Thread Room YÃ¶netimi\n\n1. **Frontend:** Thread sayfasÄ± aÃ§Ä±ldÄ±ÄŸÄ±nda `socket.emit('join_thread', threadId)` gÃ¶nderir\n2. **Backend:** Thread eriÅŸim kontrolÃ¼ yapÄ±lÄ±r (`validateThreadAccess`)\n3. **Backend:** Socket `thread:{threadId}` room'una eklenir\n4. **Backend:** `thread_joined` event'i gÃ¶nderilir\n5. **Frontend:** Thread room'undaki mesajlarÄ± dinlemeye baÅŸlar\n\n### Senaryo 3: Typing Indicator\n\n1. **Frontend:** KullanÄ±cÄ± input'a yazmaya baÅŸladÄ±ÄŸÄ±nda `socket.emit('typing_start', { threadId })` gÃ¶nderir\n2. **Backend:** Thread eriÅŸim kontrolÃ¼ yapÄ±lÄ±r\n3. **Backend:** `user_typing` event'i thread room'undaki diÄŸer kullanÄ±cÄ±lara gÃ¶nderilir (isTyping: true)\n4. **Frontend:** KarÅŸÄ± taraf \"yazÄ±yor...\" gÃ¶stergesini gÃ¶rÃ¼r\n5. **Frontend:** Yazma durduÄŸunda `socket.emit('typing_stop', { threadId })` gÃ¶nderir\n6. **Backend:** `user_typing` event'i gÃ¶nderilir (isTyping: false)\n\n### Senaryo 4: Mesaj Okundu\n\n1. **Frontend:** `POST /messages/:messageId/read` endpoint'ine istek gÃ¶nderir\n2. **Backend:** `markMessageAsRead()` Ã§aÄŸrÄ±lÄ±r\n3. **Backend:** Mesaj okundu olarak iÅŸaretlenir\n4. **Backend:** `message_read` event'i gÃ¶ndericiye ve thread room'una gÃ¶nderilir\n5. **Frontend:** Thread aÃ§Ä±ksa okundu bilgisini anÄ±nda gÃ¶rÃ¼r\n\n---\n\n## ğŸ“ Ã–nemli Notlar\n\n### GÃ¼venlik\n\n- âœ… TÃ¼m socket baÄŸlantÄ±larÄ± JWT authentication gerektirir\n- âœ… Thread event'lerinde eriÅŸim kontrolÃ¼ yapÄ±lÄ±r (`validateThreadAccess`)\n- âœ… KullanÄ±cÄ±lar sadece kendi thread'lerine eriÅŸebilir\n\n### Performance\n\n- âœ… Redis adapter ile horizontal scaling desteklenir\n- âœ… Thread room'larÄ± gereksiz yere bÃ¼yÃ¼mez (leave_thread ile temizlenir)\n- âœ… Typing event'leri iÃ§in debounce/throttle eklenebilir (opsiyonel)\n\n### Hata YÃ¶netimi\n\n- âœ… TÃ¼m socket iÅŸlemleri try-catch ile korunur\n- âœ… Hata durumlarÄ±nda uygun event'ler gÃ¶nderilir (`thread_join_error`)\n- âœ… TÃ¼m iÅŸlemler loglanÄ±r\n\n---\n\n## ğŸ”„ DeÄŸiÅŸiklik GeÃ§miÅŸi\n\n### Mevcut (Ã–nceden Var Olan)\n\n- Socket.IO temel altyapÄ±sÄ±\n- JWT authentication\n- KullanÄ±cÄ± odalarÄ± (`user:{userId}`)\n- `connected`, `disconnect`, `ping`/`pong` event'leri\n- Helper metodlar (sendMessageToUser, sendToRoom, vb.)\n- `markMessageAsRead`'de socket kullanÄ±mÄ± (sadece gÃ¶ndericiye)\n\n### Yeni Eklenen (MesajlaÅŸma ile)\n\n- `new_message` event'i (mesaj, TIPS, support request iÃ§in)\n- `message_sent` event'i (gÃ¶nderici onayÄ±)\n- `message_read` event'i thread room'a da gÃ¶nderiliyor\n- `join_thread` / `leave_thread` event handler'larÄ±\n- `typing_start` / `typing_stop` event handler'larÄ±\n- Thread room yÃ¶netimi\n- Thread eriÅŸim kontrolÃ¼ (`validateThreadAccess`)\n\n---\n\n## ğŸ“š Ä°lgili Dosyalar\n\n- `src/infrastructure/realtime/socket.handler.ts` - Socket event handler'larÄ±\n- `src/infrastructure/realtime/socket-manager.ts` - Socket manager singleton\n- `src/infrastructure/realtime/messaging-events.ts` - Event interface'leri\n- `src/infrastructure/config/socket.config.ts` - Socket konfigÃ¼rasyonu\n- `src/application/messaging/messaging.service.ts` - MesajlaÅŸma servisi\n- `src/application/messaging/support-request.service.ts` - Support request servisi\n\n---\n\n**Son GÃ¼ncelleme:** 2025-01-12  \n**Versiyon:** 1.0.0\n\n",
      "category": "features"
    },
    {
      "id": "socket-io-integration",
      "fileName": "SOCKET_IO_INTEGRATION",
      "path": "SOCKET_IO_INTEGRATION.md",
      "title": "Socket.IO Entegrasyonu",
      "content": "# Socket.IO Entegrasyonu\n\nBu dokÃ¼mantasyon, TipBox backend projesine eklenen Socket.IO entegrasyonunun nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± ve nasÄ±l kullanÄ±lacaÄŸÄ±nÄ± aÃ§Ä±klar.\n\n## Kurulum ve YapÄ±landÄ±rma\n\n### 1. NPM Paketleri\nAÅŸaÄŸÄ±daki paketler `package.json` dosyasÄ±na eklenmiÅŸtir:\n- `socket.io`: WebSocket sunucusu\n- `redis`: Redis client\n- `@socket.io/redis-adapter`: Redis adapter for Socket.IO\n\n### 2. Docker Compose\n`docker-compose.yml` dosyasÄ±na Redis servisi eklenmiÅŸtir:\n```yaml\nredis:\n  image: redis:latest\n  container_name: tipbox_redis\n  restart: always\n  ports:\n    - \"6379:6379\"\n  volumes:\n    - redis_data:/data\n  command: redis-server --appendonly yes\n```\n\n### 3. Environment Variables\n`.env` dosyasÄ±na aÅŸaÄŸÄ±daki deÄŸiÅŸkenler eklenmelidir:\n```env\nREDIS_URL=redis://localhost:6379\nCORS_ORIGINS=http://localhost:3000,https://your-frontend-domain.com\nCORS_METHODS=GET,POST,PUT,DELETE,OPTIONS\n```\n\n## Mimari\n\n### KonfigÃ¼rasyon KatmanÄ±\n- `src/infrastructure/config/redis.config.ts`: Redis baÄŸlantÄ± yÃ¶netimi\n- `src/infrastructure/config/socket.config.ts`: Socket.IO CORS ve transport ayarlarÄ±\n\n### Realtime KatmanÄ±\n- `src/infrastructure/realtime/socket.handler.ts`: Socket baÄŸlantÄ± yÃ¶netimi ve kimlik doÄŸrulama\n- `src/infrastructure/realtime/socket-manager.ts`: Global SocketHandler eriÅŸimi iÃ§in singleton pattern\n\n### Application KatmanÄ±\n- `src/application/interaction/interaction.service.ts`: BeÄŸeni, favori gibi etkileÅŸimler iÃ§in Socket bildirimleri\n- `src/application/messaging/messaging.service.ts`: AnlÄ±k mesajlaÅŸma iÃ§in Socket entegrasyonu\n\n## KullanÄ±m\n\n### 1. Sunucu BaÅŸlatma\nSunucu baÅŸlatÄ±ldÄ±ÄŸÄ±nda Socket.IO otomatik olarak kurulur ve Redis adapter ile yapÄ±landÄ±rÄ±lÄ±r.\n\n### 2. Client BaÄŸlantÄ±sÄ±\nClient tarafÄ±nda Socket.IO baÄŸlantÄ±sÄ± kurulurken JWT token gÃ¶nderilmelidir:\n\n```javascript\nimport { io } from 'socket.io-client';\n\nconst socket = io('http://localhost:3000', {\n  auth: {\n    token: 'your-jwt-token'\n  }\n});\n```\n\n### 3. Kimlik DoÄŸrulama\nHer baÄŸlantÄ± kurulduÄŸunda:\n1. Client'tan JWT token alÄ±nÄ±r\n2. Token doÄŸrulanÄ±r\n3. KullanÄ±cÄ± bilgileri socket.data'ya eklenir\n4. KullanÄ±cÄ± kendi Ã¶zel odasÄ±na katÄ±lÄ±r\n\n### 4. Bildirim GÃ¶nderme\n\n#### Belirli KullanÄ±cÄ±ya Bildirim\n```typescript\nimport SocketManager from '../infrastructure/realtime/socket-manager';\n\n// KullanÄ±cÄ±ya bildirim gÃ¶nder\nSocketManager.getInstance().getSocketHandler().sendMessageToUser(\n  userId,\n  'new_notification',\n  {\n    type: 'post_liked',\n    message: 'GÃ¶nderiniz beÄŸenildi',\n    timestamp: new Date().toISOString()\n  }\n);\n```\n\n#### TÃ¼m KullanÄ±cÄ±lara YayÄ±n\n```typescript\n// TÃ¼m baÄŸlÄ± kullanÄ±cÄ±lara yayÄ±n\nSocketManager.getInstance().getSocketHandler().broadcast(\n  'system_announcement',\n  {\n    message: 'Sistem bakÄ±mÄ± yapÄ±lacak',\n    timestamp: new Date().toISOString()\n  }\n);\n```\n\n#### Belirli Odaya Mesaj\n```typescript\n// Belirli bir odaya mesaj gÃ¶nder\nSocketManager.getInstance().getSocketHandler().sendToRoom(\n  'room_name',\n  'room_message',\n  {\n    message: 'Oda mesajÄ±',\n    timestamp: new Date().toISOString()\n  }\n);\n```\n\n## Event TÃ¼rleri\n\n### Client'tan Sunucuya\n- `ping`: Heartbeat kontrolÃ¼\n- `disconnect`: BaÄŸlantÄ± kesilme\n\n### Sunucudan Client'a\n- `connected`: BaÅŸarÄ±lÄ± baÄŸlantÄ± onayÄ±\n- `pong`: Ping yanÄ±tÄ±\n- `new_notification`: Yeni bildirim\n- `new_message`: Yeni mesaj\n- `message_sent`: Mesaj gÃ¶nderilme onayÄ±\n- `message_read`: Mesaj okundu bildirimi\n\n## Ã–rnek KullanÄ±m SenaryolarÄ±\n\n### 1. Post BeÄŸenme\n```typescript\n// InteractionService iÃ§inde\nasync likePost(userId: number, postId: number): Promise<ContentLike> {\n  // BeÄŸeniyi veritabanÄ±na kaydet\n  const like = await this.contentLikeRepo.create({...});\n  \n  // Post sahibine bildirim gÃ¶nder\n  SocketManager.getInstance().getSocketHandler().sendMessageToUser(\n    post.authorId.toString(),\n    'new_notification',\n    {\n      type: 'post_liked',\n      message: `${liker.name} gÃ¶nderinizi beÄŸendi.`,\n      postId: post.id,\n      timestamp: new Date().toISOString()\n    }\n  );\n  \n  return like;\n}\n```\n\n### 2. AnlÄ±k MesajlaÅŸma\n```typescript\n// MessagingService iÃ§inde\nasync sendMessage(data: SendMessageData): Promise<DmMessage> {\n  // MesajÄ± veritabanÄ±na kaydet\n  const message = await this.dmMessageRepo.create({...});\n  \n  // AlÄ±cÄ±ya anlÄ±k mesaj gÃ¶nder\n  SocketManager.getInstance().getSocketHandler().sendMessageToUser(\n    data.recipientId.toString(),\n    'new_message',\n    {\n      messageId: message.id,\n      senderId: message.senderId,\n      content: message.content,\n      timestamp: message.createdAt.toISOString()\n    }\n  );\n  \n  return message;\n}\n```\n\n## GÃ¼venlik\n\n- TÃ¼m Socket baÄŸlantÄ±larÄ± JWT token ile doÄŸrulanÄ±r\n- KullanÄ±cÄ±lar sadece kendi Ã¶zel odalarÄ±na eriÅŸebilir\n- CORS ayarlarÄ± environment variable'lardan okunur\n- Redis adapter ile horizontal scaling desteklenir\n\n## Monitoring ve Logging\n\n- TÃ¼m Socket baÄŸlantÄ±larÄ± Winston logger ile loglanÄ±r\n- BaÄŸlantÄ±, baÄŸlantÄ± kesilme ve hata durumlarÄ± takip edilir\n- Redis baÄŸlantÄ± durumu monitÃ¶r edilir\n\n## Scaling\n\nRedis adapter sayesinde birden fazla sunucu instance'Ä± arasÄ±nda Socket.IO mesajlarÄ± senkronize edilir. Bu sayede:\n- Load balancer arkasÄ±nda birden fazla sunucu Ã§alÄ±ÅŸtÄ±rÄ±labilir\n- TÃ¼m kullanÄ±cÄ±lara mesaj gÃ¶nderilebilir\n- Room-based mesajlaÅŸma Ã§alÄ±ÅŸÄ±r\n",
      "category": "features"
    },
    {
      "id": "socket-testing",
      "fileName": "SOCKET_TESTING",
      "path": "SOCKET_TESTING.md",
      "title": "Socket.IO Test Rehberi",
      "content": "# Socket.IO Test Rehberi\n\nBu dokÃ¼mantasyon, mesajlaÅŸma socket baÄŸlantÄ±larÄ±nÄ± test etmek iÃ§in kullanabileceÄŸiniz araÃ§larÄ± ve yÃ¶ntemleri aÃ§Ä±klar.\n\n## Test AraÃ§larÄ±\n\n### 1. HTML Test SayfasÄ± (Ã–nerilen - En Kolay)\n\n**Dosya:** `test-socket.html`\n\n**KullanÄ±m:**\n1. TarayÄ±cÄ±da `test-socket.html` dosyasÄ±nÄ± aÃ§Ä±n\n2. JWT token'Ä±nÄ±zÄ± girin (login endpoint'inden alÄ±n)\n3. \"BaÄŸlan\" butonuna tÄ±klayÄ±n\n4. Thread ID girip thread'e katÄ±lÄ±n\n5. Mesaj gÃ¶nderin ve event'leri canlÄ± izleyin\n\n**Ã–zellikler:**\n- âœ… GÃ¶rsel arayÃ¼z\n- âœ… TÃ¼m event'leri canlÄ± gÃ¶rÃ¼ntÃ¼leme\n- âœ… Mesaj gÃ¶nderme (REST API)\n- âœ… Thread yÃ¶netimi\n- âœ… Typing indicator testi\n- âœ… Event log'u\n\n### 2. Node.js Test Scripti\n\n**Dosya:** `test-socket.js`\n\n**Kurulum:**\n```bash\nnpm install socket.io-client\n```\n\n**KullanÄ±m:**\n```bash\n# JWT token'Ä±nÄ±zÄ± alÄ±n (login endpoint'inden)\nnode test-socket.js \"YOUR_JWT_TOKEN\" http://localhost:3000\n```\n\n**Komutlar:**\n- `join <threadId>` - Thread'e katÄ±l\n- `leave <threadId>` - Thread'den ayrÄ±l\n- `typing_start <threadId>` - Yazma gÃ¶stergesi baÅŸlat\n- `typing_stop <threadId>` - Yazma gÃ¶stergesi durdur\n- `ping` - Ping gÃ¶nder\n- `quit` - Ã‡Ä±kÄ±ÅŸ\n\n### 3. Browser Console (HÄ±zlÄ± Test)\n\nTarayÄ±cÄ± console'unda direkt test edebilirsiniz:\n\n```javascript\n// Socket.IO client CDN'i yÃ¼kleyin (eÄŸer yoksa)\n// <script src=\"https://cdn.socket.io/4.5.4/socket.io.min.js\"></script>\n\nconst socket = io('http://localhost:3000', {\n  auth: {\n    token: 'YOUR_JWT_TOKEN'\n  }\n});\n\n// Event dinleyicileri\nsocket.on('connect', () => console.log('âœ… BaÄŸlandÄ±'));\nsocket.on('new_message', (data) => console.log('ğŸ“¨ Yeni mesaj:', data));\nsocket.on('message_read', (data) => console.log('ğŸ‘ï¸ Okundu:', data));\nsocket.on('user_typing', (data) => console.log('âŒ¨ï¸ YazÄ±yor:', data));\n\n// Thread'e katÄ±l\nsocket.emit('join_thread', 'THREAD_ID');\n\n// Yazma gÃ¶stergesi\nsocket.emit('typing_start', { threadId: 'THREAD_ID' });\n```\n\n## Test SenaryolarÄ±\n\n### Senaryo 1: Ä°ki KullanÄ±cÄ± ile MesajlaÅŸma\n\n1. **Ä°ki farklÄ± tarayÄ±cÄ±/sekme aÃ§Ä±n** (veya iki farklÄ± JWT token kullanÄ±n)\n2. Her ikisinde de `test-socket.html` aÃ§Ä±n\n3. Her ikisinde de farklÄ± kullanÄ±cÄ± token'larÄ± ile baÄŸlanÄ±n\n4. Bir kullanÄ±cÄ± thread ID'yi alÄ±n (mesaj gÃ¶ndererek thread oluÅŸturun)\n5. Her iki kullanÄ±cÄ± da aynÄ± thread'e katÄ±lÄ±n\n6. Bir kullanÄ±cÄ± mesaj gÃ¶nderin\n7. DiÄŸer kullanÄ±cÄ±da `new_message` event'ini gÃ¶rmelisiniz\n\n### Senaryo 2: Thread OdasÄ± Testi\n\n1. KullanÄ±cÄ± A thread'e katÄ±lÄ±r (`join_thread`)\n2. KullanÄ±cÄ± B thread'e katÄ±lÄ±r\n3. KullanÄ±cÄ± A mesaj gÃ¶nderir\n4. Her iki kullanÄ±cÄ± da `new_message` event'ini almalÄ± (thread odasÄ±ndan)\n5. KullanÄ±cÄ± A thread'den ayrÄ±lÄ±r (`leave_thread`)\n6. KullanÄ±cÄ± B mesaj gÃ¶nderir\n7. KullanÄ±cÄ± A sadece kendi odasÄ±ndan (`user:{userId}`) bildirim almalÄ±\n\n### Senaryo 3: Typing Indicator\n\n1. Ä°ki kullanÄ±cÄ± aynÄ± thread'de\n2. KullanÄ±cÄ± A `typing_start` gÃ¶nderir\n3. KullanÄ±cÄ± B `user_typing` event'ini almalÄ± (`isTyping: true`)\n4. KullanÄ±cÄ± A `typing_stop` gÃ¶nderir\n5. KullanÄ±cÄ± B `user_typing` event'ini almalÄ± (`isTyping: false`)\n\n### Senaryo 4: Okundu Bilgisi\n\n1. KullanÄ±cÄ± A mesaj gÃ¶nderir\n2. KullanÄ±cÄ± B mesajÄ± okur (REST API: `POST /messages/{messageId}/read`)\n3. KullanÄ±cÄ± A `message_read` event'ini almalÄ±\n4. EÄŸer her iki kullanÄ±cÄ± da thread'deyse, thread odasÄ±ndan event gelir\n\n### Senaryo 5: Presence (Online/Offline)\n\n1. KullanÄ±cÄ± A baÄŸlanÄ±r\n2. TÃ¼m client'lar `user_presence` event'ini almalÄ± (`status: 'online'`)\n3. KullanÄ±cÄ± A baÄŸlantÄ±yÄ± keser\n4. TÃ¼m client'lar `user_presence` event'ini almalÄ± (`status: 'offline'`)\n\n## REST API ile Mesaj GÃ¶nderme\n\nSocket event'lerini tetiklemek iÃ§in REST endpoint'lerini kullanabilirsiniz:\n\n```bash\n# Mesaj gÃ¶nder\ncurl -X POST http://localhost:3000/messages \\\n  -H \"Authorization: Bearer YOUR_JWT_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"recipientId\": \"USER_ID\",\n    \"message\": \"Test mesajÄ±\"\n  }'\n\n# MesajÄ± okundu olarak iÅŸaretle\ncurl -X POST http://localhost:3000/messages/MESSAGE_ID/read \\\n  -H \"Authorization: Bearer YOUR_JWT_TOKEN\"\n\n# TIPS gÃ¶nder\ncurl -X POST http://localhost:3000/messages/tips \\\n  -H \"Authorization: Bearer YOUR_JWT_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"recipientId\": \"USER_ID\",\n    \"amount\": 100,\n    \"message\": \"TeÅŸekkÃ¼rler!\"\n  }'\n```\n\n## Beklenen Event'ler\n\n### Gelen Event'ler (Backend'den)\n\n| Event | Ne Zaman | Payload |\n|-------|----------|---------|\n| `connected` | BaÄŸlantÄ± kurulduÄŸunda | `{ message, userId, userEmail }` |\n| `new_message` | Yeni mesaj geldiÄŸinde | `NewMessageEvent` |\n| `message_sent` | Mesaj gÃ¶nderildiÄŸinde (onay) | `MessageSentEvent` |\n| `message_read` | Mesaj okunduÄŸunda | `MessageReadEvent` |\n| `user_typing` | KullanÄ±cÄ± yazÄ±yor/yazmayÄ± durdurdu | `TypingEvent` |\n| `user_presence` | KullanÄ±cÄ± online/offline oldu | `PresenceEvent` |\n| `thread_joined` | Thread'e katÄ±ldÄ±ÄŸÄ±nÄ±zda | `{ threadId }` |\n| `thread_left` | Thread'den ayrÄ±ldÄ±ÄŸÄ±nÄ±zda | `{ threadId }` |\n| `thread_join_error` | Thread'e katÄ±lma hatasÄ± | `{ threadId, reason }` |\n\n### GÃ¶nderilen Event'ler (Client'tan)\n\n| Event | Ne Zaman | Payload |\n|-------|----------|---------|\n| `join_thread` | Thread sayfasÄ± aÃ§Ä±ldÄ±ÄŸÄ±nda | `threadId` (string) |\n| `leave_thread` | Thread sayfasÄ± kapatÄ±ldÄ±ÄŸÄ±nda | `threadId` (string) |\n| `typing_start` | Yazmaya baÅŸladÄ±ÄŸÄ±nda | `{ threadId }` |\n| `typing_stop` | YazmayÄ± durdurduÄŸunda | `{ threadId }` |\n| `ping` | Heartbeat iÃ§in | - |\n\n## Sorun Giderme\n\n### \"Authentication token required\" hatasÄ±\n- JWT token'Ä±nÄ±zÄ± kontrol edin\n- Token'Ä±n geÃ§erli olduÄŸundan emin olun (login endpoint'inden yeni token alÄ±n)\n\n### \"Thread join error: unauthorized\"\n- Thread ID'nin doÄŸru olduÄŸundan emin olun\n- KullanÄ±cÄ±nÄ±n thread'e eriÅŸim yetkisi olduÄŸundan emin olun (thread participant'Ä± olmalÄ±)\n\n### Event'ler gelmiyor\n- Socket baÄŸlantÄ±sÄ±nÄ±n aktif olduÄŸundan emin olun (`connect` event'i geldi mi?)\n- Thread'e katÄ±ldÄ±nÄ±z mÄ±? (`join_thread` gÃ¶nderdiniz mi?)\n- Server log'larÄ±nÄ± kontrol edin\n\n### CORS hatasÄ±\n- `.env` dosyasÄ±nda `CORS_ORIGINS` ayarÄ±nÄ± kontrol edin\n- Test sayfasÄ±nÄ± aÃ§tÄ±ÄŸÄ±nÄ±z URL'in CORS listesinde olduÄŸundan emin olun\n\n## Debug Ä°puÃ§larÄ±\n\n1. **Server log'larÄ±nÄ± izleyin:**\n   ```bash\n   docker logs -f tipbox_backend\n   ```\n\n2. **Socket baÄŸlantÄ± durumunu kontrol edin:**\n   - Browser console'da `socket.connected` deÄŸerini kontrol edin\n   - `socket.id` ile socket ID'yi gÃ¶rebilirsiniz\n\n3. **Event'leri manuel dinleyin:**\n   ```javascript\n   socket.onAny((event, ...args) => {\n     console.log('Event:', event, args);\n   });\n   ```\n\n4. **Redis adapter durumunu kontrol edin:**\n   - Redis'in Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun\n   - Birden fazla server instance'Ä± varsa, Redis adapter sayesinde event'ler tÃ¼m instance'lara yayÄ±lÄ±r\n\n\n",
      "category": "development"
    },
    {
      "id": "swagger-troubleshooting",
      "fileName": "SWAGGER_TROUBLESHOOTING",
      "path": "SWAGGER_TROUBLESHOOTING.md",
      "title": "Swagger Endpoint GÃ¶rÃ¼nÃ¼rlÃ¼k SorunlarÄ± ve Ã‡Ã¶zÃ¼mler",
      "content": "# Swagger Endpoint GÃ¶rÃ¼nÃ¼rlÃ¼k SorunlarÄ± ve Ã‡Ã¶zÃ¼mler\n\n## Problem\nYeni eklenen endpoint'ler Swagger UI'da gÃ¶rÃ¼nmÃ¼yor.\n\n## Otomatik Ã‡Ã¶zÃ¼m\n\nEn kolay yol, hazÄ±rladÄ±ÄŸÄ±mÄ±z script'i kullanmak:\n\n```bash\n./scripts/check-swagger.sh\n```\n\nBu script:\n1. Backend container'Ä±nÄ±n Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± kontrol eder\n2. TypeScript dosyalarÄ±nÄ± derler\n3. Container'Ä± restart eder\n4. Swagger endpoint'lerini kontrol eder ve listeler\n\n## Manuel Ã‡Ã¶zÃ¼mler\n\n### 1. TarayÄ±cÄ± Cache'ini Temizleme\nSwagger UI tarayÄ±cÄ± cache'ini kullanÄ±yor olabilir. ÅunlarÄ± deneyin:\n\n**Chrome/Edge:**\n- `Ctrl + Shift + R` (Windows/Linux) veya `Cmd + Shift + R` (Mac) ile hard refresh yapÄ±n\n- Veya Developer Tools aÃ§Ä±n (F12) ve Network tab'Ä±nda \"Disable cache\" iÅŸaretleyin\n\n**Firefox:**\n- `Ctrl + F5` (Windows/Linux) veya `Cmd + Shift + R` (Mac)\n- Veya Developer Tools'da Network tab'Ä±nda cache'i devre dÄ±ÅŸÄ± bÄ±rakÄ±n\n\n**Safari:**\n- `Cmd + Option + R` ile hard refresh\n- Veya Developer menÃ¼sÃ¼nden \"Empty Caches\" seÃ§eneÄŸini kullanÄ±n\n\n### 2. Swagger JSON Endpoint'ini Kontrol Etme\nEndpoint'lerin Swagger'a kayÄ±tlÄ± olup olmadÄ±ÄŸÄ±nÄ± kontrol edin:\n\n```bash\n# TÃ¼m endpoint'leri listele\ncurl http://localhost:3000/api-docs/swagger.json | jq '.paths | keys'\n\n# Auth endpoint'lerini filtrele\ncurl http://localhost:3000/api-docs/swagger.json | jq '.paths | keys | map(select(contains(\"auth\")))'\n\n# Belirli bir endpoint'i kontrol et\ncurl http://localhost:3000/api-docs/swagger.json | jq '.paths[\"/auth/forgot-password\"]'\n```\n\n### 3. Backend Container'Ä±nÄ± Restart Etme\nYeni endpoint'lerden sonra mutlaka container'Ä± restart edin:\n\n```bash\n# TypeScript'i derle\ndocker-compose exec backend npm run build\n\n# Container'Ä± restart et\ndocker-compose restart backend\n\n# Backend'in baÅŸlamasÄ±nÄ± bekle (yaklaÅŸÄ±k 10 saniye)\nsleep 10\n\n# Swagger JSON'u kontrol et\ncurl http://localhost:3000/api-docs/swagger.json | jq '.paths | keys'\n```\n\n### 4. Swagger Spec Yenileme\nSwagger spec artÄ±k dinamik olarak her request'te yeniden oluÅŸturuluyor. Bu cache sorunlarÄ±nÄ± Ã¶nler.\n\nSwagger JSON endpoint'i artÄ±k cache header'larÄ± ile korunuyor:\n- `Cache-Control: no-cache, no-store, must-revalidate`\n- `Pragma: no-cache`\n- `Expires: 0`\n\nBu sayede tarayÄ±cÄ± her zaman fresh spec alÄ±r.\n\n## Yeni Endpoint Eklerken Ä°zlenecek AdÄ±mlar\n\n1. **Endpoint'i route dosyasÄ±na ekleyin:**\n   ```typescript\n   /**\n    * @openapi\n    * /auth/new-endpoint:\n    *   post:\n    *     summary: Yeni endpoint\n    *     ...\n    */\n   router.post('/new-endpoint', ...);\n   ```\n\n2. **TypeScript'i derleyin:**\n   ```bash\n   docker-compose exec backend npm run build\n   ```\n\n3. **Container'Ä± restart edin:**\n   ```bash\n   docker-compose restart backend\n   ```\n\n4. **Swagger JSON'u kontrol edin:**\n   ```bash\n   curl http://localhost:3000/api-docs/swagger.json | jq '.paths | keys'\n   ```\n\n5. **TarayÄ±cÄ±yÄ± hard refresh yapÄ±n:**\n   - `Ctrl + Shift + R` veya `Cmd + Shift + R`\n\n## Sorun Devam Ediyorsa\n\n1. **Browser console'u kontrol edin:**\n   - F12 tuÅŸuna basÄ±n\n   - Console tab'Ä±na gidin\n   - Swagger ile ilgili hatalarÄ± kontrol edin\n\n2. **Network tab'Ä±nÄ± kontrol edin:**\n   - F12 â†’ Network tab\n   - Swagger JSON'un baÅŸarÄ±yla yÃ¼klendiÄŸini kontrol edin\n   - 200 status code alÄ±ndÄ±ÄŸÄ±ndan emin olun\n\n3. **Backend log'larÄ±nÄ± kontrol edin:**\n   ```bash\n   docker-compose logs backend | tail -50\n   ```\n\n4. **Swagger JSDoc yorumlarÄ±nÄ± kontrol edin:**\n   - `@openapi` yerine `@swagger` kullanmadÄ±ÄŸÄ±nÄ±zdan emin olun\n   - Yorum formatÄ±nÄ±n doÄŸru olduÄŸundan emin olun\n   - Indentation'Ä±n doÄŸru olduÄŸundan emin olun\n\n## Notlar\n\n- Swagger artÄ±k `dist/interfaces/**/*.js` dosyalarÄ±nÄ± Ã¶ncelikli olarak okur (Docker iÃ§in)\n- Swagger spec her request'te dinamik olarak oluÅŸturulur (cache sorunlarÄ±nÄ± Ã¶nlemek iÃ§in)\n- TÃ¼m endpoint'ler Swagger UI'da gÃ¶rÃ¼nÃ¼r olmalÄ±dÄ±r\n- Swagger JSON endpoint'i cache bypass header'larÄ± ile korunuyor\n\n## HÄ±zlÄ± Kontrol\n\nEndpoint'in Swagger'da gÃ¶rÃ¼nÃ¼p gÃ¶rÃ¼nmediÄŸini hÄ±zlÄ±ca kontrol etmek iÃ§in:\n\n```bash\ncurl -s http://localhost:3000/api-docs/swagger.json | jq '.paths | has(\"/auth/forgot-password\")'\n```\n\n`true` dÃ¶nerse endpoint Swagger'a kayÄ±tlÄ± demektir.\n\n\n",
      "category": "development"
    },
    {
      "id": "test",
      "fileName": "TEST",
      "path": "TEST.md",
      "title": "ğŸ§ª Test DokÃ¼mantasyonu",
      "content": "# ğŸ§ª Test DokÃ¼mantasyonu\n\n## ğŸ“‹ DosyanÄ±n AmacÄ±\n\nBu dokÃ¼mantasyon, Tipbox Backend projesindeki E2E test komutlarÄ±nÄ±, test sonrasÄ± otomatik aÃ§Ä±lan rapor URL'lerini ve yeni endpoint/router ekleme sÃ¼reÃ§lerini aÃ§Ä±klar.\n\n---\n\n## ğŸ¯ Test Kategorileri\n\n| Kategori | Test DosyasÄ± | Config DosyasÄ± | Rapor DosyasÄ± |\n|----------|--------------|----------------|---------------|\n| **Auth** | `tests/e2e/auth.test.ts` | `tests/jest-config/jest.config.auth.ts` | `auth-report.html` |\n| **User** | `tests/e2e/user.test.ts` | `tests/jest-config/jest.config.user.ts` | `user-report.html` |\n| **User Settings** | `tests/e2e/user-settings.test.ts` | `tests/jest-config/jest.config.user-settings.ts` | `user-settings-report.html` |\n| **Expert** | `tests/e2e/expert.test.ts` | `tests/jest-config/jest.config.expert.ts` | `expert-report.html` |\n| **Feed** | `tests/e2e/feed.test.ts` | `tests/jest-config/jest.config.feed.ts` | `feed-report.html` |\n| **Explore** | `tests/e2e/explore.test.ts` | `tests/jest-config/jest.config.explore.ts` | `explore-report.html` |\n| **Inventory** | `tests/e2e/inventory.test.ts` | `tests/jest-config/jest.config.inventory.ts` | `inventory-report.html` |\n| **Marketplace** | `tests/e2e/marketplace.test.ts` | `tests/jest-config/jest.config.marketplace.ts` | `marketplace-report.html` |\n\n---\n\n## ğŸš€ Test KomutlarÄ±\n\n### TÃ¼m Testleri Ã‡alÄ±ÅŸtÄ±rma\n\n```bash\nnpm run test:all\n```\n\n**Otomatik AÃ§Ä±lan URL:**\n- `http://localhost:8080/detailed-test-report.html` (Navigation bar ile tÃ¼m kategoriler)\n\n---\n\n### Ä°zole Testler (Kategori BazlÄ±)\n\n#### Auth Testleri\n```bash\nnpm run test:auth\n```\n- **URL:** `http://localhost:8080/auth-report.html`\n\n#### User Testleri\n```bash\nnpm run test:user\n```\n- **URL:** `http://localhost:8080/user-report.html`\n\n#### User Settings Testleri\n```bash\nnpm run test:user-settings\n```\n- **URL:** `http://localhost:8080/user-settings-report.html`\n\n#### Expert Testleri\n```bash\nnpm run test:expert\n```\n- **URL:** `http://localhost:8080/expert-report.html`\n\n#### Feed Testleri\n```bash\nnpm run test:feed\n```\n- **URL:** `http://localhost:8080/feed-report.html`\n\n#### Explore Testleri\n```bash\nnpm run test:explore\n```\n- **URL:** `http://localhost:8080/explore-report.html`\n\n#### Inventory Testleri\n```bash\nnpm run test:inventory\n```\n- **URL:** `http://localhost:8080/inventory-report.html`\n\n#### Marketplace Testleri\n```bash\nnpm run test:marketplace\n```\n- **URL:** `http://localhost:8080/marketplace-report.html`\n\n---\n\n## ğŸ“ Test RaporlarÄ± ve Dosya YÃ¶netimi\n\n### Test RaporlarÄ± KlasÃ¶rÃ¼\n\n**KlasÃ¶r:** `test-results/`\n\n**Ã–nemli Notlar:**\n- `test-results/` klasÃ¶rÃ¼ silinebilir - testler tekrar Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda otomatik olarak yeniden oluÅŸturulur\n- Testler her Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda eski rapor dosyalarÄ± Ã¼zerine yazÄ±lÄ±r (gÃ¼ncel veriler kaydedilir)\n- Her HTML raporunda test tarihi saÄŸ Ã¼stte gÃ¶rÃ¼ntÃ¼lenir\n\n**Rapor DosyalarÄ±:**\n- `detailed-test-report.html` - TÃ¼m testler (Navigation bar ile)\n- `auth-report.html` - Auth testleri\n- `user-report.html` - User testleri\n- `user-settings-report.html` - User Settings testleri\n- `expert-report.html` - Expert testleri\n- `feed-report.html` - Feed testleri\n- `explore-report.html` - Explore testleri\n- `inventory-report.html` - Inventory testleri\n- `marketplace-report.html` - Marketplace testleri\n\n### Ekran GÃ¶rÃ¼ntÃ¼leri\n\n**KlasÃ¶r:** `screenshots/`\n\n- Eski testlere ait ekran gÃ¶rÃ¼ntÃ¼leri bu klasÃ¶rde saklanÄ±r\n- Test Ã§alÄ±ÅŸtÄ±rma sÄ±rasÄ±nda oluÅŸturulan screenshot'lar bu klasÃ¶rde tutulur\n\n---\n\n## â• Yeni Endpoint Ekleme\n\n### Endpoint Hangi Kategoriye Ait?\n\n| Router DosyasÄ± | Test DosyasÄ± | Komut |\n|----------------|--------------|-------|\n| `src/interfaces/auth/auth.router.ts` | `tests/e2e/auth.test.ts` | `npm run test:auth` |\n| `src/interfaces/user/user.router.ts` | `tests/e2e/user.test.ts` | `npm run test:user` |\n| `src/interfaces/user/user.router.ts` (settings) | `tests/e2e/user-settings.test.ts` | `npm run test:user-settings` |\n| `src/interfaces/expert/expert.router.ts` | `tests/e2e/expert.test.ts` | `npm run test:expert` |\n| `src/interfaces/feed/feed.router.ts` | `tests/e2e/feed.test.ts` | `npm run test:feed` |\n| `src/interfaces/explore/explore.router.ts` | `tests/e2e/explore.test.ts` | `npm run test:explore` |\n| `src/interfaces/inventory/inventory.router.ts` | `tests/e2e/inventory.test.ts` | `npm run test:inventory` |\n| `src/interfaces/marketplace/marketplace.router.ts` | `tests/e2e/marketplace.test.ts` | `npm run test:marketplace` |\n\n### AdÄ±mlar\n\n1. **Endpoint'i Router'a Ekle**\n   - Ä°lgili router dosyasÄ±na endpoint'i ekleyin\n   - Swagger dokÃ¼mantasyonu ekleyin (`@openapi` JSDoc)\n\n2. **Test DosyasÄ±na Test Ekle**\n   - YukarÄ±daki tabloya gÃ¶re ilgili test dosyasÄ±nÄ± bulun\n   - Test dosyasÄ±na yeni test ekleyin\n\n3. **Test Et**\n   ```bash\n   # Ä°zole test\n   npm run test:[kategori]\n   \n   # TÃ¼m testler\n   npm run test:all\n   ```\n\n**Ã–rnek:**\n- Yeni bir User endpoint'i eklediyseniz â†’ `tests/e2e/user.test.ts` dosyasÄ±na test ekleyin\n- Yeni bir Feed endpoint'i eklediyseniz â†’ `tests/e2e/feed.test.ts` dosyasÄ±na test ekleyin\n\n---\n\n## ğŸ†• Yeni Router/Kategori Ekleme\n\n### AdÄ±m 1: Router OluÅŸtur\n\n```typescript\n// src/interfaces/notifications/notifications.router.ts\nimport { Router, Request, Response } from 'express';\nimport { asyncHandler } from '../../infrastructure/errors/async-handler';\nimport { authMiddleware } from '../auth/auth.middleware';\n\nconst router = Router();\n\n/**\n * @openapi\n * /notifications:\n *   get:\n *     summary: KullanÄ±cÄ±nÄ±n bildirimlerini getir\n *     tags: [Notifications]\n *     security:\n *       - bearerAuth: []\n *     responses:\n *       200:\n *         description: Bildirim listesi\n */\nrouter.get(\n  '/',\n  authMiddleware,\n  asyncHandler(async (req: Request, res: Response) => {\n    // ... endpoint logic\n  })\n);\n\nexport default router;\n```\n\n### AdÄ±m 2: App.ts'e Router'Ä± Ekle\n\n```typescript\n// src/interfaces/app.ts\nimport notificationsRouter from './notifications/notifications.router';\n\napp.use('/notifications', notificationsRouter);\n```\n\n### AdÄ±m 3: Test DosyasÄ± OluÅŸtur\n\n```typescript\n// tests/e2e/notifications.test.ts\nimport request from 'supertest';\n\nconst BASE_URL = process.env.BASE_URL || 'http://localhost:3000';\n\ndescribe('Notifications API', () => {\n  let authToken: string;\n\n  beforeAll(async () => {\n    // Auth setup\n    const email = 'omer@tipbox.co';\n    const password = 'password123';\n    let loginRes = await request(BASE_URL)\n      .post('/auth/login')\n      .send({ email, password });\n    \n    if (!(loginRes.status === 200 && loginRes.body.token)) {\n      const uniqueEmail = `e2e_${Date.now()}@tipbox.co`;\n      const registerRes = await request(BASE_URL)\n        .post('/auth/register')\n        .send({ email: uniqueEmail, password, name: 'E2E User' });\n      \n      if (registerRes.status !== 201 && !registerRes.body.token) {\n        throw new Error('Failed to register test user');\n      }\n      \n      loginRes = await request(BASE_URL)\n        .post('/auth/login')\n        .send({ email: uniqueEmail, password });\n    }\n    \n    authToken = loginRes.body.token;\n  });\n\n  describe('GET /notifications', () => {\n    it('should return notifications', async () => {\n      const res = await request(BASE_URL)\n        .get('/notifications')\n        .set('Authorization', `Bearer ${authToken}`);\n      \n      expect([200, 204]).toContain(res.status);\n      if (res.status === 200) {\n        expect(Array.isArray(res.body)).toBe(true);\n      }\n    });\n\n    it('should return 401 without token', async () => {\n      const res = await request(BASE_URL)\n        .get('/notifications');\n      \n      expect(res.status).toBe(401);\n    });\n  });\n});\n```\n\n### AdÄ±m 4: Jest Config DosyasÄ± OluÅŸtur\n\n```typescript\n// tests/jest-config/jest.config.notifications.ts\nimport type { Config } from 'jest';\n\nconst config: Config = {\n  testEnvironment: 'node',\n  rootDir: '../..',\n  roots: ['<rootDir>/tests'],\n  testMatch: ['**/e2e/notifications.test.ts'],\n  moduleFileExtensions: ['ts', 'js', 'json'],\n  setupFilesAfterEnv: ['<rootDir>/tests/setup.ts'],\n  maxWorkers: 1,\n  verbose: true,\n  detectOpenHandles: true,\n  forceExit: true,\n  transform: {\n    '^.+\\\\.(ts)$': [\n      'ts-jest',\n      {\n        tsconfig: '<rootDir>/tsconfig.json',\n        isolatedModules: true,\n        diagnostics: false,\n      },\n    ],\n  },\n  reporters: [\n    'default',\n    [\n      'jest-html-reporters',\n      {\n        publicPath: './test-results',\n        filename: 'notifications-report.html',\n        openReport: false,\n        inlineSource: true,\n        expand: true,\n        pageTitle: 'Tipbox API Notifications Test Results',\n      },\n    ],\n    ['<rootDir>/scripts/custom-jest-reporter.js', {}],\n  ],\n  testTimeout: 30000,\n};\n\nexport default config;\n```\n\n### AdÄ±m 5: Package.json'a Script Ekle\n\n```json\n{\n  \"scripts\": {\n    \"test:notifications\": \"jest --config tests/jest-config/jest.config.notifications.ts && node scripts/open-test-report.js notifications-report.html\"\n  }\n}\n```\n\n### AdÄ±m 6: Test Et\n\n```bash\n# Ä°zole test\nnpm run test:notifications\n\n# TÃ¼m testler\nnpm run test:all\n```\n\n**Otomatik AÃ§Ä±lan URL:**\n- `http://localhost:8080/notifications-report.html`\n\n---\n\n## âœ… Checklist\n\n### Yeni Endpoint Ekleme\n- [ ] Endpoint'i ilgili router dosyasÄ±na ekle\n- [ ] Swagger dokÃ¼mantasyonu ekle (`@openapi` JSDoc)\n- [ ] Ä°lgili test dosyasÄ±na test ekle (yukarÄ±daki tabloya gÃ¶re)\n- [ ] Ä°zole testi Ã§alÄ±ÅŸtÄ±r: `npm run test:[kategori]`\n- [ ] TÃ¼m testleri Ã§alÄ±ÅŸtÄ±r: `npm run test:all`\n\n### Yeni Router/Kategori Ekleme\n- [ ] Router dosyasÄ± oluÅŸtur\n- [ ] `app.ts`'e router'Ä± ekle\n- [ ] Test dosyasÄ± oluÅŸtur\n- [ ] Jest config dosyasÄ± oluÅŸtur\n- [ ] `package.json`'a script ekle\n- [ ] Test et: `npm run test:[kategori]` ve `npm run test:all`\n",
      "category": "development"
    },
    {
      "id": "tipbox-knowledge-base",
      "fileName": "TIPBOX_KNOWLEDGE_BASE",
      "path": "TIPBOX_KNOWLEDGE_BASE.md",
      "title": "Tipbox Backend - KapsamlÄ± Teknik Knowledge Base",
      "content": "# Tipbox Backend - KapsamlÄ± Teknik Knowledge Base\n\n## ğŸ“‹ Ä°Ã§indekiler\n1. [Proje Genel BakÄ±ÅŸ](#proje-genel-bakÄ±ÅŸ)\n2. [Mimari YaklaÅŸÄ±m](#mimari-yaklaÅŸÄ±m)\n3. [Teknoloji Stack](#teknoloji-stack)\n4. [Domain-Driven Design (DDD) YapÄ±sÄ±](#domain-driven-design-ddd-yapÄ±sÄ±)\n5. [Database Schema ve Prisma](#database-schema-ve-prisma)\n6. [API Endpoint YapÄ±sÄ±](#api-endpoint-yapÄ±sÄ±)\n7. [Infrastructure KatmanÄ±](#infrastructure-katmanÄ±)\n8. [GÃ¼venlik ve Authentication](#gÃ¼venlik-ve-authentication)\n9. [Real-time Ã–zellikler](#real-time-Ã¶zellikler)\n10. [Queue ve Background Jobs](#queue-ve-background-jobs)\n11. [Caching Stratejisi](#caching-stratejisi)\n12. [Logging ve Monitoring](#logging-ve-monitoring)\n13. [Development Workflow](#development-workflow)\n14. [Deployment ve DevOps](#deployment-ve-devops)\n15. [Best Practices](#best-practices)\n\n---\n\n## ğŸ¯ Proje Genel BakÄ±ÅŸ\n\n**Tipbox Backend**, kullanÄ±cÄ±larÄ±n Ã¼rÃ¼n deneyimlerini paylaÅŸtÄ±ÄŸÄ±, gamification Ã¶zellikleri olan ve blockchain entegrasyonu bulunan sosyal bir platformun backend servisidir.\n\n### Ana Ã–zellikler:\n- **KullanÄ±cÄ± YÃ¶netimi**: Profil, ayarlar, KYC entegrasyonu\n- **Ä°Ã§erik Sistemi**: Post, soru, karÅŸÄ±laÅŸtÄ±rma, ipuÃ§larÄ±\n- **Gamification**: Rozet, baÅŸarÄ±, puan sistemi\n- **Blockchain**: Wallet entegrasyonu, NFT sistemi, token transferleri\n- **Real-time**: Socket.IO ile anlÄ±k mesajlaÅŸma\n- **Brand Bridge**: Marka-kullanÄ±cÄ± etkileÅŸim platformu\n- **Wishbox**: Senaryo tabanlÄ± etkinlik sistemi\n\n---\n\n## ğŸ—ï¸ Mimari YaklaÅŸÄ±m\n\n### Clean Architecture + Domain-Driven Design (DDD)\n\nProje, **Clean Architecture** prensiplerine uygun olarak **4 katmanlÄ±** bir yapÄ±da organize edilmiÅŸtir:\n\n```\nsrc/\nâ”œâ”€â”€ domain/           # Business Logic & Entities\nâ”œâ”€â”€ application/      # Use Cases & Services  \nâ”œâ”€â”€ infrastructure/   # External Concerns\nâ””â”€â”€ interfaces/       # API Layer\n```\n\n### Katman SorumluluklarÄ±:\n\n#### 1. Domain Layer (`src/domain/`)\n- **Business entities** ve **value objects**\n- **Domain services** ve **interfaces**\n- **Business rules** ve **validation logic**\n- **Enums** ve **types**\n\n#### 2. Application Layer (`src/application/`)\n- **Use case implementations**\n- **Application services**\n- **DTOs** ve **mappers**\n- **Business workflow orchestration**\n\n#### 3. Infrastructure Layer (`src/infrastructure/`)\n- **Database repositories** (Prisma)\n- **External service integrations**\n- **Caching** (Redis)\n- **Queue management** (BullMQ)\n- **Logging** (Winston)\n- **File storage** (S3/MinIO)\n\n#### 4. Interface Layer (`src/interfaces/`)\n- **REST API endpoints**\n- **Request/Response handling**\n- **Authentication middleware**\n- **API documentation** (Swagger)\n\n---\n\n## ğŸ› ï¸ Teknoloji Stack\n\n### Core Technologies\n- **Node.js** (v18+)\n- **TypeScript** (v5.8+)\n- **Express.js** (v4.21+)\n- **Prisma ORM** (v6.12+)\n- **PostgreSQL** (v15+)\n\n### Real-time & Caching\n- **Socket.IO** (v4.7+) - Real-time communication\n- **Redis** (v4.6+) - Caching & session storage\n- **BullMQ** (v5.15+) - Background job processing\n\n### Authentication & Security\n- **JWT** (jsonwebtoken v9.0+)\n- **Auth0** integration (planned)\n- **bcryptjs** (v3.0+) - Password hashing\n- **Helmet** (v8.1+) - Security headers\n\n### File Storage & Cloud\n- **AWS S3** (@aws-sdk/client-s3 v3.658+)\n- **MinIO** (local development)\n\n### Development Tools\n- **ESLint** (v9.30+) - Code linting\n- **Prettier** (v3.6+) - Code formatting\n- **Husky** (v9.1+) - Git hooks\n- **lint-staged** (v16.1+) - Pre-commit linting\n- **Nodemon** (v3.1+) - Development server\n\n### Documentation\n- **Swagger/OpenAPI** (swagger-jsdoc v6.2+)\n- **Winston** (v3.17+) - Logging\n- **Morgan** (v1.10+) - HTTP request logging\n\n---\n\n## ğŸ¯ Domain-Driven Design (DDD) YapÄ±sÄ±\n\n### Domain Entities\n\n#### User Domain\n```typescript\n// Core user entities\n- User (ana kullanÄ±cÄ± entity)\n- Profile (kullanÄ±cÄ± profili)\n- UserSettings (kullanÄ±cÄ± ayarlarÄ±)\n- UserRole (rol yÃ¶netimi)\n- UserTrustScore (gÃ¼ven skoru)\n- UserKycRecord (KYC kayÄ±tlarÄ±)\n```\n\n#### Content Domain\n```typescript\n// Ä°Ã§erik yÃ¶netimi\n- ContentPost (ana iÃ§erik)\n- PostQuestion (soru postlarÄ±)\n- PostComparison (karÅŸÄ±laÅŸtÄ±rma)\n- PostTip (ipucu postlarÄ±)\n- ContentComment (yorumlar)\n- ContentLike (beÄŸeniler)\n- ContentFavorite (favoriler)\n```\n\n#### Gamification Domain\n```typescript\n// OyunlaÅŸtÄ±rma sistemi\n- Badge (rozetler)\n- UserBadge (kullanÄ±cÄ± rozetleri)\n- AchievementGoal (baÅŸarÄ± hedefleri)\n- UserAchievement (kullanÄ±cÄ± baÅŸarÄ±larÄ±)\n- RewardClaim (Ã¶dÃ¼l talepleri)\n```\n\n#### Crypto Domain\n```typescript\n// Blockchain entegrasyonu\n- Wallet (cÃ¼zdan yÃ¶netimi)\n- NFT (NFT varlÄ±klarÄ±)\n- TipsTokenTransfer (token transferleri)\n- Lootbox (lootbox sistemi)\n```\n\n#### Brand Domain\n```typescript\n// Marka-kullanÄ±cÄ± kÃ¶prÃ¼sÃ¼\n- Brand (marka yÃ¶netimi)\n- BridgePost (marka postlarÄ±)\n- BrandSurvey (marka anketleri)\n- BridgeFollower (marka takipÃ§ileri)\n- BridgeLeaderboard (liderlik tablosu)\n```\n\n### Business Logic Patterns\n\n#### Entity Business Methods\nHer domain entity, kendi business logic'ini iÃ§erir:\n\n```typescript\n// Ã–rnek: User entity\nexport class User {\n  // Business methods\n  hasActiveWallet(): boolean\n  canReceiveTips(): boolean\n  getTrustLevel(): 'LOW' | 'MEDIUM' | 'HIGH'\n  isVerified(): boolean\n}\n\n// Ã–rnek: ContentPost entity  \nexport class ContentPost {\n  // Business methods\n  isQuestion(): boolean\n  isBoostedPost(): boolean\n  requiresInventory(): boolean\n  belongsToUser(userId: number): boolean\n}\n```\n\n---\n\n## ğŸ—„ï¸ Database Schema ve Prisma\n\n### Prisma Schema YapÄ±sÄ±\n\n**1672 satÄ±rlÄ±k** kapsamlÄ± Prisma schema ile **50+ model** tanÄ±mlanmÄ±ÅŸtÄ±r:\n\n#### Ana Model Kategorileri:\n\n1. **User Related Models** (15 model)\n   - User, Profile, UserSettings, UserRole, UserTrustScore, vb.\n\n2. **Content System Models** (12 model)\n   - ContentPost, ContentComment, ContentLike, ContentFavorite, vb.\n\n3. **Gamification Models** (8 model)\n   - Badge, UserBadge, AchievementGoal, UserAchievement, vb.\n\n4. **Crypto & NFT Models** (10 model)\n   - Wallet, NFT, TipsTokenTransfer, Lootbox, vb.\n\n5. **Brand & Bridge Models** (7 model)\n   - Brand, BridgePost, BrandSurvey, BridgeFollower, vb.\n\n6. **Messaging Models** (6 model)\n   - DMThread, DMMessage, DMRequest, DMSupportSession, vb.\n\n7. **Admin & Moderation Models** (4 model)\n   - AdminLog, ModerationAction, ManualReviewFlag, vb.\n\n### Repository Pattern Implementation\n\nHer domain entity iÃ§in **Prisma Repository** implementasyonu:\n\n```typescript\n// Ã–rnek: UserPrismaRepository\nexport class UserPrismaRepository {\n  private prisma = new PrismaClient();\n  \n  async findById(id: number): Promise<User | null>\n  async create(email: string, displayName?: string): Promise<User>\n  async findByEmail(email: string): Promise<User | null>\n  async update(id: number, data: Partial<User>): Promise<User | null>\n  async delete(id: number): Promise<boolean>\n  \n  // Domain mapping\n  private toDomain(prismaUser: any): User\n}\n```\n\n### Database Relationships\n\n- **One-to-One**: User â†” Profile, User â†” UserSettings\n- **One-to-Many**: User â†’ ContentPost, User â†’ Wallet\n- **Many-to-Many**: User â†” Badge (UserBadge), User â†” Brand (BridgeFollower)\n\n---\n\n## ğŸŒ API Endpoint YapÄ±sÄ±\n\n### REST API Organization\n\n#### Router Structure:\n```\nsrc/interfaces/\nâ”œâ”€â”€ app.ts              # Ana Express app\nâ”œâ”€â”€ server.ts           # HTTP server + Socket.IO\nâ”œâ”€â”€ auth/\nâ”‚   â”œâ”€â”€ auth.router.ts  # Authentication endpoints\nâ”‚   â””â”€â”€ auth.middleware.ts # JWT middleware\nâ”œâ”€â”€ user/\nâ”‚   â”œâ”€â”€ user.router.ts  # User management\nâ”‚   â””â”€â”€ user.dto.ts     # Data transfer objects\nâ””â”€â”€ wallet/\n    â”œâ”€â”€ wallet.router.ts # Wallet management\n    â””â”€â”€ wallet.dto.ts    # Wallet DTOs\n```\n\n#### API Endpoints:\n\n##### Authentication (`/auth`)\n- `POST /auth/login` - KullanÄ±cÄ± giriÅŸi\n- `POST /auth/register` - KullanÄ±cÄ± kaydÄ±\n- `POST /auth/refresh` - Token yenileme\n\n##### Users (`/users`)\n- `POST /users` - KullanÄ±cÄ± oluÅŸturma\n- `GET /users/:id` - KullanÄ±cÄ± detayÄ±\n- `PUT /users/:id` - KullanÄ±cÄ± gÃ¼ncelleme\n- `DELETE /users/:id` - KullanÄ±cÄ± silme\n\n##### Wallets (`/wallets`)\n- `GET /wallets` - KullanÄ±cÄ± cÃ¼zdanlarÄ±\n- `GET /wallets/active` - Aktif cÃ¼zdan\n- `POST /wallets/connect` - CÃ¼zdan baÄŸlama\n- `PUT /wallets/:id/disconnect` - CÃ¼zdan baÄŸlantÄ±sÄ±nÄ± kesme\n\n### Swagger Documentation\n\n**OpenAPI 3.0** standardÄ±nda API dokÃ¼mantasyonu:\n\n```typescript\nconst swaggerOptions = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Tipbox API',\n      version: '1.0.0',\n      description: 'Tipbox servisleri iÃ§in API dokÃ¼mantasyonu'\n    },\n    servers: [\n      { url: 'http://localhost:3000', description: 'Local' },\n      { url: 'https://api.tipbox.co', description: 'Production' }\n    ],\n    components: {\n      securitySchemes: {\n        bearerAuth: {\n          type: 'http',\n          scheme: 'bearer',\n          bearerFormat: 'JWT'\n        }\n      }\n    }\n  }\n};\n```\n\n### CORS Configuration\n\n```typescript\nconst corsOptions = {\n  origin: process.env.CORS_ORIGINS?.split(',') || [\n    'http://localhost:3000',\n    'https://app.tipbox.co'\n  ],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'Accept', 'Origin']\n};\n```\n\n---\n\n## ğŸ”§ Infrastructure KatmanÄ±\n\n### Configuration Management\n\n#### Environment Configuration\n```typescript\n// src/infrastructure/config/index.ts\ntype Config = {\n  databaseUrl: string;\n  port: number;\n  nodeEnv: string;\n};\n\n// Ortama gÃ¶re .env dosyasÄ± yÃ¼kleme\nconst envFile = `.env${process.env.NODE_ENV ? `.${process.env.NODE_ENV}` : ''}`;\n```\n\n#### Redis Configuration\n```typescript\n// src/infrastructure/config/redis.config.ts\nexport class RedisConfigManager {\n  async initialize(): Promise<RedisConfig> {\n    const pubClient = createClient({ url: redisUrl });\n    const subClient = createClient({ url: redisUrl });\n    // Error handling ve connection management\n  }\n}\n```\n\n#### Socket.IO Configuration\n```typescript\n// src/infrastructure/config/socket.config.ts\nexport class SocketConfigManager {\n  initialize(): SocketConfig {\n    return {\n      cors: { origin: origins, methods, credentials: true },\n      transports: ['websocket', 'polling'],\n      allowEIO3: false\n    };\n  }\n}\n```\n\n### Caching Strategy\n\n#### Redis Cache Service\n```typescript\n// src/infrastructure/cache/cache.service.ts\nexport class CacheService {\n  async get<T>(key: string): Promise<T | null>\n  async set(key: string, value: any, ttl?: number): Promise<void>\n  async delete(key: string): Promise<void>\n  async clear(): Promise<void>\n  async getKeys(pattern: string): Promise<string[]>\n}\n```\n\n#### Cache Patterns:\n- **User Data Caching**: KullanÄ±cÄ± profilleri ve ayarlarÄ±\n- **Content Caching**: PopÃ¼ler postlar ve kategoriler\n- **Session Storage**: JWT token'larÄ± ve session bilgileri\n- **Real-time Data**: Socket.IO room bilgileri\n\n### Queue Management\n\n#### BullMQ Integration\n```typescript\n// src/infrastructure/queue/queue.provider.ts\nexport class QueueProvider {\n  async addNotificationJob(data: NotificationJobData): Promise<Job>\n  async addAnalyticsJob(data: AnalyticsJobData): Promise<Job>\n  async getQueueStatus(queueName: string): Promise<QueueStatus>\n}\n```\n\n#### Queue Types:\n- **Notifications**: KullanÄ±cÄ± bildirimleri\n- **Analytics**: KullanÄ±cÄ± davranÄ±ÅŸ analizi\n- **Email**: E-posta gÃ¶nderimi\n- **File Processing**: Medya dosya iÅŸleme\n\n### File Storage\n\n#### S3/MinIO Service\n```typescript\n// src/infrastructure/s3/s3.service.ts\nexport class S3Service {\n  async generatePresignedUrl(fileName: string, fileType: string): Promise<string>\n  async uploadFile(file: Buffer, key: string): Promise<void>\n  async deleteFile(key: string): Promise<void>\n  async getFileUrl(key: string): Promise<string>\n}\n```\n\n---\n\n## ğŸ” GÃ¼venlik ve Authentication\n\n### JWT Authentication\n\n#### Token Management\n```typescript\n// src/infrastructure/auth/jwt.helper.ts\nexport function signJwt(payload: any): string\nexport function verifyJwt(token: string): any\nexport function generateRefreshToken(userId: number): string\n```\n\n#### Auth Middleware\n```typescript\n// src/interfaces/auth/auth.middleware.ts\nexport async function authMiddleware(req: Request, res: Response, next: NextFunction) {\n  const token = req.headers.authorization?.replace('Bearer ', '');\n  const user = await authService.validateToken(token);\n  if (!user) return res.status(401).json({ message: 'Unauthorized' });\n  req.user = user;\n  next();\n}\n```\n\n### Security Headers\n\n```typescript\n// Helmet.js ile gÃ¼venlik baÅŸlÄ±klarÄ±\napp.use(helmet({\n  contentSecurityPolicy: false,\n  crossOriginEmbedderPolicy: false\n}));\n```\n\n### Password Security\n\n```typescript\n// bcryptjs ile ÅŸifre hashleme\nconst passwordHash = await bcrypt.hash(password, 10);\nconst isValid = await bcrypt.compare(password, hashedPassword);\n```\n\n---\n\n## âš¡ Real-time Ã–zellikler\n\n### Socket.IO Implementation\n\n#### Socket Manager\n```typescript\n// src/infrastructure/realtime/socket-manager.ts\nexport class SocketManager {\n  initialize(io: Server): void {\n    io.on('connection', (socket) => {\n      // Connection handling\n      socket.on('join_room', (roomId) => this.handleJoinRoom(socket, roomId));\n      socket.on('send_message', (data) => this.handleSendMessage(socket, data));\n      socket.on('disconnect', () => this.handleDisconnect(socket));\n    });\n  }\n}\n```\n\n#### Real-time Features:\n- **Direct Messaging**: KullanÄ±cÄ±lar arasÄ± anlÄ±k mesajlaÅŸma\n- **Live Notifications**: Rozet, baÅŸarÄ± bildirimleri\n- **Content Updates**: Post beÄŸeni, yorum bildirimleri\n- **Presence System**: KullanÄ±cÄ± online/offline durumu\n\n### Redis Adapter\n\n```typescript\n// Socket.IO Redis adapter ile horizontal scaling\nio.adapter(createAdapter(redisConfig.pubClient, redisConfig.subClient));\n```\n\n---\n\n## ğŸ“Š Queue ve Background Jobs\n\n### Job Types\n\n#### Notification Jobs\n```typescript\ninterface NotificationJobData {\n  type: 'NEW_BADGE' | 'ACHIEVEMENT_UNLOCKED' | 'TIP_RECEIVED';\n  userId: number;\n  [key: string]: any;\n}\n```\n\n#### Analytics Jobs\n```typescript\ninterface AnalyticsJobData {\n  event: 'POST_CREATED' | 'USER_LOGIN' | 'WALLET_CONNECTED';\n  userId?: number;\n  data: any;\n}\n```\n\n### Job Processing\n\n```typescript\n// Job options\nconst jobOptions = {\n  removeOnComplete: 100,    // Tamamlanan iÅŸleri 100 adet tut\n  removeOnFail: 50,         // BaÅŸarÄ±sÄ±z iÅŸleri 50 adet tut\n  attempts: 3,               // 3 kez dene\n  backoff: {\n    type: 'exponential',\n    delay: 2000              // 2 saniye ile baÅŸla\n  }\n};\n```\n\n---\n\n## ğŸ“ Logging ve Monitoring\n\n### Winston Logger Configuration\n\n```typescript\n// src/infrastructure/logger/logger.ts\nconst logger = createLogger({\n  level: env === 'development' ? 'debug' : 'info',\n  format: format.combine(\n    format.timestamp(),\n    format.errors({ stack: true }),\n    format.json()\n  ),\n  transports: [\n    new transports.Console(),\n    new DailyRotateFile({\n      filename: 'logs/%DATE%.log',\n      datePattern: 'YYYY-MM-DD',\n      maxSize: '20m',\n      maxFiles: '14d'\n    }),\n    new DailyRotateFile({\n      filename: 'logs/%DATE%-error.log',\n      level: 'error',\n      maxFiles: '30d'\n    })\n  ]\n});\n```\n\n### Request Logging\n\n```typescript\n// Morgan ile HTTP request logging\napp.use(morgan('combined', {\n  stream: { write: (message) => logger.info(message.trim()) }\n}));\n```\n\n### Error Handling\n\n```typescript\n// Global error handler\nexport function errorHandler(err: any, req: Request, res: Response, next: NextFunction) {\n  logger.error('Unhandled error:', err);\n  res.status(500).json({ \n    message: 'Internal server error',\n    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })\n  });\n}\n```\n\n---\n\n## ğŸš€ Development Workflow\n\n### Code Quality Tools\n\n#### ESLint Configuration\n```javascript\n// eslint.config.mjs\nexport default defineConfig([\n  js.configs.recommended,\n  tseslint.configs.recommended,\n  pluginReact.configs.flat.recommended\n]);\n```\n\n#### Prettier Integration\n```json\n// .prettierrc\n{\n  \"semi\": true,\n  \"trailingComma\": \"es5\",\n  \"singleQuote\": true,\n  \"printWidth\": 80\n}\n```\n\n#### Git Hooks (Husky)\n```json\n// package.json\n{\n  \"husky\": {\n    \"hooks\": {\n      \"pre-commit\": \"lint-staged\"\n    }\n  },\n  \"lint-staged\": {\n    \"*.{js,ts,tsx}\": [\n      \"eslint --fix\",\n      \"prettier --write\"\n    ]\n  }\n}\n```\n\n### Development Scripts\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"nodemon\",\n    \"build\": \"tsc\",\n    \"start\": \"node dist/interfaces/server.js\",\n    \"start:prod\": \"NODE_ENV=production node dist/interfaces/server.js\",\n    \"worker\": \"ts-node src/infrastructure/workers/index.ts\",\n    \"lint\": \"eslint . --ext .ts,.tsx\",\n    \"format\": \"prettier --write .\",\n    \"db:seed\": \"ts-node prisma/seed.ts\"\n  }\n}\n```\n\n### Docker Development Environment\n\n```yaml\n# docker-compose.yml\nversion: '3.8'\nservices:\n  postgres:\n    image: postgres:15\n    environment:\n      POSTGRES_DB: tipbox_dev\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n    ports: ['5432:5432']\n    \n  redis:\n    image: redis:latest\n    ports: ['6379:6379']\n    \n  minio:\n    image: minio/minio:latest\n    command: server /data --console-address \":9001\"\n    ports: ['9000:9000', '9001:9001']\n```\n\n---\n\n## ğŸš€ Deployment ve DevOps\n\n### Environment Configuration\n\n#### Environment Files\n```bash\n# .env.development\nDATABASE_URL=postgresql://postgres:postgres@localhost:5432/tipbox_dev\nREDIS_URL=redis://localhost:6379\nNODE_ENV=development\n\n# .env.production  \nDATABASE_URL=postgresql://user:pass@rds.amazonaws.com:5432/tipbox_prod\nREDIS_URL=redis://redis-cluster.amazonaws.com:6379\nNODE_ENV=production\n```\n\n#### AWS Services Integration\n- **RDS PostgreSQL**: Production database\n- **ElastiCache Redis**: Caching layer\n- **S3**: File storage\n- **Elastic Beanstalk**: Application hosting\n\n### Build and Deployment\n\n```bash\n# Production build\nnpm run build\n\n# Start production server\nnpm run start:prod\n\n# Background worker\nnpm run worker\n```\n\n---\n\n## ğŸ¯ Best Practices\n\n### Code Organization\n\n#### 1. Domain-Driven Design\n- **Entities**: Business logic iÃ§eren domain objects\n- **Value Objects**: Immutable data structures\n- **Services**: Complex business operations\n- **Repositories**: Data access abstraction\n\n#### 2. Clean Architecture\n- **Dependency Inversion**: High-level modules don't depend on low-level modules\n- **Interface Segregation**: Small, focused interfaces\n- **Single Responsibility**: Each class has one reason to change\n\n#### 3. TypeScript Best Practices\n- **Strict Type Checking**: `strict: true` in tsconfig\n- **Interface Definitions**: Clear contracts between layers\n- **Generic Types**: Reusable type definitions\n- **Enum Usage**: Type-safe constants\n\n### Error Handling\n\n#### 1. Custom Error Classes\n```typescript\nexport class EmailAlreadyExistsError extends Error {\n  constructor(email: string) {\n    super(`Email ${email} already exists`);\n    this.name = 'EmailAlreadyExistsError';\n  }\n}\n```\n\n#### 2. Async Error Handling\n```typescript\nexport const asyncHandler = (fn: Function) => (req: Request, res: Response, next: NextFunction) => {\n  Promise.resolve(fn(req, res, next)).catch(next);\n};\n```\n\n#### 3. Global Error Handling\n```typescript\nprocess.on('uncaughtException', (err) => {\n  logger.error('Uncaught Exception:', err);\n  process.exit(1);\n});\n\nprocess.on('unhandledRejection', (reason) => {\n  logger.error('Unhandled Rejection:', reason);\n});\n```\n\n### Performance Optimization\n\n#### 1. Database Optimization\n- **Indexing**: Proper database indexes\n- **Query Optimization**: Efficient Prisma queries\n- **Connection Pooling**: Database connection management\n- **Caching**: Redis for frequently accessed data\n\n#### 2. Memory Management\n- **Connection Cleanup**: Proper resource disposal\n- **Queue Management**: Job queue optimization\n- **Cache TTL**: Appropriate cache expiration\n\n#### 3. Monitoring\n- **Logging**: Comprehensive application logging\n- **Metrics**: Performance monitoring\n- **Health Checks**: Service health monitoring\n\n---\n\n## ğŸ“š SonuÃ§\n\n**Tipbox Backend**, modern web development best practices'lerini kullanarak geliÅŸtirilmiÅŸ, Ã¶lÃ§eklenebilir ve maintainable bir backend servisidir. \n\n### GÃ¼Ã§lÃ¼ YÃ¶nler:\n- âœ… **Clean Architecture** ile organize edilmiÅŸ kod yapÄ±sÄ±\n- âœ… **Domain-Driven Design** ile business logic odaklÄ± geliÅŸtirme\n- âœ… **TypeScript** ile type-safe development\n- âœ… **Prisma ORM** ile gÃ¼venli database operations\n- âœ… **Redis** ile performant caching\n- âœ… **Socket.IO** ile real-time features\n- âœ… **BullMQ** ile background job processing\n- âœ… **Comprehensive logging** ile monitoring\n- âœ… **Docker** ile development environment\n- âœ… **Swagger** ile API documentation\n\n### GeliÅŸtirme Ã–nerileri:\n- ğŸ”„ **Unit Testing** eklenmesi (Jest)\n- ğŸ”„ **Integration Testing** implementasyonu\n- ğŸ”„ **API Rate Limiting** eklenmesi\n- ğŸ”„ **Database Migration** stratejisi\n- ğŸ”„ **Monitoring Dashboard** (Grafana)\n- ğŸ”„ **CI/CD Pipeline** kurulumu\n\n---\n\n*Son gÃ¼ncelleme: 2025-01-30*\n*Versiyon: 1.0.0*\n",
      "category": "knowledge"
    }
  ]
}